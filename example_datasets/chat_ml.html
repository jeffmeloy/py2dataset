
        <html>
        <head>
            <style>
                table {border-collapse: collapse; width: 100%; table-layout: fixed;}
                th, td {
                    border: 1px solid black;
                    padding: 8px;
                    text-align: left;
                    white-space: pre-line;
                    vertical-align: top;
                    word-wrap: break-word;
                }
            </style>
        </head>
        <body>
            <table>
                <thead>
                    <tr>
        <th style='width: 33.33%;'>conversation</th><th style='width: 33.33%;'>nbytes</th><th style='width: 33.33%;'>source</th>
                    </tr>
                </thead>
                <tbody>
        <tr><td>[{&#x27;from&#x27;:&nbsp;&#x27;system&#x27;,&nbsp;&#x27;value&#x27;:&nbsp;&#x27;code&nbsp;documentation:&nbsp;1)&nbsp;Description:&nbsp;The&nbsp;given&nbsp;Python&nbsp;file&nbsp;\&#x27;get_code_graph.py\&#x27;&nbsp;aims&nbsp;to&nbsp;analyze&nbsp;source&nbsp;code&nbsp;details&nbsp;extracted&nbsp;from&nbsp;a&nbsp;file&nbsp;summarized&nbsp;as&nbsp;dictionary&nbsp;format,&nbsp;generate&nbsp;a&nbsp;directed&nbsp;graph&nbsp;representing&nbsp;relationships&nbsp;among&nbsp;functions&nbsp;and&nbsp;classes&nbsp;within&nbsp;it,&nbsp;extract&nbsp;control&nbsp;flow&nbsp;tree&nbsp;from&nbsp;Abstract&nbsp;Syntax&nbsp;Tree&nbsp;(AST),&nbsp;reorganize&nbsp;the&nbsp;control&nbsp;flow&nbsp;structure&nbsp;according&nbsp;to&nbsp;the&nbsp;generated&nbsp;graph,&nbsp;and&nbsp;produce&nbsp;PlantUML&nbsp;activity&nbsp;diagram&nbsp;code&nbsp;for&nbsp;visualization&nbsp;purposes.&nbsp;It&nbsp;consists&nbsp;of&nbsp;several&nbsp;interconnected&nbsp;functions&nbsp;that&nbsp;perform&nbsp;specific&nbsp;tasks&nbsp;related&nbsp;to&nbsp;creating&nbsp;a&nbsp;code&nbsp;graph,&nbsp;parsing&nbsp;AST&nbsp;nodes&nbsp;for&nbsp;control&nbsp;flow&nbsp;extraction,&nbsp;restructuring&nbsp;control&nbsp;flow&nbsp;based&nbsp;on&nbsp;the&nbsp;graph,&nbsp;and&nbsp;generating&nbsp;PlantUML&nbsp;representation&nbsp;from&nbsp;the&nbsp;extracted&nbsp;elements.\n\n2)&nbsp;API&nbsp;Signatures:\n-&nbsp;`code_graph(file_summary:&nbsp;Dict[str,&nbsp;Union[Dict,&nbsp;str]]&nbsp;-&gt;&nbsp;Dict[str,&nbsp;Union[List[str],&nbsp;Dict[str,&nbsp;List[str]]]:`&nbsp;Extracts&nbsp;function&nbsp;and&nbsp;class&nbsp;method&nbsp;details&nbsp;from&nbsp;the&nbsp;file&nbsp;summary&nbsp;dictionary,&nbsp;creates&nbsp;a&nbsp;directed&nbsp;graph&nbsp;representing&nbsp;code&nbsp;relationships&nbsp;using&nbsp;NetworkX&nbsp;DiGraph,&nbsp;adds&nbsp;nodes&nbsp;and&nbsp;edges&nbsp;with&nbsp;related&nbsp;data.&nbsp;Returns&nbsp;a&nbsp;dictionary&nbsp;containing&nbsp;nodes&nbsp;and&nbsp;edges&nbsp;representing&nbsp;the&nbsp;code&nbsp;structure.\n-&nbsp;`get_edge_data_from_details(target_details:&nbsp;dict,&nbsp;source_details:&nbsp;dict,&nbsp;target:&nbsp;str)&nbsp;-&gt;&nbsp;dict`:&nbsp;Extracts&nbsp;edge&nbsp;data&nbsp;from&nbsp;details&nbsp;of&nbsp;targeted&nbsp;and&nbsp;source&nbsp;objects&nbsp;based&nbsp;on&nbsp;their&nbsp;information&nbsp;retrieved&nbsp;during&nbsp;graph&nbsp;construction.\n-&nbsp;`add_edge_with_data(source:&nbsp;str,&nbsp;target:&nbsp;str,&nbsp;init_method:&nbsp;Optional[str]&nbsp;=&nbsp;None)&nbsp;-&gt;&nbsp;None`:&nbsp;Adds&nbsp;edges&nbsp;to&nbsp;the&nbsp;graph&nbsp;with&nbsp;associated&nbsp;data&nbsp;between&nbsp;nodes&nbsp;in&nbsp;the&nbsp;code&nbsp;graph.\n-&nbsp;`add_edges_for_calls(source_name:&nbsp;str,&nbsp;calls:&nbsp;List[Any])&nbsp;-&gt;&nbsp;None`:&nbsp;Iterates&nbsp;through&nbsp;function&nbsp;definitions&nbsp;and&nbsp;class&nbsp;method&nbsp;calls&nbsp;adding&nbsp;them&nbsp;as&nbsp;nodes&nbsp;and&nbsp;edges&nbsp;if&nbsp;applicable.\n-&nbsp;`extract_control_flow_tree(nodes:&nbsp;List[ast.AST])&nbsp;-&gt;&nbsp;List[Union[str,&nbsp;dict]]`:&nbsp;Parses&nbsp;AST&nbsp;nodes&nbsp;to&nbsp;create&nbsp;a&nbsp;control&nbsp;flow&nbsp;tree&nbsp;structure&nbsp;representation&nbsp;of&nbsp;the&nbsp;code&nbsp;logic.\n-&nbsp;`reorganize_control_flow(code_graph:&nbsp;Dict[str,&nbsp;Union[List[str],&nbsp;Dict[str,&nbsp;List[str]],&nbsp;control_flow_structure)&nbsp;-&gt;&nbsp;List[dict]]`:&nbsp;Gets&nbsp;starting&nbsp;points&nbsp;from&nbsp;the&nbsp;code&nbsp;graph&nbsp;and&nbsp;recursively&nbsp;rearranges&nbsp;the&nbsp;control&nbsp;flow&nbsp;structure&nbsp;to&nbsp;match&nbsp;it.\n-&nbsp;`get_plantUML_element(element,&nbsp;indentation=&quot;&quot;)&nbsp;-&gt;&nbsp;str`:&nbsp;Generates&nbsp;PlantUML&nbsp;code&nbsp;for&nbsp;each&nbsp;element&nbsp;in&nbsp;the&nbsp;control&nbsp;flow&nbsp;structure&nbsp;with&nbsp;given&nbsp;indentation&nbsp;level.\n-&nbsp;`get_plantUML(control_flow_structure)&nbsp;-&gt;&nbsp;str`:&nbsp;Produces&nbsp;overall&nbsp;PlantUML&nbsp;activity&nbsp;diagram&nbsp;code&nbsp;from&nbsp;the&nbsp;reorganized&nbsp;control&nbsp;flow&nbsp;structure.\n-&nbsp;`get_code_graph(file_summary:&nbsp;Dict[str,&nbsp;Union[Dict,&nbsp;str],&nbsp;file_ast)&nbsp;-&gt;&nbsp;Tuple[Dict[str,&nbsp;List[dict],&nbsp;List[dict],&nbsp;str]`:&nbsp;Combines&nbsp;entire&nbsp;code&nbsp;graph&nbsp;creation&nbsp;with&nbsp;control&nbsp;flow&nbsp;extraction&nbsp;and&nbsp;PlantUML&nbsp;generation.\n\n3)&nbsp;Functional&nbsp;Requirements:\n-&nbsp;[req01]&nbsp;`code_graph()`&nbsp;creates&nbsp;a&nbsp;lookup&nbsp;dictionary&nbsp;for&nbsp;function&nbsp;and&nbsp;class&nbsp;method&nbsp;details&nbsp;from&nbsp;file&nbsp;summary,&nbsp;builds&nbsp;a&nbsp;directed&nbsp;graph&nbsp;with&nbsp;nodes&nbsp;representing&nbsp;classes/functions&nbsp;as&nbsp;sources/targets&nbsp;of&nbsp;method&nbsp;calls&nbsp;adding&nbsp;edges&nbsp;with&nbsp;data&nbsp;where&nbsp;needed;&nbsp;generates&nbsp;node&nbsp;list&nbsp;and&nbsp;edge&nbsp;list&nbsp;for&nbsp;later&nbsp;usage.\n-&nbsp;[req02]&nbsp;`extract_control_flow_tree()`&nbsp;traverses&nbsp;AST&nbsp;nodes&nbsp;extracting&nbsp;code&nbsp;structure&nbsp;information&nbsp;in&nbsp;terms&nbsp;of&nbsp;\&#x27;if\&#x27;,&nbsp;\&#x27;while\&#x27;,&nbsp;\&#x27;try-catch\&#x27;&nbsp;blocks,&nbsp;etc.,&nbsp;producing&nbsp;control&nbsp;flow&nbsp;tree&nbsp;elements.\n-&nbsp;[req03]&nbsp;`reorganize_control_flow()`&nbsp;locates&nbsp;starting&nbsp;points&nbsp;from&nbsp;the&nbsp;generated&nbsp;graph&nbsp;and&nbsp;restructures&nbsp;control&nbsp;flow&nbsp;elements&nbsp;accordingly.\n-&nbsp;[req04]&nbsp;`get_plantUML_element()`&nbsp;generates&nbsp;PlantUML&nbsp;code&nbsp;for&nbsp;each&nbsp;element&nbsp;recursively&nbsp;with&nbsp;indentation&nbsp;levels,&nbsp;forming&nbsp;activity&nbsp;diagrams&nbsp;for&nbsp;visualization&nbsp;purposes.\n-&nbsp;[req05]&nbsp;`get_plantUML()`&nbsp;collects&nbsp;all&nbsp;PlantUML&nbsp;codes&nbsp;from&nbsp;reorganized&nbsp;control&nbsp;flow&nbsp;structure&nbsp;elements&nbsp;and&nbsp;concatenates&nbsp;them&nbsp;into&nbsp;a&nbsp;single&nbsp;string&nbsp;representation.\n-&nbsp;[req06]&nbsp;`get_code_graph()`&nbsp;invokes&nbsp;code&nbsp;graph&nbsp;creation,&nbsp;control&nbsp;flow&nbsp;extraction&nbsp;using&nbsp;AST&nbsp;traversal,&nbsp;control&nbsp;flow&nbsp;reorganization,&nbsp;and&nbsp;PlantUML&nbsp;generation&nbsp;altogether&nbsp;returning&nbsp;results&nbsp;as&nbsp;tuples.\n\n4)&nbsp;Variables&nbsp;Explanation:\n-&nbsp;`function_details_lookup`,&nbsp;`class_method_details_lookup`:&nbsp;Dictionaries&nbsp;storing&nbsp;function/class&nbsp;method&nbsp;details&nbsp;for&nbsp;graph&nbsp;construction.\n-&nbsp;`G`:&nbsp;NetworkX&nbsp;DiGraph&nbsp;object&nbsp;representing&nbsp;the&nbsp;code&nbsp;relationships.\n-&nbsp;`nodes`,&nbsp;`edges`:&nbsp;Lists&nbsp;containing&nbsp;nodes&nbsp;and&nbsp;edges&nbsp;in&nbsp;the&nbsp;generated&nbsp;graph.\n-&nbsp;`source_name`,&nbsp;`target`,&nbsp;`init_method`:&nbsp;Identifiers&nbsp;referring&nbsp;to&nbsp;function/class&nbsp;names&nbsp;for&nbsp;edge&nbsp;building.\n-&nbsp;`starting_points`,&nbsp;`control_flow_tree`,&nbsp;`code_graph`,&nbsp;`plantUML`,&nbsp;`element`,&nbsp;`indentation`:&nbsp;Used&nbsp;in&nbsp;different&nbsp;functions&nbsp;for&nbsp;specific&nbsp;purposes&nbsp;related&nbsp;to&nbsp;graph&nbsp;traversal,&nbsp;control&nbsp;flow&nbsp;manipulation&nbsp;and&nbsp;PlantUML&nbsp;generation.\n-&nbsp;`node_keywords_map`:&nbsp;Mapping&nbsp;Python&nbsp;keywords&nbsp;to&nbsp;their&nbsp;respective&nbsp;PlantUML&nbsp;representations.&#x27;},&nbsp;{&#x27;from&#x27;:&nbsp;&#x27;human&#x27;,&nbsp;&#x27;value&#x27;:&nbsp;&#x27;Output&nbsp;the&nbsp;Python&nbsp;code&nbsp;described&nbsp;by&nbsp;the&nbsp;code&nbsp;documentation.&#x27;},&nbsp;{&#x27;from&#x27;:&nbsp;&#x27;gpt&#x27;,&nbsp;&#x27;value&#x27;:&nbsp;&#x27;```python\n&quot;&quot;&quot;\nRequirements\n[req01]&nbsp;The&nbsp;code_graph&nbsp;function&nbsp;performs&nbsp;the&nbsp;following:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Extracts&nbsp;the&nbsp;function&nbsp;and&nbsp;class&nbsp;method&nbsp;details&nbsp;from&nbsp;the&nbsp;file&nbsp;summary.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Creates&nbsp;a&nbsp;lookup&nbsp;dictionary&nbsp;for&nbsp;function&nbsp;and&nbsp;class&nbsp;method&nbsp;details.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Creates&nbsp;a&nbsp;directed&nbsp;graph&nbsp;with&nbsp;nodes&nbsp;and&nbsp;edges&nbsp;representing&nbsp;the&nbsp;relationships&nbsp;in&nbsp;the&nbsp;code.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Adds&nbsp;edges&nbsp;for&nbsp;function&nbsp;and&nbsp;class&nbsp;method&nbsp;calls.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.&nbsp;Adds&nbsp;edge&nbsp;data&nbsp;to&nbsp;edges.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f.&nbsp;Returns&nbsp;a&nbsp;dictionary&nbsp;with&nbsp;nodes&nbsp;and&nbsp;edges&nbsp;representing&nbsp;the&nbsp;relationships&nbsp;in&nbsp;the&nbsp;code.\n[req02]&nbsp;The&nbsp;extract_control_flow_tree&nbsp;function&nbsp;performs&nbsp;the&nbsp;following:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Extracts&nbsp;control&nbsp;flow&nbsp;tree&nbsp;from&nbsp;AST.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Returns&nbsp;control&nbsp;flow&nbsp;tree.\n[req03]&nbsp;The&nbsp;reorganize_control_flow&nbsp;function&nbsp;performs&nbsp;the&nbsp;following:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Gets&nbsp;starting&nbsp;points&nbsp;from&nbsp;the&nbsp;code&nbsp;graph.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Reorganizes&nbsp;the&nbsp;control&nbsp;flow&nbsp;structure&nbsp;recursively.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Returns&nbsp;reorganized&nbsp;control&nbsp;flow&nbsp;structure.\n[req04]&nbsp;The&nbsp;get_plantUML_element&nbsp;function&nbsp;performs&nbsp;the&nbsp;following:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Gets&nbsp;plantUML&nbsp;code&nbsp;for&nbsp;each&nbsp;element.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Returns&nbsp;plantUML&nbsp;code&nbsp;for&nbsp;each&nbsp;element.\n[req05]&nbsp;The&nbsp;get_plantUML&nbsp;function&nbsp;performs&nbsp;the&nbsp;following:&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Gets&nbsp;plantUML&nbsp;code&nbsp;for&nbsp;entire&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Returns&nbsp;plantUML&nbsp;code&nbsp;for&nbsp;entire&nbsp;file.\n[req06]&nbsp;The&nbsp;get_code_graph&nbsp;function&nbsp;performs&nbsp;the&nbsp;following:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Gets&nbsp;the&nbsp;entire&nbsp;code&nbsp;graph\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Gets&nbsp;the&nbsp;control&nbsp;flow&nbsp;structure\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Gets&nbsp;the&nbsp;plantUML&nbsp;code\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Returns&nbsp;entire&nbsp;code&nbsp;graph,&nbsp;control&nbsp;flow&nbsp;structure&nbsp;and&nbsp;plantUML&nbsp;code\n&quot;&quot;&quot;\nimport&nbsp;ast\nimport&nbsp;json\nfrom&nbsp;typing&nbsp;import&nbsp;Dict,&nbsp;List,&nbsp;Optional,&nbsp;Union\nimport&nbsp;networkx&nbsp;as&nbsp;nx\n\n\ndef&nbsp;code_graph(\n&nbsp;&nbsp;&nbsp;&nbsp;file_summary:&nbsp;Dict[str,&nbsp;Union[Dict,&nbsp;str]],\n)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;Union[List[str],&nbsp;Dict[str,&nbsp;List[str]]]]:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Create&nbsp;a&nbsp;dictionary&nbsp;representation&nbsp;of&nbsp;file&nbsp;details.\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_summary:&nbsp;Dict[str,&nbsp;Union[Dict,&nbsp;str]]:&nbsp;The&nbsp;details&nbsp;extracted&nbsp;from&nbsp;the&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dict:&nbsp;A&nbsp;dictionary&nbsp;with&nbsp;nodes&nbsp;and&nbsp;edges&nbsp;representing&nbsp;the&nbsp;relationships&nbsp;in&nbsp;the&nbsp;code.\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;G&nbsp;=&nbsp;nx.DiGraph()\n\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Create&nbsp;lookup&nbsp;dictionaries&nbsp;for&nbsp;function&nbsp;and&nbsp;class&nbsp;method&nbsp;details\n&nbsp;&nbsp;&nbsp;&nbsp;function_details_lookup&nbsp;=&nbsp;{}\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;function_def&nbsp;in&nbsp;file_summary[&quot;function_defs&quot;]:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function_details_lookup.update(function_def)\n&nbsp;&nbsp;&nbsp;&nbsp;class_method_details_lookup&nbsp;=&nbsp;{}\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;class_def&nbsp;in&nbsp;file_summary[&quot;class_defs&quot;]:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class_name,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class_details,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;in&nbsp;class_def.items():&nbsp;&nbsp;#&nbsp;Extract&nbsp;class&nbsp;name&nbsp;and&nbsp;details\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;G.add_node(class_name)&nbsp;&nbsp;#&nbsp;Add&nbsp;class&nbsp;as&nbsp;a&nbsp;graph&nbsp;node\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;method_name,&nbsp;method_details&nbsp;in&nbsp;class_details[&quot;method_defs&quot;].items():\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;qualified_method_name&nbsp;=&nbsp;(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f&quot;{class_name}.{method_name}&quot;&nbsp;&nbsp;#&nbsp;Create&nbsp;method&nbsp;fully&nbsp;qualified&nbsp;name\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;G.add_node(qualified_method_name)&nbsp;&nbsp;#&nbsp;Add&nbsp;method&nbsp;as&nbsp;a&nbsp;graph&nbsp;node\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class_method_details_lookup[\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;qualified_method_name\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;=&nbsp;method_details&nbsp;&nbsp;#&nbsp;Store&nbsp;method&nbsp;details\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;G.add_edge(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class_name,&nbsp;qualified_method_name\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;&nbsp;#&nbsp;Add&nbsp;edge&nbsp;from&nbsp;class&nbsp;to&nbsp;method\n\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Helper&nbsp;function&nbsp;to&nbsp;extract&nbsp;edge&nbsp;data&nbsp;from&nbsp;target&nbsp;details\n&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_edge_data_from_details(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target_details:&nbsp;dict,&nbsp;source_details:&nbsp;dict,&nbsp;target:&nbsp;str\n&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;-&gt;&nbsp;dict:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;edge_data&nbsp;=&nbsp;{}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;target_details:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;edge_data[&quot;target_inputs&quot;]&nbsp;=&nbsp;target_details.get(&quot;inputs&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;edge_data[&quot;target_returns&quot;]&nbsp;=&nbsp;list(set(target_details.get(&quot;returns&quot;,&nbsp;[])))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source_details\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;&quot;call_inputs&quot;&nbsp;in&nbsp;source_details\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;target&nbsp;in&nbsp;source_details[&quot;call_inputs&quot;]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;edge_data[&quot;target_inputs&quot;]&nbsp;=&nbsp;source_details[&quot;call_inputs&quot;][target]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;edge_data\n\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Helper&nbsp;function&nbsp;to&nbsp;add&nbsp;edge&nbsp;with&nbsp;data\n&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;add_edge_with_data(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source:&nbsp;str,&nbsp;target:&nbsp;str,&nbsp;init_method:&nbsp;Optional[str]&nbsp;=&nbsp;None\n&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;-&gt;&nbsp;None:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target_details&nbsp;=&nbsp;class_method_details_lookup.get(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init_method&nbsp;or&nbsp;target\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;or&nbsp;function_details_lookup.get(target)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source_details&nbsp;=&nbsp;function_details_lookup.get(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;or&nbsp;class_method_details_lookup.get(source)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;G.add_edge(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**get_edge_data_from_details(target_details,&nbsp;source_details,&nbsp;target),\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Helper&nbsp;function&nbsp;to&nbsp;add&nbsp;edges&nbsp;for&nbsp;function&nbsp;or&nbsp;class&nbsp;method&nbsp;calls\n&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;add_edges_for_calls(source_name,&nbsp;calls):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class_names&nbsp;=&nbsp;[\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list(class_def.keys())[0]&nbsp;for&nbsp;class_def&nbsp;in&nbsp;file_summary[&quot;class_defs&quot;]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;called&nbsp;in&nbsp;calls:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;called_class_name&nbsp;=&nbsp;called.split(&quot;.&quot;)[0]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;called.startswith(&quot;self.&quot;):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method_name&nbsp;=&nbsp;called.replace(&quot;self.&quot;,&nbsp;&quot;&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fully_qualified_name&nbsp;=&nbsp;f&quot;{source_name.split(\&#x27;.\&#x27;)[0]}.{method_name}&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;fully_qualified_name&nbsp;in&nbsp;class_method_details_lookup:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_edge_with_data(source_name,&nbsp;fully_qualified_name)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;called&nbsp;in&nbsp;function_details_lookup\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;called&nbsp;in&nbsp;class_method_details_lookup\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;f&quot;{source_name.split(\&#x27;.\&#x27;)[0]}.{called}&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;class_method_details_lookup\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_edge_with_data(source_name,&nbsp;called)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;called_class_name&nbsp;in&nbsp;class_names:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init_method&nbsp;=&nbsp;None\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init_method_name&nbsp;=&nbsp;f&quot;{called}.__init__&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;init_method_name&nbsp;in&nbsp;class_method_details_lookup:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init_method&nbsp;=&nbsp;init_method_name\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_edge_with_data(source_name,&nbsp;called,&nbsp;init_method)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;G.add_node(called)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_edge_with_data(source_name,&nbsp;called)\n\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Add&nbsp;function&nbsp;nodes&nbsp;to&nbsp;graph&nbsp;and&nbsp;edges&nbsp;for&nbsp;function&nbsp;calls\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;function_name&nbsp;in&nbsp;function_details_lookup:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;G.add_node(function_name)\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;func_name,&nbsp;details&nbsp;in&nbsp;function_details_lookup.items():\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_edges_for_calls(func_name,&nbsp;details[&quot;calls&quot;])\n\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Add&nbsp;edges&nbsp;for&nbsp;method&nbsp;calls\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;qualified_method_name,&nbsp;details&nbsp;in&nbsp;class_method_details_lookup.items():\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_edges_for_calls(qualified_method_name,&nbsp;details[&quot;calls&quot;])\n\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Add&nbsp;edge&nbsp;data&nbsp;to&nbsp;edges&nbsp;and&nbsp;create&nbsp;node&nbsp;and&nbsp;edges&nbsp;to&nbsp;return\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;edge&nbsp;in&nbsp;G.edges:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source,&nbsp;target&nbsp;=&nbsp;edge\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target_details&nbsp;=&nbsp;function_details_lookup.get(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;or&nbsp;class_method_details_lookup.get(target)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source_details&nbsp;=&nbsp;function_details_lookup.get(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;or&nbsp;class_method_details_lookup.get(source)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;edge_data&nbsp;=&nbsp;get_edge_data_from_details(target_details,&nbsp;source_details,&nbsp;target)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;G[source][target].update(edge_data)\n&nbsp;&nbsp;&nbsp;&nbsp;nodes&nbsp;=&nbsp;list(G.nodes)\n&nbsp;&nbsp;&nbsp;&nbsp;edges&nbsp;=&nbsp;[\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&quot;source&quot;:&nbsp;edge[0],&nbsp;&quot;target&quot;:&nbsp;edge[1],&nbsp;**edge[2]}&nbsp;for&nbsp;edge&nbsp;in&nbsp;G.edges.data()\n&nbsp;&nbsp;&nbsp;&nbsp;]\n\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;remove&nbsp;any&nbsp;nodes&nbsp;that&nbsp;are&nbsp;not&nbsp;either&nbsp;a&nbsp;source&nbsp;of&nbsp;an&nbsp;edge&nbsp;or&nbsp;a&nbsp;target&nbsp;of&nbsp;an&nbsp;edge\n&nbsp;&nbsp;&nbsp;&nbsp;nodes_to_remove&nbsp;=&nbsp;[]\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;node&nbsp;in&nbsp;nodes:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;node&nbsp;not&nbsp;in&nbsp;[edge[&quot;source&quot;]&nbsp;for&nbsp;edge&nbsp;in&nbsp;edges]&nbsp;and&nbsp;node&nbsp;not&nbsp;in&nbsp;[\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;edge[&quot;target&quot;]&nbsp;for&nbsp;edge&nbsp;in&nbsp;edges\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nodes_to_remove.append(node)\n\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{&quot;nodes&quot;:&nbsp;nodes,&nbsp;&quot;edges&quot;:&nbsp;edges}\n\n\ndef&nbsp;extract_control_flow_tree(nodes:&nbsp;List[ast.AST])&nbsp;-&gt;&nbsp;List[Union[str,&nbsp;dict]]:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Extract&nbsp;control&nbsp;flow&nbsp;tree&nbsp;from&nbsp;AST.\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nodes:&nbsp;AST&nbsp;nodes\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;control_flow_tree:&nbsp;control&nbsp;flow&nbsp;tree\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;control_flow_tree&nbsp;=&nbsp;[]\n&nbsp;&nbsp;&nbsp;&nbsp;node_keywords_map&nbsp;=&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ast.FunctionDef:&nbsp;&quot;def&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ast.AsyncFunctionDef:&nbsp;&quot;def&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ast.ClassDef:&nbsp;&quot;class&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ast.While:&nbsp;&quot;while&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ast.For:&nbsp;&quot;for&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ast.AsyncFor:&nbsp;&quot;for&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ast.With:&nbsp;&quot;with&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ast.AsyncWith:&nbsp;&quot;with&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ast.Return:&nbsp;&quot;return&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ast.If:&nbsp;&quot;if&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ast.Try:&nbsp;&quot;try&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;node&nbsp;in&nbsp;nodes:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node_type&nbsp;=&nbsp;type(node)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;node_type&nbsp;not&nbsp;in&nbsp;node_keywords_map:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;control_flow_tree.append(ast.unparse(node))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;keyword&nbsp;=&nbsp;node_keywords_map[node_type]\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;keyword&nbsp;==&nbsp;&quot;def&quot;:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args_str&nbsp;=&nbsp;&quot;,&nbsp;&quot;.join([ast.unparse(arg)&nbsp;for&nbsp;arg&nbsp;in&nbsp;node.args.args])\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key&nbsp;=&nbsp;f&quot;def&nbsp;{node.name}({args_str})&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;=&nbsp;extract_control_flow_tree(node.body)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;control_flow_tree.append({key:&nbsp;value})\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;keyword&nbsp;==&nbsp;&quot;class&quot;:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key&nbsp;=&nbsp;f&quot;class&nbsp;{node.name}&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;=&nbsp;extract_control_flow_tree(node.body)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;control_flow_tree.append({key:&nbsp;value})\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;keyword&nbsp;==&nbsp;&quot;while&quot;:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key&nbsp;=&nbsp;f&quot;while&nbsp;{ast.unparse(node.test)}&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;=&nbsp;extract_control_flow_tree(node.body)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;control_flow_tree.append({key:&nbsp;value})\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;keyword&nbsp;==&nbsp;&quot;for&quot;:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key&nbsp;=&nbsp;f&quot;for&nbsp;{ast.unparse(node.target)}&nbsp;in&nbsp;{ast.unparse(node.iter)}&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;=&nbsp;extract_control_flow_tree(node.body)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;control_flow_tree.append({key:&nbsp;value})\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;keyword&nbsp;==&nbsp;&quot;with&quot;:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key&nbsp;=&nbsp;f&quot;with&nbsp;{\&#x27;,&nbsp;\&#x27;.join([ast.unparse(item)&nbsp;for&nbsp;item&nbsp;in&nbsp;node.items])}&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;=&nbsp;extract_control_flow_tree(node.body)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;control_flow_tree.append({key:&nbsp;value})\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;keyword&nbsp;==&nbsp;&quot;return&quot;:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key&nbsp;=&nbsp;&quot;return&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;=&nbsp;[ast.unparse(node.value)]&nbsp;if&nbsp;node.value&nbsp;is&nbsp;not&nbsp;None&nbsp;else&nbsp;[]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;control_flow_tree.append({key:&nbsp;value})\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;keyword&nbsp;==&nbsp;&quot;if&quot;:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key&nbsp;=&nbsp;f&quot;if&nbsp;{ast.unparse(node.test)}&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;=&nbsp;extract_control_flow_tree(node.body)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if_block&nbsp;=&nbsp;{key:&nbsp;value}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;orelse&nbsp;=&nbsp;node.orelse\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;orelse&nbsp;and&nbsp;isinstance(orelse[0],&nbsp;ast.If):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key&nbsp;=&nbsp;f&quot;elif&nbsp;{ast.unparse(orelse[0].test)}&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;=&nbsp;extract_control_flow_tree(orelse[0].body)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if_block[key]&nbsp;=&nbsp;value\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;orelse&nbsp;=&nbsp;orelse[0].orelse\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;orelse:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key&nbsp;=&nbsp;&quot;else&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;=&nbsp;extract_control_flow_tree(orelse)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if_block[key]&nbsp;=&nbsp;value\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;control_flow_tree.append(if_block)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;keyword&nbsp;==&nbsp;&quot;try&quot;:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try_block&nbsp;=&nbsp;extract_control_flow_tree(node.body)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except_block&nbsp;=&nbsp;[]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;handler&nbsp;in&nbsp;node.handlers:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h_type&nbsp;=&nbsp;ast.unparse(handler.type)&nbsp;if&nbsp;handler.type&nbsp;is&nbsp;not&nbsp;None&nbsp;else&nbsp;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h_name&nbsp;=&nbsp;(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ast.unparse(handler.name)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(handler.name,&nbsp;ast.Name)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key&nbsp;=&nbsp;f&quot;except&nbsp;{h_type}&nbsp;as&nbsp;{h_name}:&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;=&nbsp;extract_control_flow_tree(handler.body)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except_block.append({key:&nbsp;value})\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;control_flow_dict&nbsp;=&nbsp;{&quot;try&quot;:&nbsp;try_block,&nbsp;&quot;except&quot;:&nbsp;except_block}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;node.orelse:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else_block&nbsp;=&nbsp;extract_control_flow_tree(node.orelse)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;control_flow_dict[&quot;else&quot;]&nbsp;=&nbsp;else_block\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;node.finalbody:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;finally_block&nbsp;=&nbsp;extract_control_flow_tree(node.finalbody)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;control_flow_dict[&quot;finally&quot;]&nbsp;=&nbsp;finally_block\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;control_flow_tree.append(control_flow_dict)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;control_flow_tree.append(ast.unparse(node))\n\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;control_flow_tree\n\n\ndef&nbsp;reorganize_control_flow(code_graph,&nbsp;control_flow_structure):\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Reorganize&nbsp;control&nbsp;flow&nbsp;structure&nbsp;to&nbsp;match&nbsp;the&nbsp;code&nbsp;graph.\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details:&nbsp;file&nbsp;details\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;control_flow_structure:&nbsp;control&nbsp;flow&nbsp;structure\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reorganized_control_flow_structure:&nbsp;reorganized&nbsp;control&nbsp;flow&nbsp;structure\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Get&nbsp;starting&nbsp;points&nbsp;from&nbsp;the&nbsp;code&nbsp;graph&nbsp;as&nbsp;those\n&nbsp;&nbsp;&nbsp;&nbsp;targets&nbsp;=&nbsp;[edge[&quot;target&quot;]&nbsp;for&nbsp;edge&nbsp;in&nbsp;code_graph[&quot;edges&quot;]]\n&nbsp;&nbsp;&nbsp;&nbsp;starting_points&nbsp;=&nbsp;[node&nbsp;for&nbsp;node&nbsp;in&nbsp;code_graph[&quot;nodes&quot;]&nbsp;if&nbsp;node&nbsp;not&nbsp;in&nbsp;targets]\n\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Define&nbsp;a&nbsp;function&nbsp;to&nbsp;reorganize&nbsp;the&nbsp;structure&nbsp;recursively\n&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;reorganize_structure(structure,&nbsp;start_points):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;organized,&nbsp;seen&nbsp;=&nbsp;[],&nbsp;set()\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Iterate&nbsp;through&nbsp;each&nbsp;start&nbsp;point&nbsp;and&nbsp;find&nbsp;matching&nbsp;elements&nbsp;in&nbsp;structure\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;start&nbsp;in&nbsp;start_points:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;element&nbsp;in&nbsp;structure:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(element,&nbsp;dict):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key&nbsp;=&nbsp;next(iter(element))&nbsp;&nbsp;#&nbsp;Get&nbsp;the&nbsp;first&nbsp;key&nbsp;of&nbsp;the&nbsp;dictionary\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start&nbsp;in&nbsp;key\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;):&nbsp;&nbsp;#&nbsp;Add&nbsp;element&nbsp;if&nbsp;it&nbsp;matches&nbsp;the&nbsp;start&nbsp;point&nbsp;and&nbsp;hasn\&#x27;t&nbsp;been&nbsp;seen\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element_id&nbsp;=&nbsp;json.dumps(element)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;element_id&nbsp;not&nbsp;in&nbsp;seen:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;organized.append(element)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;seen.add(element_id)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isinstance(element,&nbsp;str)&nbsp;and&nbsp;start&nbsp;in&nbsp;element\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;):&nbsp;&nbsp;#&nbsp;Handle&nbsp;string&nbsp;elements\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;organized.append(element)\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Append&nbsp;elements&nbsp;not&nbsp;included&nbsp;in&nbsp;the&nbsp;organized&nbsp;list\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;remaining&nbsp;=&nbsp;[elem&nbsp;for&nbsp;elem&nbsp;in&nbsp;structure&nbsp;if&nbsp;json.dumps(elem)&nbsp;not&nbsp;in&nbsp;seen]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;organized.extend(remaining)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;organized\n\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Reorganize&nbsp;the&nbsp;control&nbsp;flow&nbsp;structure&nbsp;recursively\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;reorganize_structure(control_flow_structure,&nbsp;starting_points)\n\n\ndef&nbsp;get_plantUML_element(element,&nbsp;indentation=&quot;&quot;):\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;plantUML&nbsp;code&nbsp;for&nbsp;each&nbsp;element.\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element:&nbsp;element\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indentation:&nbsp;current&nbsp;indentation&nbsp;level\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plantuml_str:&nbsp;plantUML&nbsp;code&nbsp;for&nbsp;each&nbsp;element\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;plantuml_str&nbsp;=&nbsp;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(element,&nbsp;dict):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key&nbsp;=&nbsp;next(iter(element))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;=&nbsp;element[key]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;key.startswith(&quot;def&nbsp;&quot;)&nbsp;or&nbsp;key.startswith(&quot;async&nbsp;def&nbsp;&quot;):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plantuml_str&nbsp;+=&nbsp;f&quot;{indentation}def&nbsp;{value}&nbsp;{{\\n&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inner_indentation&nbsp;=&nbsp;indentation&nbsp;+&nbsp;&quot;&nbsp;&nbsp;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;key.startswith(&quot;class&nbsp;&quot;):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plantuml_str&nbsp;+=&nbsp;f&quot;{indentation}class&nbsp;{value}&nbsp;{{\\n&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inner_indentation&nbsp;=&nbsp;indentation&nbsp;+&nbsp;&quot;&nbsp;&nbsp;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;key.startswith(&quot;if&nbsp;&quot;):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plantuml_str&nbsp;+=&nbsp;f&quot;{indentation}if&nbsp;({value})&nbsp;{{\\n&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inner_indentation&nbsp;=&nbsp;indentation&nbsp;+&nbsp;&quot;&nbsp;&nbsp;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key.startswith(&quot;for&nbsp;&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;key.startswith(&quot;while&nbsp;&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;key.startswith(&quot;asyncfor&nbsp;&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plantuml_str&nbsp;+=&nbsp;f&quot;{indentation}while&nbsp;({value})&nbsp;{{\\n&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inner_indentation&nbsp;=&nbsp;indentation&nbsp;+&nbsp;&quot;&nbsp;&nbsp;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;key.startswith(&quot;try&nbsp;&quot;):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plantuml_str&nbsp;+=&nbsp;f&quot;{indentation}try&nbsp;{{\\n&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inner_indentation&nbsp;=&nbsp;indentation&nbsp;+&nbsp;&quot;&nbsp;&nbsp;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;key.startswith(&quot;except&nbsp;&quot;):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plantuml_str&nbsp;+=&nbsp;f&quot;{indentation}catch&nbsp;({value})&nbsp;{{\\n&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inner_indentation&nbsp;=&nbsp;indentation&nbsp;+&nbsp;&quot;&nbsp;&nbsp;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plantuml_str&nbsp;+=&nbsp;f&quot;{indentation}:{key};\\n&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inner_indentation&nbsp;=&nbsp;indentation\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(value,&nbsp;list):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;child&nbsp;in&nbsp;value:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plantuml_str&nbsp;+=&nbsp;get_plantUML_element(child,&nbsp;inner_indentation)\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;key.startswith(&quot;def&nbsp;&quot;)&nbsp;or&nbsp;key.startswith(&quot;class&nbsp;&quot;):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plantuml_str&nbsp;+=&nbsp;f&quot;{indentation}}}\\n&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key.startswith(&quot;if&nbsp;&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;key.startswith(&quot;for&nbsp;&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;key.startswith(&quot;while&nbsp;&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;key.startswith(&quot;asyncfor&nbsp;&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;key.startswith(&quot;try&nbsp;&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;key.startswith(&quot;except&nbsp;&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plantuml_str&nbsp;+=&nbsp;f&quot;{indentation}}}\\n&quot;\n\n&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;isinstance(element,&nbsp;str):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plantuml_str&nbsp;+=&nbsp;f&quot;{indentation}:{element};\\n&quot;\n\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;plantuml_str\n\n\ndef&nbsp;get_plantUML(control_flow_structure):\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;plantUML&nbsp;activity&nbsp;diagram&nbsp;code&nbsp;for&nbsp;entire&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details:&nbsp;file&nbsp;details\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plantuml_str:&nbsp;plantUML&nbsp;code&nbsp;for&nbsp;entire&nbsp;file\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;plantuml_str&nbsp;=&nbsp;&quot;@startuml\\n&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;element&nbsp;in&nbsp;control_flow_structure:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plantuml_str&nbsp;+=&nbsp;get_plantUML_element(element,&nbsp;&quot;&nbsp;&nbsp;&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;plantuml_str&nbsp;+=&nbsp;&quot;end\\n@enduml&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;plantuml_str\n\n\ndef&nbsp;get_code_graph(file_summary,&nbsp;file_ast):\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Add&nbsp;code&nbsp;graph&nbsp;and&nbsp;control&nbsp;flow&nbsp;to&nbsp;file&nbsp;details.\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details:&nbsp;file&nbsp;details\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details:&nbsp;file&nbsp;details\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;try:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entire_code_graph&nbsp;=&nbsp;code_graph(file_summary)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;control_flow_tree&nbsp;=&nbsp;extract_control_flow_tree(file_ast.body)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;control_flow_structure&nbsp;=&nbsp;reorganize_control_flow(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entire_code_graph,&nbsp;control_flow_tree\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plantUML&nbsp;=&nbsp;get_plantUML(control_flow_structure)\n&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;control_flow_structure&nbsp;=&nbsp;[str(e)]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plantUML&nbsp;=&nbsp;str(e)\n\n&nbsp;&nbsp;&nbsp;&nbsp;#print(\&#x27;file_summary:\&#x27;,&nbsp;file_summary)\n&nbsp;&nbsp;&nbsp;&nbsp;#print(\&#x27;entire_code_graph:\&#x27;,&nbsp;entire_code_graph)\n&nbsp;&nbsp;&nbsp;&nbsp;#print(\&#x27;control_flow_structure:\&#x27;,&nbsp;control_flow_structure)\n&nbsp;&nbsp;&nbsp;&nbsp;#print(\&#x27;plantUML:\&#x27;,&nbsp;plantUML)\n\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;entire_code_graph,&nbsp;control_flow_structure,&nbsp;plantUML\n\n```&#x27;}]</td><td>21054</td><td>py2dataset/get_code_graph.py</td></tr><tr><td>[{&#x27;from&#x27;:&nbsp;&#x27;system&#x27;,&nbsp;&#x27;value&#x27;:&nbsp;&#x27;code&nbsp;documentation:&nbsp;1.&nbsp;get_start_dir&nbsp;-&nbsp;Purpose:&nbsp;Returns&nbsp;an&nbsp;appropriate&nbsp;start&nbsp;directory&nbsp;based&nbsp;on&nbsp;user&nbsp;input&nbsp;or&nbsp;defaults&nbsp;to&nbsp;current&nbsp;working&nbsp;directory.&nbsp;It&nbsp;validates&nbsp;if&nbsp;the&nbsp;given&nbsp;path&nbsp;exists&nbsp;or&nbsp;creates&nbsp;it&nbsp;if&nbsp;necessary.\n-&nbsp;Inputs:&nbsp;start_dir&nbsp;(optional&nbsp;string)\n-&nbsp;Calls:&nbsp;Path().is_dir(),&nbsp;Path(),&nbsp;os.getcwd(),&nbsp;os.path.abspath()\n-&nbsp;Variables:&nbsp;start_dir\n-&nbsp;Returns:&nbsp;Absolute&nbsp;path&nbsp;of&nbsp;provided&nbsp;start_dir&nbsp;or&nbsp;current&nbsp;working&nbsp;directory&nbsp;depending&nbsp;on&nbsp;its&nbsp;validity\n\n2.&nbsp;get_output_dir&nbsp;-&nbsp;Purpose:&nbsp;Determines&nbsp;the&nbsp;output&nbsp;directory&nbsp;where&nbsp;files&nbsp;will&nbsp;be&nbsp;saved&nbsp;during&nbsp;program&nbsp;execution.&nbsp;If&nbsp;a&nbsp;specific&nbsp;path&nbsp;is&nbsp;given,&nbsp;it&nbsp;ensures&nbsp;its&nbsp;existence&nbsp;and&nbsp;accessibility.&nbsp;Otherwise&nbsp;defaults&nbsp;to&nbsp;\&#x27;OUTPUT_DIR\&#x27;.\n-&nbsp;Inputs:&nbsp;output_dir&nbsp;(optional&nbsp;string)\n-&nbsp;Calls:&nbsp;os.path.abspath(),&nbsp;os.makedirs(),&nbsp;logging.info()\n-&nbsp;Variables:&nbsp;output_dir\n-&nbsp;Returns:&nbsp;Absolute&nbsp;path&nbsp;of&nbsp;provided&nbsp;output_dir&nbsp;or&nbsp;default&nbsp;OUTPUT_DIR&nbsp;depending&nbsp;on&nbsp;its&nbsp;validity\n\n3.&nbsp;get_questions&nbsp;-&nbsp;Purpose:&nbsp;Retrieves&nbsp;a&nbsp;list&nbsp;of&nbsp;questions&nbsp;from&nbsp;either&nbsp;user-specified&nbsp;file&nbsp;or&nbsp;defaults&nbsp;to&nbsp;hardcoded&nbsp;ones&nbsp;in&nbsp;JSON&nbsp;format.\n-&nbsp;Inputs:&nbsp;questions_pathname&nbsp;(optional&nbsp;string)\n-&nbsp;Calls:&nbsp;os.path.join(),&nbsp;open(),&nbsp;json.load(),&nbsp;logging.info(),&nbsp;get_default_questions()\n-&nbsp;Variables:&nbsp;questions_pathname,&nbsp;questions\n-&nbsp;Returns:&nbsp;Question&nbsp;list&nbsp;in&nbsp;JSON&nbsp;format&nbsp;retrieved&nbsp;from&nbsp;user&nbsp;input&nbsp;file&nbsp;or&nbsp;hardcoded&nbsp;values\n\n4.&nbsp;instantiate_model&nbsp;-&nbsp;Purpose:&nbsp;Instantiates&nbsp;a&nbsp;Language&nbsp;Model&nbsp;using&nbsp;parameters&nbsp;from&nbsp;provided&nbsp;model&nbsp;configuration&nbsp;dictionary&nbsp;and&nbsp;relevant&nbsp;imports.&nbsp;Handles&nbsp;importing&nbsp;the&nbsp;model&nbsp;module/class&nbsp;dynamically.\n-&nbsp;Inputs:&nbsp;model_config&nbsp;(dictionary)\n-&nbsp;Calls:&nbsp;model_config[\&#x27;model_import_path\&#x27;].rsplit(),&nbsp;getattr(),&nbsp;importlib.import_module(),&nbsp;model_params.pop(),&nbsp;logging.info()\n-&nbsp;Variables:&nbsp;ModelClass,&nbsp;inference_function_name,&nbsp;model_params,&nbsp;llm\n-&nbsp;Returns:&nbsp;Instantiated&nbsp;Language&nbsp;Model&nbsp;object&nbsp;or&nbsp;None&nbsp;if&nbsp;error&nbsp;occurs&nbsp;during&nbsp;instantiation\n\n5.&nbsp;get_model&nbsp;-&nbsp;Purpose:&nbsp;Loads&nbsp;a&nbsp;model&nbsp;configuration&nbsp;from&nbsp;user-specified&nbsp;file&nbsp;or&nbsp;defaults&nbsp;to&nbsp;hardcoded&nbsp;values&nbsp;and&nbsp;instantiates&nbsp;the&nbsp;Language&nbsp;Model&nbsp;using&nbsp;it.\n-&nbsp;Inputs:&nbsp;model_config_pathname&nbsp;(optional&nbsp;string)\n-&nbsp;Calls:&nbsp;os.path.join(),&nbsp;open(),&nbsp;yaml.safe_load(),&nbsp;logging.info(),&nbsp;get_default_model_config(),&nbsp;instantiate_model()\n-&nbsp;Variables:&nbsp;model_config_pathname,&nbsp;model_config\n-&nbsp;Returns:&nbsp;Model&nbsp;configuration&nbsp;dictionary&nbsp;with&nbsp;an&nbsp;instantiated&nbsp;Language&nbsp;Model&nbsp;object&nbsp;and&nbsp;prompt&nbsp;template&nbsp;string\n\n6.&nbsp;write_questions_file&nbsp;-&nbsp;Purpose:&nbsp;Writes&nbsp;a&nbsp;file&nbsp;with&nbsp;question&nbsp;definitions&nbsp;stored&nbsp;either&nbsp;as&nbsp;input&nbsp;from&nbsp;a&nbsp;given&nbsp;filepath&nbsp;in&nbsp;JSON&nbsp;format&nbsp;or&nbsp;the&nbsp;hardcoded&nbsp;values&nbsp;default&nbsp;questions_filename&nbsp;variable&nbsp;in&nbsp;Python&nbsp;file&nbsp;named&nbsp;&quot;py2dataset_questions.json&quot;&nbsp;of&nbsp;the&nbsp;same&nbsp;folder,\nindentation&nbsp;being&nbsp;applied&nbsp;as&nbsp;4&nbsp;spaces.\n-&nbsp;Inputs:&nbsp;output_dir&nbsp;(optional&nbsp;string)\n-&nbsp;Calls:&nbsp;get_default_questions(),&nbsp;Path().is_dir(),&nbsp;os.getcwd(),&nbsp;os.path.join(),&nbsp;open(),&nbsp;json.dump()\n-&nbsp;Variables:&nbsp;output_dir,&nbsp;questions\n-&nbsp;Returns:&nbsp;None\n\n7.&nbsp;write_model_config_file&nbsp;-&nbsp;Purpose:&nbsp;Writes&nbsp;model&nbsp;configuration&nbsp;to&nbsp;a&nbsp;file&nbsp;named&nbsp;&quot;py2dataset_model_config.yaml&quot;&nbsp;or&nbsp;default&nbsp;path&nbsp;in&nbsp;Python&nbsp;file&nbsp;with&nbsp;indentation&nbsp;applied&nbsp;as&nbsp;4&nbsp;spaces&nbsp;in&nbsp;YAML&nbsp;format.\n-&nbsp;Inputs:&nbsp;output_dir&nbsp;(optional&nbsp;string)\n-&nbsp;Calls:&nbsp;get_default_model_config(),&nbsp;Path().is_dir(),&nbsp;os.getcwd(),&nbsp;os.path.join(),&nbsp;open(),&nbsp;yaml.dump()\n-&nbsp;Variables:&nbsp;output_dir,&nbsp;model_config\n-&nbsp;Returns:&nbsp;None\n\n8.&nbsp;get_default_questions&nbsp;-&nbsp;Purpose:&nbsp;Provides&nbsp;a&nbsp;predefined&nbsp;list&nbsp;of&nbsp;questions&nbsp;used&nbsp;for&nbsp;software&nbsp;auditing&nbsp;purposes&nbsp;in&nbsp;Python&nbsp;files.\n-&nbsp;Variables:&nbsp;questions&nbsp;(list)\n-&nbsp;Returns:&nbsp;List&nbsp;of&nbsp;default&nbsp;questions&nbsp;as&nbsp;defined&nbsp;constants\n\n9.&nbsp;get_default_model_config&nbsp;-&nbsp;Purpose:&nbsp;Defines&nbsp;the&nbsp;default&nbsp;configuration&nbsp;parameters&nbsp;for&nbsp;the&nbsp;Language&nbsp;Model&nbsp;utilized&nbsp;in&nbsp;the&nbsp;program&nbsp;including&nbsp;its&nbsp;prompt&nbsp;template&nbsp;structure.\n-&nbsp;Variables:&nbsp;model_config&nbsp;(dictionary)\n-&nbsp;Returns:&nbsp;Default&nbsp;model&nbsp;configuration&nbsp;dictionary&#x27;},&nbsp;{&#x27;from&#x27;:&nbsp;&#x27;human&#x27;,&nbsp;&#x27;value&#x27;:&nbsp;&#x27;Output&nbsp;the&nbsp;Python&nbsp;code&nbsp;described&nbsp;by&nbsp;the&nbsp;code&nbsp;documentation.&#x27;},&nbsp;{&#x27;from&#x27;:&nbsp;&#x27;gpt&#x27;,&nbsp;&#x27;value&#x27;:&nbsp;&#x27;```python\n&quot;&quot;&quot;\nObtain&nbsp;data&nbsp;parameter&nbsp;and&nbsp;model&nbsp;from&nbsp;the&nbsp;py2dataset&nbsp;functions.\nRequirements:\n[req01]&nbsp;The&nbsp;`get_default_questions`&nbsp;function&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Return&nbsp;a&nbsp;list&nbsp;of&nbsp;default&nbsp;questions.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Ensure&nbsp;each&nbsp;question&nbsp;in&nbsp;the&nbsp;list&nbsp;is&nbsp;a&nbsp;dictionary.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Ensure&nbsp;each&nbsp;dictionary&nbsp;has&nbsp;the&nbsp;keys:&nbsp;id,&nbsp;text,&nbsp;and&nbsp;type.\n[req02]&nbsp;The&nbsp;`get_default_model_config`&nbsp;function&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Return&nbsp;a&nbsp;dictionary&nbsp;representing&nbsp;the&nbsp;default&nbsp;model&nbsp;configuration.\n[req03]&nbsp;The&nbsp;`get_output_dir`&nbsp;function&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;an&nbsp;optional&nbsp;output_dir&nbsp;argument.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Return&nbsp;the&nbsp;absolute&nbsp;path&nbsp;of&nbsp;the&nbsp;provided&nbsp;output_dir&nbsp;if&nbsp;it&nbsp;exists&nbsp;or&nbsp;can&nbsp;be&nbsp;created.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Return&nbsp;the&nbsp;default&nbsp;OUTPUT_DIR&nbsp;if&nbsp;the&nbsp;provided&nbsp;output_dir&nbsp;argument&nbsp;is&nbsp;not&nbsp;provided&nbsp;or&nbsp;invalid.\n[req04]&nbsp;The&nbsp;`get_questions`&nbsp;function&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;an&nbsp;optional&nbsp;questions_pathname&nbsp;argument.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Validate&nbsp;the&nbsp;question&nbsp;file&nbsp;provided&nbsp;by&nbsp;the&nbsp;questions_pathname.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Return&nbsp;the&nbsp;questions&nbsp;from&nbsp;the&nbsp;provided&nbsp;questions_pathname&nbsp;if&nbsp;valid.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Return&nbsp;default&nbsp;questions&nbsp;if&nbsp;the&nbsp;questions_pathname&nbsp;is&nbsp;not&nbsp;provided&nbsp;or&nbsp;invalid.\n[req05]&nbsp;The&nbsp;`instantiate_model`&nbsp;function&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;a&nbsp;model_config&nbsp;dictionary&nbsp;as&nbsp;an&nbsp;argument.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Import&nbsp;the&nbsp;specified&nbsp;module&nbsp;and&nbsp;class&nbsp;from&nbsp;the&nbsp;model_config.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Instantiate&nbsp;and&nbsp;return&nbsp;the&nbsp;model&nbsp;using&nbsp;the&nbsp;provided&nbsp;configuration.\n[req06]&nbsp;The&nbsp;`get_model`&nbsp;function&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;an&nbsp;optional&nbsp;model_config_pathname&nbsp;argument.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Validate&nbsp;the&nbsp;model&nbsp;config&nbsp;file&nbsp;provided&nbsp;by&nbsp;the&nbsp;model_config_pathname.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Return&nbsp;an&nbsp;instantiated&nbsp;model&nbsp;and&nbsp;a&nbsp;prompt&nbsp;template&nbsp;based&nbsp;on&nbsp;the&nbsp;provided&nbsp;configuration.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Return&nbsp;an&nbsp;instantiated&nbsp;model&nbsp;and&nbsp;a&nbsp;prompt&nbsp;template&nbsp;based&nbsp;on&nbsp;the&nbsp;default&nbsp;model&nbsp;configuration&nbsp;if&nbsp;the&nbsp;model_config_pathname&nbsp;is&nbsp;not&nbsp;provided&nbsp;or&nbsp;invalid.\n[req07]&nbsp;The&nbsp;`write_questions_file`&nbsp;function&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;an&nbsp;optional&nbsp;output_dir&nbsp;argument.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Write&nbsp;the&nbsp;default&nbsp;questions&nbsp;to&nbsp;the&nbsp;QUESTIONS_FILE&nbsp;in&nbsp;the&nbsp;specified&nbsp;directory.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Write&nbsp;the&nbsp;default&nbsp;questions&nbsp;to&nbsp;the&nbsp;QUESTIONS_FILE&nbsp;in&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;if&nbsp;the&nbsp;output_dir&nbsp;argument&nbsp;is&nbsp;not&nbsp;provided&nbsp;or&nbsp;invalid.\n[req08]&nbsp;The&nbsp;`write_model_config_file`&nbsp;function&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;an&nbsp;optional&nbsp;output_dir&nbsp;argument.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Write&nbsp;the&nbsp;default&nbsp;model&nbsp;configuration&nbsp;to&nbsp;the&nbsp;MODEL_CONFIG_FILE&nbsp;in&nbsp;the&nbsp;specified&nbsp;directory.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Write&nbsp;the&nbsp;default&nbsp;model&nbsp;configuration&nbsp;to&nbsp;the&nbsp;MODEL_CONFIG_FILE&nbsp;in&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;if&nbsp;the&nbsp;output_dir&nbsp;argument&nbsp;is&nbsp;not&nbsp;provided&nbsp;or&nbsp;invalid.\n&quot;&quot;&quot;\nimport&nbsp;os\nimport&nbsp;json\nimport&nbsp;logging\nimport&nbsp;importlib\nfrom&nbsp;typing&nbsp;import&nbsp;Dict,&nbsp;List\nfrom&nbsp;pathlib&nbsp;import&nbsp;Path\nimport&nbsp;yaml\n\n#&nbsp;Setting&nbsp;up&nbsp;a&nbsp;basic&nbsp;logger\nlogging.basicConfig(level=logging.INFO)\n\n#&nbsp;defaults&nbsp;if&nbsp;provided&nbsp;inputs&nbsp;fail\nQUESTIONS_FILE&nbsp;=&nbsp;&quot;py2dataset_questions.json&quot;\nMODEL_CONFIG_FILE&nbsp;=&nbsp;&quot;py2dataset_model_config.yaml&quot;\nOUTPUT_DIR&nbsp;=&nbsp;&quot;datasets&quot;\n\n\ndef&nbsp;get_default_questions()&nbsp;-&gt;&nbsp;List[Dict]:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Return&nbsp;default&nbsp;question&nbsp;list\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List[Dict]:&nbsp;The&nbsp;default&nbsp;question&nbsp;list\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;=&nbsp;[\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;id&quot;:&nbsp;&quot;file_dependencies&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;text&quot;:&nbsp;&quot;Dependencies&nbsp;in&nbsp;Python&nbsp;file:&nbsp;`{filename}`?&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;file&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;id&quot;:&nbsp;&quot;entire_code_graph&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;text&quot;:&nbsp;&quot;Call&nbsp;code&nbsp;graph&nbsp;in&nbsp;Python&nbsp;file:&nbsp;`{filename}`?&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;file&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;id&quot;:&nbsp;&quot;file_functions&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;text&quot;:&nbsp;&quot;Functions&nbsp;in&nbsp;Python&nbsp;file:&nbsp;`{filename}`?&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;file&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;id&quot;:&nbsp;&quot;file_classes&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;text&quot;:&nbsp;&quot;Classes&nbsp;in&nbsp;Python&nbsp;file:&nbsp;`{filename}`?&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;file&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;id&quot;:&nbsp;&quot;function_inputs&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;text&quot;:&nbsp;&quot;Inputs&nbsp;to&nbsp;`{function_name}`&nbsp;in&nbsp;Python&nbsp;file:&nbsp;`{filename}`?&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;function&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;id&quot;:&nbsp;&quot;function_docstring&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;text&quot;:&nbsp;&quot;Docstring&nbsp;of&nbsp;`{function_name}`&nbsp;in&nbsp;Python&nbsp;file:&nbsp;`{filename}`?&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;function&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;id&quot;:&nbsp;&quot;function_calls&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;text&quot;:&nbsp;&quot;Calls&nbsp;made&nbsp;in&nbsp;`{function_name}`&nbsp;in&nbsp;Python&nbsp;file:&nbsp;`{filename}`?&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;function&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;id&quot;:&nbsp;&quot;function_variables&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;text&quot;:&nbsp;&quot;Variables&nbsp;in&nbsp;`{function_name}`&nbsp;in&nbsp;Python&nbsp;file:&nbsp;`{filename}`?&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;function&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;id&quot;:&nbsp;&quot;function_returns&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;text&quot;:&nbsp;&quot;Returns&nbsp;from&nbsp;`{function_name}`&nbsp;in&nbsp;Python&nbsp;file:&nbsp;`{filename}`?&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;function&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;id&quot;:&nbsp;&quot;class_methods&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;text&quot;:&nbsp;&quot;Methods&nbsp;in&nbsp;`{class_name}`&nbsp;in&nbsp;Python&nbsp;file:&nbsp;`{filename}`?&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;class&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;id&quot;:&nbsp;&quot;class_docstring&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;text&quot;:&nbsp;&quot;Docstring&nbsp;of&nbsp;`{class_name}`&nbsp;in&nbsp;Python&nbsp;file:&nbsp;`{filename}`?&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;class&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;id&quot;:&nbsp;&quot;class_attributes&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;text&quot;:&nbsp;&quot;Attributes&nbsp;of&nbsp;`{class_name}`&nbsp;in&nbsp;Python&nbsp;file:&nbsp;`{filename}`?&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;class&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;id&quot;:&nbsp;&quot;class_inheritance&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;text&quot;:&nbsp;&quot;Inheritance&nbsp;of&nbsp;`{class_name}`&nbsp;in&nbsp;Python&nbsp;file:&nbsp;`{filename}`?&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;class&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;id&quot;:&nbsp;&quot;method_inputs&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;text&quot;:&nbsp;&quot;Inputs&nbsp;to&nbsp;`{method_name}`&nbsp;in&nbsp;Python&nbsp;file:&nbsp;`{filename}`?&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;method&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;id&quot;:&nbsp;&quot;method_docstring&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;text&quot;:&nbsp;&quot;Docstring&nbsp;of&nbsp;`{method_name}`&nbsp;in&nbsp;Python&nbsp;file:&nbsp;`{filename}`?&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;method&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;id&quot;:&nbsp;&quot;method_calls&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;text&quot;:&nbsp;&quot;Calls&nbsp;made&nbsp;in&nbsp;`{method_name}`&nbsp;in&nbsp;Python&nbsp;file:&nbsp;`{filename}`?&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;method&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;id&quot;:&nbsp;&quot;method_variables&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;text&quot;:&nbsp;&quot;Variables&nbsp;in&nbsp;`{method_name}`&nbsp;in&nbsp;Python&nbsp;file:&nbsp;`{filename}`?&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;method&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;id&quot;:&nbsp;&quot;method_returns&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;text&quot;:&nbsp;&quot;Returns&nbsp;from&nbsp;`{method_name}`&nbsp;in&nbsp;Python&nbsp;file:&nbsp;`{filename}`?&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;method&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;id&quot;:&nbsp;&quot;file_purpose&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;text&quot;:&nbsp;&quot;1)&nbsp;Describe&nbsp;the&nbsp;Purpose&nbsp;and&nbsp;Processing&nbsp;summary&nbsp;of&nbsp;Python&nbsp;file:&nbsp;`{filename}`;&nbsp;2)&nbsp;Summarize&nbsp;the&nbsp;Significance&nbsp;of&nbsp;applicable&nbsp;Function,&nbsp;Class,&nbsp;and&nbsp;Method;&nbsp;3)&nbsp;Explain&nbsp;what&nbsp;each&nbsp;Input,&nbsp;Output,&nbsp;and&nbsp;Variable&nbsp;does&nbsp;in&nbsp;the&nbsp;code.&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;file&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;]\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;questions\n\n\ndef&nbsp;get_default_model_config()&nbsp;-&gt;&nbsp;Dict:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Return&nbsp;default&nbsp;model&nbsp;config&nbsp;dict\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dict:&nbsp;The&nbsp;default&nbsp;model&nbsp;config&nbsp;dictionary\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;model_config&nbsp;=&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;system_prompt&quot;:&nbsp;&quot;Provide&nbsp;complete&nbsp;structured&nbsp;response&nbsp;for&nbsp;a&nbsp;formal&nbsp;software&nbsp;audit,&nbsp;given&nbsp;this&nbsp;Context:\\n\&#x27;{context}\&#x27;\\n&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;instruction_prompt&quot;:&nbsp;&quot;\\nPlease&nbsp;provide&nbsp;a&nbsp;very&nbsp;detailed,&nbsp;accurate,&nbsp;and&nbsp;insightful&nbsp;Response&nbsp;to&nbsp;this&nbsp;Instruction&nbsp;and&nbsp;include&nbsp;your&nbsp;reasoning&nbsp;step&nbsp;by&nbsp;step.\\n{query}\\n&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;prompt_template&quot;:&nbsp;&quot;{system_prompt}&nbsp;###&nbsp;Instruction:&nbsp;{instruction_prompt}&nbsp;###&nbsp;Response:&nbsp;&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;inference_model&quot;:&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;model_import_path&quot;:&nbsp;&quot;ctransformers.AutoModelForCausalLM&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;model_inference_function&quot;:&nbsp;&quot;from_pretrained&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;model_params&quot;:&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;model_path&quot;:&nbsp;&quot;TheBloke/WizardCoder-Python-13B-V1.0-GGUF&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;model_file&quot;:&nbsp;&quot;wizardcoder-python-13b-v1.0.Q5_K_S.gguf&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;model_type&quot;:&nbsp;&quot;llama&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;local_files_only&quot;:&nbsp;False,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;##&nbsp;MODEL&nbsp;CONFIGURATION&nbsp;PARAMETERS&nbsp;(set&nbsp;for&nbsp;current&nbsp;model&nbsp;with:&nbsp;GPU&nbsp;4090-24GB&nbsp;VRAM,&nbsp;CPU&nbsp;5950x-32&nbsp;threads,&nbsp;64GB&nbsp;RAM)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;avx2&nbsp;and&nbsp;gpu_layers&nbsp;are&nbsp;not&nbsp;compatible\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&quot;lib&quot;:&nbsp;&quot;avx2&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;threads&quot;:&nbsp;16,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;batch_size&quot;:&nbsp;128,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;context_length&quot;:&nbsp;12000,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;max_new_tokens&quot;:&nbsp;12000,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;gpu_layers&quot;:&nbsp;100,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;reset&quot;:&nbsp;True,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;model_config\n\n\ndef&nbsp;get_start_dir(start_dir:&nbsp;str&nbsp;=&nbsp;&quot;&quot;)&nbsp;-&gt;&nbsp;str:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Returns&nbsp;the&nbsp;appropriate&nbsp;start&nbsp;directory.\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;(str):&nbsp;The&nbsp;directory&nbsp;to&nbsp;start&nbsp;the&nbsp;search&nbsp;from.\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;absolute&nbsp;path&nbsp;of&nbsp;the&nbsp;provided&nbsp;start_dir&nbsp;if&nbsp;it&nbsp;exists&nbsp;or&nbsp;can&nbsp;be&nbsp;created.\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;start_dir&nbsp;and&nbsp;not&nbsp;Path(start_dir).is_dir():\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&quot;Setting&nbsp;Start&nbsp;Dir&nbsp;:&nbsp;{start_dir}&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;os.getcwd()\n&nbsp;&nbsp;&nbsp;&nbsp;else:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_dir&nbsp;=&nbsp;os.path.abspath(start_dir)\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;start_dir\n\n\ndef&nbsp;get_output_dir(output_dir:&nbsp;str&nbsp;=&nbsp;&quot;&quot;)&nbsp;-&gt;&nbsp;str:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Returns&nbsp;the&nbsp;appropriate&nbsp;output&nbsp;directory.\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str):&nbsp;The&nbsp;directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;to.\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;absolute&nbsp;path&nbsp;of&nbsp;the&nbsp;provided&nbsp;output_dir&nbsp;if&nbsp;it&nbsp;exists&nbsp;or&nbsp;can&nbsp;be&nbsp;created.\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;os.path.abspath(output_dir&nbsp;or&nbsp;OUTPUT_DIR)\n&nbsp;&nbsp;&nbsp;&nbsp;os.makedirs(output_dir,&nbsp;exist_ok=True)\n&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&quot;Using&nbsp;output&nbsp;directory:&nbsp;{output_dir}&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;output_dir\n\n\ndef&nbsp;get_questions(questions_pathname:&nbsp;str)&nbsp;-&gt;&nbsp;List[Dict]:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;questions&nbsp;from&nbsp;file&nbsp;or&nbsp;default\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;(str):&nbsp;The&nbsp;pathname&nbsp;of&nbsp;the&nbsp;questions&nbsp;file\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List[Dict]:&nbsp;The&nbsp;list&nbsp;of&nbsp;questions\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;try:&nbsp;&nbsp;#&nbsp;get&nbsp;questions&nbsp;from&nbsp;provided&nbsp;or&nbsp;default&nbsp;configuration&nbsp;file\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;questions_pathname:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;=&nbsp;os.path.join(os.getcwd(),&nbsp;QUESTIONS_FILE)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;open(questions_pathname,&nbsp;&quot;r&quot;)&nbsp;as&nbsp;f:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;=&nbsp;json.load(f)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&quot;Using&nbsp;questions&nbsp;from&nbsp;file:&nbsp;{questions_pathname}&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;(FileNotFoundError,&nbsp;json.decoder.JSONDecodeError):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f&quot;Questions&nbsp;file&nbsp;not&nbsp;valid:&nbsp;{questions_pathname}&nbsp;Using&nbsp;default&nbsp;questions&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;=&nbsp;get_default_questions()\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;questions\n\n\ndef&nbsp;instantiate_model(model_config:&nbsp;Dict)&nbsp;-&gt;&nbsp;object:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Imports&nbsp;and&nbsp;instantiates&nbsp;a&nbsp;model&nbsp;based&nbsp;on&nbsp;the&nbsp;provided&nbsp;configuration.\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config&nbsp;(dict):&nbsp;model&nbsp;configuration&nbsp;dictionary.\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;object:&nbsp;An&nbsp;instance&nbsp;of&nbsp;the&nbsp;specified&nbsp;model&nbsp;class,&nbsp;or&nbsp;None&nbsp;if&nbsp;error.\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;try:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;module_name,&nbsp;class_name&nbsp;=&nbsp;model_config[&quot;model_import_path&quot;].rsplit(&quot;.&quot;,&nbsp;1)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ModelClass&nbsp;=&nbsp;getattr(importlib.import_module(module_name),&nbsp;class_name)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_params&nbsp;=&nbsp;model_config[&quot;model_params&quot;]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inference_function_name&nbsp;=&nbsp;model_config[&quot;model_inference_function&quot;]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;inference_function_name&nbsp;!=&nbsp;&quot;&quot;:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inference_function&nbsp;=&nbsp;getattr(ModelClass,&nbsp;inference_function_name)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;=&nbsp;inference_function(model_params.pop(&quot;model_path&quot;),&nbsp;**model_params)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;=&nbsp;ModelClass(model_params.pop(&quot;model_path&quot;),&nbsp;**model_params)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;llm\n&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;(ImportError,&nbsp;AttributeError,&nbsp;Exception)&nbsp;as&nbsp;e:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&quot;Failed&nbsp;to&nbsp;instantiate&nbsp;the&nbsp;model.&nbsp;Error:&nbsp;{e}&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None\n\n\ndef&nbsp;get_model(model_config_pathname:&nbsp;str)&nbsp;-&gt;&nbsp;object:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Returns&nbsp;an&nbsp;instantiated&nbsp;model&nbsp;and&nbsp;prompt&nbsp;template&nbsp;based&nbsp;on&nbsp;the&nbsp;model&nbsp;configuration.\n&nbsp;&nbsp;&nbsp;&nbsp;Agrs:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str):&nbsp;The&nbsp;pathname&nbsp;of&nbsp;the&nbsp;model&nbsp;config&nbsp;file\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[object,&nbsp;str]:&nbsp;The&nbsp;instantiated&nbsp;model\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;try:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;model_config_pathname:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;=&nbsp;os.path.join(os.getcwd(),&nbsp;MODEL_CONFIG_FILE)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;open(model_config_pathname,&nbsp;&quot;r&quot;)&nbsp;as&nbsp;config_file:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config&nbsp;=&nbsp;yaml.safe_load(config_file)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&quot;Using&nbsp;model&nbsp;config&nbsp;from&nbsp;file:&nbsp;{model_config_pathname}&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;(FileNotFoundError,&nbsp;yaml.YAMLError):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f&quot;Model&nbsp;config&nbsp;file&nbsp;not&nbsp;valid:&nbsp;{model_config_pathname}&nbsp;Using&nbsp;default&nbsp;model&nbsp;config&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config&nbsp;=&nbsp;get_default_model_config()\n&nbsp;&nbsp;&nbsp;&nbsp;model_config[&quot;model&quot;]&nbsp;=&nbsp;instantiate_model(model_config[&quot;inference_model&quot;])\n\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;model_config\n\n\ndef&nbsp;write_questions_file(output_dir:&nbsp;str&nbsp;=&nbsp;&quot;&quot;)&nbsp;-&gt;&nbsp;None:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Writes&nbsp;the&nbsp;default&nbsp;questions&nbsp;to&nbsp;a&nbsp;file&nbsp;in&nbsp;JSON&nbsp;format.\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str):&nbsp;The&nbsp;directory&nbsp;to&nbsp;write&nbsp;the&nbsp;questions&nbsp;file&nbsp;to.\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;=&nbsp;get_default_questions()\n&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;output_dir&nbsp;if&nbsp;output_dir&nbsp;and&nbsp;Path(output_dir).is_dir()&nbsp;else&nbsp;os.getcwd()\n&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;open(os.path.join(output_dir,&nbsp;QUESTIONS_FILE),&nbsp;&quot;w&quot;)&nbsp;as&nbsp;file:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;json.dump(questions,&nbsp;file,&nbsp;indent=4)\n\n\ndef&nbsp;write_model_config_file(output_dir:&nbsp;str&nbsp;=&nbsp;&quot;&quot;)&nbsp;-&gt;&nbsp;None:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Writes&nbsp;the&nbsp;default&nbsp;model&nbsp;config&nbsp;to&nbsp;a&nbsp;file&nbsp;in&nbsp;YAML&nbsp;format.\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str):&nbsp;The&nbsp;directory&nbsp;to&nbsp;write&nbsp;the&nbsp;model&nbsp;config&nbsp;file&nbsp;to.\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;model_config&nbsp;=&nbsp;get_default_model_config()\n&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;=&nbsp;output_dir&nbsp;if&nbsp;output_dir&nbsp;and&nbsp;Path(output_dir).is_dir()&nbsp;else&nbsp;os.getcwd()\n&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;open(os.path.join(output_dir,&nbsp;MODEL_CONFIG_FILE),&nbsp;&quot;w&quot;)&nbsp;as&nbsp;file:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yaml.dump(model_config,&nbsp;file)\n\n```&#x27;}]</td><td>16426</td><td>py2dataset/get_params.py</td></tr><tr><td>[{&#x27;from&#x27;:&nbsp;&#x27;system&#x27;,&nbsp;&#x27;value&#x27;:&nbsp;&quot;code&nbsp;documentation:&nbsp;1.&nbsp;Overall&nbsp;Purpose&nbsp;and&nbsp;Processing&nbsp;Approach&nbsp;of&nbsp;Python&nbsp;file:&nbsp;&#x27;get_python_datasets.py&#x27;&nbsp;File&nbsp;primarily&nbsp;aims&nbsp;at&nbsp;extracting&nbsp;structured&nbsp;JSON&nbsp;format&nbsp;question-answer&nbsp;pairs&nbsp;for&nbsp;given&nbsp;input&nbsp;Python&nbsp;files&nbsp;using&nbsp;a&nbsp;provided&nbsp;dataset&nbsp;generator&nbsp;class&nbsp;named&nbsp;DatasetGenerator.&nbsp;It&nbsp;accepts&nbsp;various&nbsp;inputs&nbsp;such&nbsp;as&nbsp;Python&nbsp;file&nbsp;path,&nbsp;file&nbsp;details&nbsp;dictionary,&nbsp;base&nbsp;name&nbsp;of&nbsp;the&nbsp;Python&nbsp;file,&nbsp;list&nbsp;of&nbsp;questions,&nbsp;and&nbsp;model&nbsp;configuration&nbsp;to&nbsp;generate&nbsp;instruct_list&nbsp;containing&nbsp;instructions&nbsp;related&nbsp;to&nbsp;diverse&nbsp;aspects&nbsp;of&nbsp;the&nbsp;Python&nbsp;code.&nbsp;The&nbsp;function&nbsp;utilizes&nbsp;other&nbsp;methods&nbsp;within&nbsp;DatasetGenerator&nbsp;class&nbsp;for&nbsp;processing&nbsp;different&nbsp;types&nbsp;of&nbsp;queries&nbsp;like&nbsp;file&nbsp;details,&nbsp;functions,&nbsp;classes,&nbsp;methods,&nbsp;etc.,&nbsp;ultimately&nbsp;returning&nbsp;a&nbsp;tuple&nbsp;containing&nbsp;extracted&nbsp;information&nbsp;in&nbsp;JSON&nbsp;format.\n\n2.&nbsp;API&nbsp;Signatures:\n-&nbsp;clean_and_get_unique_elements(input_str):&nbsp;Cleans&nbsp;an&nbsp;input&nbsp;string&nbsp;by&nbsp;removing&nbsp;extra&nbsp;characters&nbsp;and&nbsp;returns&nbsp;a&nbsp;string&nbsp;with&nbsp;unique&nbsp;elements.&nbsp;It&nbsp;calls&nbsp;various&nbsp;built-in&nbsp;functions&nbsp;like&nbsp;&#x27;enumerate&#x27;,&nbsp;&#x27;strip&#x27;,&nbsp;&#x27;join&#x27;&nbsp;etc.,&nbsp;uses&nbsp;variables&nbsp;such&nbsp;as&nbsp;&#x27;cleaned_elements&#x27;,&nbsp;&#x27;start&#x27;,&nbsp;&#x27;returned_elements&#x27;.\n-&nbsp;get_python_datasets(file_path,&nbsp;file_details,&nbsp;base_name,&nbsp;questions,&nbsp;model_config,&nbsp;detailed):&nbsp;Accepts&nbsp;inputs&nbsp;related&nbsp;to&nbsp;Python&nbsp;file&nbsp;path,&nbsp;file&nbsp;details&nbsp;dictionary,&nbsp;list&nbsp;of&nbsp;questions,&nbsp;model&nbsp;configuration,&nbsp;and&nbsp;a&nbsp;boolean&nbsp;flag&nbsp;for&nbsp;detailed&nbsp;information&nbsp;extraction.&nbsp;It&nbsp;instantiates&nbsp;DatasetGenerator&nbsp;class&nbsp;using&nbsp;provided&nbsp;inputs,&nbsp;calls&nbsp;its&nbsp;generate&nbsp;method,&nbsp;and&nbsp;returns&nbsp;extracted&nbsp;data&nbsp;as&nbsp;a&nbsp;tuple&nbsp;containing&nbsp;instruct_list&nbsp;generated&nbsp;by&nbsp;DatasetGenerator&nbsp;instance.\n-&nbsp;DatasetGenerator(__init__):&nbsp;Initializes&nbsp;the&nbsp;DatasetGenerator&nbsp;class&nbsp;with&nbsp;attributes&nbsp;like&nbsp;file&nbsp;path,&nbsp;file&nbsp;details&nbsp;dictionary,&nbsp;list&nbsp;of&nbsp;questions,&nbsp;model&nbsp;configuration&nbsp;etc.,&nbsp;initializing&nbsp;variables&nbsp;such&nbsp;as&nbsp;llm&nbsp;flag,&nbsp;detailed&nbsp;flag,&nbsp;question&nbsp;mapping,&nbsp;code_qa_list,&nbsp;code_qa_response.&nbsp;It&nbsp;also&nbsp;defines&nbsp;methods&nbsp;like&nbsp;get_response_from_llm(),&nbsp;get_code_qa(),&nbsp;process_question(),&nbsp;get_info_string(),&nbsp;process_question_type()&nbsp;and&nbsp;generate().\n-&nbsp;DatasetGenerator.get_response_from_llm(query,&nbsp;context):&nbsp;This&nbsp;method&nbsp;queries&nbsp;a&nbsp;language&nbsp;model&nbsp;with&nbsp;the&nbsp;given&nbsp;context&nbsp;to&nbsp;produce&nbsp;response&nbsp;considering&nbsp;tokenized&nbsp;limits&nbsp;from&nbsp;config&nbsp;parameters,&nbsp;processes&nbsp;excluded&nbsp;instructions&nbsp;(&#x27;Call&nbsp;code&nbsp;graph&#x27;/&#x27;Docstring&#x27;)&nbsp;while&nbsp;creating&nbsp;response&nbsp;using&nbsp;various&nbsp;function&nbsp;calls&nbsp;such&nbsp;as&nbsp;&#x27;str&#x27;,&nbsp;&#x27;enumerate&#x27;,&nbsp;&#x27;self.model_config[&#x27;prompt_template&#x27;],&nbsp;&#x27;self.llm&#x27;,&nbsp;&#x27;logging&#x27;.&nbsp;It&nbsp;also&nbsp;uses&nbsp;variables&nbsp;like&nbsp;query,&nbsp;context,&nbsp;response,&nbsp;context_size,&nbsp;prompt_template,&nbsp;err_msg,&nbsp;instruction_prompt,&nbsp;code_objects_responses&nbsp;etc.\n-&nbsp;DatasetGenerator.get_code_qa():&nbsp;Gathers&nbsp;code&nbsp;responses&nbsp;from&nbsp;instruct_list&nbsp;and&nbsp;updates&nbsp;code_qa_list&nbsp;and&nbsp;code_qa_response&nbsp;variables&nbsp;by&nbsp;iterating&nbsp;through&nbsp;excluded&nbsp;instructions&nbsp;and&nbsp;code&nbsp;objects&nbsp;responses.\n-&nbsp;DatasetGenerator.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info):&nbsp;Processes&nbsp;questions&nbsp;related&nbsp;to&nbsp;file,&nbsp;function,&nbsp;class&nbsp;or&nbsp;method&nbsp;types&nbsp;using&nbsp;process_question_type()&nbsp;method&nbsp;with&nbsp;appropriate&nbsp;inputs&nbsp;for&nbsp;each&nbsp;type.&nbsp;It&nbsp;calls&nbsp;methods&nbsp;like&nbsp;process_question_type(),&nbsp;&#x27;info.get&#x27;,&nbsp;get_response_from_llm(),&nbsp;clean_and_get_unique_elements(&#x27;str&#x27;)&nbsp;and&nbsp;adds&nbsp;processed&nbsp;query&nbsp;results&nbsp;into&nbsp;instruct_list&nbsp;in&nbsp;order&nbsp;sorted&nbsp;by&nbsp;input&nbsp;size&nbsp;using&nbsp;variable&nbsp;&#x27;self&#x27;,&nbsp;&#x27;self&#x27;&nbsp;respectively.\n-&nbsp;DatasetGenerator.get_info_string(info,&nbsp;item_type):&nbsp;Returns&nbsp;a&nbsp;string&nbsp;from&nbsp;info&nbsp;dictionary&nbsp;based&nbsp;on&nbsp;given&nbsp;item&nbsp;type&nbsp;using&nbsp;calls&nbsp;like&nbsp;&#x27;.join&#x27;,&nbsp;&#x27;item.strip&#x27;,&nbsp;&#x27;str(info.get)&#x27;,&nbsp;&#x27;info.get&#x27;.&nbsp;It&nbsp;uses&nbsp;variables&nbsp;such&nbsp;as&nbsp;&#x27;info&#x27;,&nbsp;&#x27;item_type&#x27;.\n-&nbsp;DatasetGenerator.process_question_type(question_type,&nbsp;question_id,&nbsp;question_text):&nbsp;Processes&nbsp;questions&nbsp;related&nbsp;to&nbsp;file,&nbsp;method&nbsp;or&nbsp;class&nbsp;instances&nbsp;based&nbsp;on&nbsp;the&nbsp;question&nbsp;type&nbsp;with&nbsp;respective&nbsp;input&nbsp;splitting&nbsp;and&nbsp;formatting&nbsp;operations&nbsp;using&nbsp;query&nbsp;parameters&nbsp;like&nbsp;&#x27;self&#x27;,&nbsp;&#x27;info&#x27;,&nbsp;&#x27;context&#x27;,&nbsp;&#x27;output&#x27;,&nbsp;&#x27;item_response&#x27;.&nbsp;It&nbsp;calls&nbsp;get_info_string(),&nbsp;element&nbsp;generator&nbsp;methods&nbsp;and&nbsp;string&nbsp;manipulation&nbsp;functions.\n-&nbsp;DatasetGenerator.generate():&nbsp;Generates&nbsp;responses&nbsp;for&nbsp;all&nbsp;questions&nbsp;in&nbsp;the&nbsp;list,&nbsp;sorts&nbsp;instruct_list&nbsp;by&nbsp;input&nbsp;size&nbsp;length,&nbsp;and&nbsp;returns&nbsp;it&nbsp;as&nbsp;a&nbsp;tuple&nbsp;containing&nbsp;extracted&nbsp;information&nbsp;in&nbsp;JSON&nbsp;format&nbsp;using&nbsp;variables&nbsp;like&nbsp;&#x27;self&#x27;.\n\n3.&nbsp;Functional&nbsp;Requirements:\n-&nbsp;clean_and_get_unique_elements()&nbsp;removes&nbsp;extra&nbsp;characters&nbsp;from&nbsp;input&nbsp;string&nbsp;to&nbsp;obtain&nbsp;unique&nbsp;elements&nbsp;stored&nbsp;in&nbsp;returned_elements&nbsp;variable.\n-&nbsp;get_python_datasets()&nbsp;returns&nbsp;information&nbsp;as&nbsp;tuple&nbsp;following&nbsp;datasetGenerator&nbsp;generation&nbsp;via&nbsp;necessary&nbsp;methods/input&nbsp;utilization&nbsp;detailed&nbsp;before&nbsp;instantiation&nbsp;(mentioned&nbsp;previously).&nbsp;It&nbsp;deals&nbsp;with&nbsp;high&nbsp;level&nbsp;implementation&nbsp;incorporating&nbsp;input&nbsp;datums&nbsp;within&nbsp;specified&nbsp;requirements&nbsp;(path,&nbsp;details&nbsp;of&nbsp;the&nbsp;Python&nbsp;file,&nbsp;list&nbsp;of&nbsp;questions&nbsp;and&nbsp;configuration&nbsp;settings).\n-&nbsp;DatasetGenerator()&nbsp;instantiates&nbsp;object&nbsp;of&nbsp;this&nbsp;class&nbsp;for&nbsp;querying&nbsp;model&nbsp;responses&nbsp;with&nbsp;configurable&nbsp;language&nbsp;models&nbsp;or&nbsp;no&nbsp;LLM&nbsp;usage&nbsp;depending&nbsp;on&nbsp;input&nbsp;availability.\n-&nbsp;get_response_from_llm()&nbsp;retrieves&nbsp;LLM&nbsp;response&nbsp;considering&nbsp;context&nbsp;size&nbsp;limitations&nbsp;while&nbsp;handling&nbsp;exceptions&nbsp;using&nbsp;logging&nbsp;mechanism.&nbsp;It&nbsp;manipulates&nbsp;prompts&nbsp;and&nbsp;queries&nbsp;to&nbsp;generate&nbsp;desired&nbsp;output&nbsp;stored&nbsp;in&nbsp;&#x27;response&#x27;.\n-&nbsp;get_code_qa()&nbsp;organizes&nbsp;code&nbsp;question-answer&nbsp;pairs&nbsp;within&nbsp;DatasetGenerator&nbsp;object&nbsp;after&nbsp;iterating&nbsp;over&nbsp;instruct_list&nbsp;for&nbsp;necessary&nbsp;variables/classes,&nbsp;methods&nbsp;information.\n-&nbsp;process_question()&nbsp;manages&nbsp;distinct&nbsp;types&nbsp;of&nbsp;questions&nbsp;using&nbsp;corresponding&nbsp;method&nbsp;invocations,&nbsp;updates&nbsp;instruct_list&nbsp;with&nbsp;processed&nbsp;query&nbsp;results&nbsp;in&nbsp;sorted&nbsp;order.\n-&nbsp;get_info_string()&nbsp;extracts&nbsp;string&nbsp;data&nbsp;from&nbsp;info&nbsp;dictionary&nbsp;based&nbsp;on&nbsp;item&nbsp;type&nbsp;by&nbsp;joining&nbsp;unique&nbsp;elements&nbsp;and&nbsp;stripping&nbsp;whitespaces.\n-&nbsp;process_question_type()&nbsp;tackles&nbsp;various&nbsp;query&nbsp;types&nbsp;concerning&nbsp;Python&nbsp;files&nbsp;(&#x27;file&#x27;,&nbsp;&#x27;method&#x27;&nbsp;or&nbsp;&#x27;function&#x27;),&nbsp;uses&nbsp;formatted&nbsp;prompts/templates&nbsp;with&nbsp;class&nbsp;related&nbsp;data&nbsp;handling&nbsp;within&nbsp;method&nbsp;calls&nbsp;as&nbsp;needed&nbsp;variables&nbsp;(&#x27;query&#x27;,&nbsp;&#x27;info&#x27;).\n-&nbsp;generate()&nbsp;generates&nbsp;responses&nbsp;for&nbsp;all&nbsp;questions&nbsp;and&nbsp;returns&nbsp;instruct_list&nbsp;containing&nbsp;JSON&nbsp;format&nbsp;information&nbsp;after&nbsp;processing&nbsp;each&nbsp;question.\n\n4.&nbsp;Variables&nbsp;Description:\n-&nbsp;clean_and_get_unique_elements():&nbsp;&#x27;input_str&#x27;,&nbsp;&#x27;cleaned_elements&#x27;,&nbsp;&#x27;start&#x27;,&nbsp;&#x27;returned_elements&#x27;.\n-&nbsp;get_python_datasets():&nbsp;&#x27;file_path&#x27;,&nbsp;&#x27;file_details&#x27;,&nbsp;&#x27;base_name&#x27;,&nbsp;&#x27;questions&#x27;,&nbsp;&#x27;model_config&#x27;,&nbsp;&#x27;detailed&#x27;&nbsp;,generated&nbsp;instructions(output&nbsp;tuples/list/list)&nbsp;-&nbsp;&#x27;dataset_Generator&nbsp;Instance&nbsp;Method&nbsp;calls&nbsp;result&nbsp;&#x27;.\n-&nbsp;DatasetGenerator(__init__):&nbsp;&#x27;llm&#x27;,&#x27;questions&#x27;,&#x27;code_qa_list&#x27;,&#x27;code_qa_response&#x27;,&nbsp;&#x27;question_mapping&#x27;,&nbsp;&#x27;use_llm&#x27;,&nbsp;&#x27;detailed&#x27;,&nbsp;&#x27;code_qa_list&#x27;,&nbsp;&#x27;code_qa_response&#x27;.\n-&nbsp;get_response_from_llm():&nbsp;&#x27;context_strategies&#x27;,&nbsp;&#x27;context_size&#x27;,&nbsp;&#x27;prompt_template&#x27;,&nbsp;&#x27;context&#x27;,&nbsp;&#x27;query&#x27;,&nbsp;&#x27;context_length&#x27;,&nbsp;&#x27;error_msg&#x27;,&nbsp;&#x27;context_size&#x27;,&nbsp;&#x27;context&#x27;,&nbsp;&#x27;query&#x27;,&nbsp;&#x27;item&#x27;,&nbsp;&#x27;instruct_key&#x27;,&nbsp;&#x27;instruction&#x27;,&nbsp;&#x27;response&#x27;,&nbsp;&#x27;output&#x27;.\n-&nbsp;DatasetGenerator.get_code_qa():&nbsp;&#x27;self&#x27;,&#x27;code_object&#x27;,&nbsp;&#x27;code_type&#x27;,&nbsp;&#x27;excluded_instructions&#x27;,&nbsp;&#x27;output&#x27;,&nbsp;&#x27;instruction&#x27;,&nbsp;&#x27;code_objects_responses&#x27;,&nbsp;&#x27;start&#x27;,&nbsp;&#x27;enumerate&#x27;,&nbsp;&#x27;subidx&#x27;,&nbsp;&#x27;mapping&#x27;,&nbsp;&#x27;item&#x27;,&nbsp;&#x27;instruction&#x27;.\n-&nbsp;DatasetGenerator.process_question():&nbsp;&#x27;self&#x27;,&#x27;info&#x27;,&nbsp;&#x27;query&#x27;,&nbsp;&#x27;context&#x27;,&nbsp;&#x27;response&#x27;,&nbsp;&#x27;question_type&#x27;,&nbsp;&#x27;question_id&#x27;,&nbsp;&#x27;combined&#x27;,&nbsp;&#x27;variables&#x27;,&nbsp;&#x27;inputs&#x27;,&nbsp;&#x27;methods_string&#x27;.\n-&nbsp;get_info_string():&nbsp;&#x27;info&#x27;,&nbsp;&#x27;item_type&#x27;,&nbsp;&#x27;item&#x27;.\n-&nbsp;DatasetGenerator.process_question_type():&nbsp;&#x27;self&#x27;,&#x27;query&#x27;,&nbsp;&#x27;context&#x27;,&nbsp;&#x27;info&#x27;,&nbsp;&#x27;class_name&#x27;,&nbsp;&#x27;method_name&#x27;,&nbsp;&#x27;mapping&#x27;,&nbsp;&#x27;inputs&#x27;,&#x27;variables&#x27;,&#x27;context&#x27;,&#x27;methods_string&#x27;.\n-&nbsp;getCodeQAGenerate()&nbsp;has&nbsp;internal&nbsp;instances&nbsp;calls&nbsp;relating&nbsp;to&nbsp;attributes&nbsp;named&nbsp;here(variables:&nbsp;file&nbsp;path,&nbsp;detail&nbsp;object&nbsp;specific&nbsp;variables),&nbsp;used&nbsp;as&nbsp;process&nbsp;function&nbsp;of&nbsp;DatasetGenerator&nbsp;class.&quot;},&nbsp;{&#x27;from&#x27;:&nbsp;&#x27;human&#x27;,&nbsp;&#x27;value&#x27;:&nbsp;&#x27;Output&nbsp;the&nbsp;Python&nbsp;code&nbsp;described&nbsp;by&nbsp;the&nbsp;code&nbsp;documentation.&#x27;},&nbsp;{&#x27;from&#x27;:&nbsp;&#x27;gpt&#x27;,&nbsp;&#x27;value&#x27;:&nbsp;&#x27;```python\n&quot;&quot;&quot;\nGenerates&nbsp;JSON&nbsp;format&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions&nbsp;for&nbsp;a&nbsp;Python&nbsp;file\nRequirements:\n[req01]&nbsp;The&nbsp;`DatasetGenerator`&nbsp;class&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;Python&nbsp;file&nbsp;path,&nbsp;file&nbsp;details,&nbsp;base&nbsp;name,&nbsp;list&nbsp;of&nbsp;questions,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;model&nbsp;configuration&nbsp;as&nbsp;input&nbsp;during&nbsp;instantiation.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Initialize&nbsp;and&nbsp;store&nbsp;Python&nbsp;file&nbsp;path,&nbsp;file&nbsp;details,&nbsp;base&nbsp;name,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question&nbsp;list,&nbsp;llm,&nbsp;and&nbsp;use_llm&nbsp;flag&nbsp;as&nbsp;class&nbsp;attributes.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Provide&nbsp;`get_response_from_llm`&nbsp;method&nbsp;to&nbsp;retrieve&nbsp;llm&nbsp;response.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.&nbsp;Provide&nbsp;`process_question`&nbsp;method&nbsp;to&nbsp;process&nbsp;each&nbsp;question,&nbsp;generate\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;corresponding&nbsp;responses,&nbsp;and&nbsp;add&nbsp;to&nbsp;the&nbsp;instruct_list.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f.&nbsp;Provide&nbsp;`process_question_type`&nbsp;method&nbsp;to&nbsp;process&nbsp;questions\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;related&nbsp;to&nbsp;the&nbsp;file,&nbsp;functions,&nbsp;classes,&nbsp;and&nbsp;methods.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.&nbsp;Provide&nbsp;`generate`&nbsp;method&nbsp;to&nbsp;generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;questions\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;return&nbsp;the&nbsp;instruct_list.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h.&nbsp;Internally&nbsp;manage&nbsp;question&nbsp;mapping&nbsp;to&nbsp;file&nbsp;details.\n[req02]&nbsp;The&nbsp;`get_python_datasets`&nbsp;function&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;a&nbsp;Python&nbsp;file&nbsp;path,&nbsp;file&nbsp;details,&nbsp;base&nbsp;name,&nbsp;questions&nbsp;list,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;model&nbsp;config&nbsp;as&nbsp;input.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Instantiate&nbsp;`DatasetGenerator`&nbsp;class&nbsp;using&nbsp;the&nbsp;provided&nbsp;input.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Generate&nbsp;instruct_list&nbsp;using&nbsp;`DatasetGenerator`&nbsp;`generate`&nbsp;method.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Return&nbsp;the&nbsp;generated&nbsp;`instruct_list`.\n[req03]&nbsp;The&nbsp;`clean_and_get_unique_elements`&nbsp;function&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Clean&nbsp;an&nbsp;input&nbsp;string&nbsp;(str)&nbsp;and&nbsp;return&nbsp;a&nbsp;string&nbsp;of&nbsp;unique&nbsp;elements.\n&quot;&quot;&quot;\nimport&nbsp;logging\nimport&nbsp;re\nimport&nbsp;math\nfrom&nbsp;typing&nbsp;import&nbsp;Dict,&nbsp;List,&nbsp;Tuple\n\n\ndef&nbsp;clean_and_get_unique_elements(input_str:&nbsp;str)&nbsp;-&gt;&nbsp;str:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Clean&nbsp;an&nbsp;input&nbsp;string&nbsp;(str)&nbsp;and&nbsp;return&nbsp;a&nbsp;string&nbsp;of&nbsp;unique&nbsp;elements.\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;input_str&nbsp;(str):&nbsp;The&nbsp;input&nbsp;string&nbsp;to&nbsp;be&nbsp;cleaned.\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;cleaned&nbsp;string.\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n\n&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;element_generator(input_str):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start,&nbsp;brace_level&nbsp;=&nbsp;0,&nbsp;0\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i,&nbsp;char&nbsp;in&nbsp;enumerate(input_str):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;char&nbsp;in&nbsp;&quot;{}&quot;:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;brace_level&nbsp;+=&nbsp;1&nbsp;if&nbsp;char&nbsp;==&nbsp;&quot;{&quot;&nbsp;else&nbsp;-1\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;char&nbsp;==&nbsp;&quot;,&quot;&nbsp;and&nbsp;brace_level&nbsp;==&nbsp;0:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yield&nbsp;input_str[start:i]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start&nbsp;=&nbsp;i&nbsp;+&nbsp;1\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yield&nbsp;input_str[start:]\n\n&nbsp;&nbsp;&nbsp;&nbsp;input_str&nbsp;=&nbsp;input_str.strip(&quot;[]\&#x27;\\&quot;&quot;).strip()\n&nbsp;&nbsp;&nbsp;&nbsp;cleaned_elements&nbsp;=&nbsp;[\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element.strip(&quot;\&#x27;\\&quot;&nbsp;&quot;).strip()\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;element&nbsp;in&nbsp;element_generator(input_str)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;element.strip()\n&nbsp;&nbsp;&nbsp;&nbsp;]\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;add&nbsp;a&nbsp;\&#x27;&nbsp;\&#x27;&nbsp;around&nbsp;each&nbsp;element\n&nbsp;&nbsp;&nbsp;&nbsp;cleaned_elements&nbsp;=&nbsp;[f&quot;\&#x27;{element}\&#x27;&quot;&nbsp;for&nbsp;element&nbsp;in&nbsp;cleaned_elements]\n&nbsp;&nbsp;&nbsp;&nbsp;returned_elements&nbsp;=&nbsp;&quot;,&nbsp;&quot;.join(cleaned_elements)\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;returned_elements\n\n\nclass&nbsp;DatasetGenerator:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;JSON&nbsp;formatted&nbsp;dictionary&nbsp;outputs&nbsp;for&nbsp;a&nbsp;Python&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;Attributes:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict[str,&nbsp;Any]):&nbsp;Details&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;name&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict[str,&nbsp;str]]):&nbsp;Questions&nbsp;for&nbsp;generating&nbsp;responses.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;(List[Dict[str,&nbsp;str]]):&nbsp;Storage&nbsp;for&nbsp;generated&nbsp;instructions.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_mapping&nbsp;(Dict[str,&nbsp;str]):&nbsp;Mapping&nbsp;of&nbsp;question&nbsp;types&nbsp;to&nbsp;keys&nbsp;in&nbsp;file&nbsp;details.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;Flag&nbsp;indicating&nbsp;if&nbsp;a&nbsp;language&nbsp;model&nbsp;should&nbsp;be&nbsp;used.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;(object):&nbsp;The&nbsp;language&nbsp;model&nbsp;for&nbsp;generating&nbsp;responses.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str):&nbsp;The&nbsp;prompt&nbsp;format&nbsp;for&nbsp;querying&nbsp;the&nbsp;language&nbsp;model.\n&nbsp;&nbsp;&nbsp;&nbsp;Methods:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_response_from_llm(query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_question(question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str,&nbsp;info:&nbsp;Dict)&nbsp;-&gt;&nbsp;None:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;and&nbsp;add&nbsp;the&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_info_string(info,&nbsp;item_type)&nbsp;-&gt;&nbsp;str:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;string&nbsp;from&nbsp;info&nbsp;dictionary.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_question_type(question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;question_text:&nbsp;str)&nbsp;-&gt;&nbsp;None:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;questions&nbsp;related&nbsp;to&nbsp;a&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generate()&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;returns&nbsp;the&nbsp;instruct_list.\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n\n&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path:&nbsp;str,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details:&nbsp;Dict,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name:&nbsp;str,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions:&nbsp;List[Dict],\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config:&nbsp;Dict,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;detailed:&nbsp;bool,\n&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;-&gt;&nbsp;None:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Initialize&nbsp;the&nbsp;DatasetGenerator&nbsp;class.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict[str,&nbsp;Any]):&nbsp;Details&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;name&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict[str,&nbsp;str]]):&nbsp;Questions&nbsp;for&nbsp;generating&nbsp;responses.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config&nbsp;(Dict):&nbsp;Configuration&nbsp;for&nbsp;the&nbsp;language&nbsp;model.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.file_path&nbsp;=&nbsp;file_path\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.file_details&nbsp;=&nbsp;file_details\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.base_name&nbsp;=&nbsp;base_name\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.questions&nbsp;=&nbsp;questions\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.model_config&nbsp;=&nbsp;model_config\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;model_config&nbsp;is&nbsp;not&nbsp;None:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.llm&nbsp;=&nbsp;model_config[&quot;model&quot;]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.use_llm&nbsp;=&nbsp;True\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.detailed&nbsp;=&nbsp;detailed\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.llm&nbsp;=&nbsp;None\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.use_llm&nbsp;=&nbsp;False\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.detailed&nbsp;=&nbsp;False\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.instruct_list&nbsp;=&nbsp;[]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.question_mapping&nbsp;=&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;file&quot;:&nbsp;&quot;file&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;function&quot;:&nbsp;&quot;functions&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;class&quot;:&nbsp;&quot;classes&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;method&quot;:&nbsp;&quot;classes&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.code_qa_list&nbsp;=&nbsp;[]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.code_qa_response&nbsp;=&nbsp;&quot;&quot;\n\n&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_response_from_llm(self,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str)&nbsp;-&gt;&nbsp;str:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;language&nbsp;model&nbsp;response&nbsp;to&nbsp;query&nbsp;for&nbsp;given&nbsp;context.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;generated&nbsp;response.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context_strategies&nbsp;=&nbsp;[\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lambda:&nbsp;&quot;{}&quot;.format(str(context)),\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lambda:&nbsp;&quot;```python\\n{}\\n```&quot;.format(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str(self.file_details[&quot;file_info&quot;][&quot;file_code_simplified&quot;])\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;),\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lambda:&nbsp;&quot;```python\\n{}\\n```&quot;.format(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.get_info_string(self.file_details[&quot;file_info&quot;],&nbsp;&quot;file_summary&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;),\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lambda:&nbsp;&quot;&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max_context_length&nbsp;=&nbsp;self.model_config[&quot;inference_model&quot;][&quot;model_params&quot;][\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;context_length&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt_template&nbsp;=&nbsp;self.model_config[&quot;prompt_template&quot;].format(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;system_prompt=self.model_config[&quot;system_prompt&quot;],\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instruction_prompt=self.model_config[&quot;instruction_prompt&quot;],\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;strategy&nbsp;in&nbsp;context_strategies:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;strategy()\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;=&nbsp;prompt_template.format(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context=context,&nbsp;query=query,&nbsp;code_objects=self.code_qa_response\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context_size&nbsp;=&nbsp;len(self.llm.tokenize(prompt))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(&quot;***Context&nbsp;Size:&nbsp;&quot;&nbsp;+&nbsp;str(context_size))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;context_size&nbsp;&lt;=&nbsp;0.70&nbsp;*&nbsp;max_context_length:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err_msg&nbsp;=&nbsp;f&quot;Model&nbsp;response&nbsp;failed,&nbsp;increase&nbsp;py2dataset_model_config.yaml&nbsp;context_length&nbsp;&gt;&nbsp;{math.ceil(context_size/0.70)}&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.error(err_msg)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;context&nbsp;==&nbsp;&quot;&quot;:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.code_qa_list\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;re.sub(r&quot;\\n\\s*\\n&quot;,&nbsp;&quot;\\n\\n&quot;,&nbsp;self.llm(prompt))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;response.replace(&quot;&lt;|im_end|&gt;&quot;,&nbsp;&quot;&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;&quot;\\n&quot;.join([line.lstrip()&nbsp;for&nbsp;line&nbsp;in&nbsp;response.split(&quot;\\n&quot;)])\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&quot;***Overall&nbsp;Response:&nbsp;{response}&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;error:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.error(f&quot;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response:&nbsp;{error}&quot;)\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;self.detailed:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;item&nbsp;in&nbsp;self.code_qa_list:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instruct_key&nbsp;=&nbsp;list(item.keys())[0]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instruct_value&nbsp;=&nbsp;list(item.values())[0]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;f&quot;Describe&nbsp;the&nbsp;Purpose&nbsp;and&nbsp;Significance&nbsp;of&nbsp;these&nbsp;{instruct_key}:&nbsp;[{instruct_value}]&nbsp;and&nbsp;Explain&nbsp;what&nbsp;each&nbsp;of&nbsp;these&nbsp;{instruct_key}&nbsp;does&nbsp;in&nbsp;the&nbsp;code.&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;=&nbsp;(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.model_config[&quot;prompt_template&quot;]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.format(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;system_prompt=self.model_config[&quot;system_prompt&quot;],\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instruction_prompt=self.model_config[&quot;instruction_prompt&quot;],\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.format(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context=f&quot;{context}/nCode&nbsp;Summary:/n{response}&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query=f&quot;{query}&quot;,&nbsp;code_objects=f&quot;{instruct_value}&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_response&nbsp;=&nbsp;re.sub(r&quot;\\n\\s*\\n&quot;,&nbsp;&quot;\\n\\n&quot;,&nbsp;self.llm(prompt))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_response&nbsp;=&nbsp;item_response.replace(&quot;&lt;|im_end|&gt;&quot;,&nbsp;&quot;&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&quot;\\n***Itemized&nbsp;Response:&nbsp;{query}\\n{item_response}&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;item&nbsp;in&nbsp;self.instruct_list:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;item[&quot;instruction&quot;].startswith(instruct_key):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output&nbsp;=&nbsp;f&quot;\\n\\nPurpose&nbsp;and&nbsp;Significance:\\n{item_response}&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item[&quot;output&quot;]&nbsp;+=&nbsp;output\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;error:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.error(f&quot;Failed&nbsp;to&nbsp;generate&nbsp;model&nbsp;response:&nbsp;{error}&quot;)\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;response\n\n&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_code_qa(self):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;code&nbsp;responses&nbsp;from&nbsp;the&nbsp;instruct_list&nbsp;and&nbsp;update:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code_qa_list&nbsp;(List[Dict]):&nbsp;List&nbsp;of&nbsp;code&nbsp;question-answer&nbsp;pairs.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code_qa_response&nbsp;(str):&nbsp;structured&nbsp;text&nbsp;for&nbsp;code&nbsp;question-answer&nbsp;pairs.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;excluded_instructions&nbsp;=&nbsp;{&quot;Call&nbsp;code&nbsp;graph&quot;,&nbsp;&quot;Docstring&quot;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.code_qa_list&nbsp;=&nbsp;[]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code_objects_responses&nbsp;=&nbsp;{}\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;item&nbsp;in&nbsp;self.instruct_list:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instruction&nbsp;=&nbsp;item[&quot;instruction&quot;].split(&quot;&nbsp;in&nbsp;Python&nbsp;file:&quot;)[0]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output&nbsp;=&nbsp;item[&quot;output&quot;]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;any(instruction.startswith(prefix)&nbsp;for&nbsp;prefix&nbsp;in&nbsp;excluded_instructions):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.code_qa_list.append({instruction:&nbsp;output})\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&quot;`&quot;&nbsp;in&nbsp;instruction:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code_object&nbsp;=&nbsp;instruction.split(&quot;`&quot;)[1]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code_type&nbsp;=&nbsp;instruction.split()[0]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code_objects_responses.setdefault(code_object,&nbsp;[]).append(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(code_type,&nbsp;output)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.code_qa_response&nbsp;=&nbsp;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;idx,&nbsp;(code_object,&nbsp;type_responses)&nbsp;in&nbsp;enumerate(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code_objects_responses.items(),&nbsp;start=1\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.code_qa_response&nbsp;+=&nbsp;f&quot;{idx})&nbsp;{code_object}:\\n&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;subidx,&nbsp;(code_type,&nbsp;response)&nbsp;in&nbsp;enumerate(type_responses,&nbsp;start=1):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.code_qa_response&nbsp;+=&nbsp;f&quot;{idx}.{subidx}.&nbsp;{code_type}:&nbsp;{response}\\n&quot;\n\n&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;process_question(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;query:&nbsp;str,&nbsp;context:&nbsp;str,&nbsp;info:&nbsp;Dict\n&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;-&gt;&nbsp;None:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;question&nbsp;and&nbsp;add&nbsp;the&nbsp;generated&nbsp;response&nbsp;to&nbsp;the&nbsp;instruct_list.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;(str):&nbsp;The&nbsp;query&nbsp;to&nbsp;be&nbsp;processed.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;(str):&nbsp;The&nbsp;context&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;the&nbsp;response.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;(Dict):&nbsp;The&nbsp;information&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id.endswith((&quot;code_graph&quot;,&nbsp;&quot;docstring&quot;)):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;info.get(question_id,&nbsp;{})\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;question_id.endswith(&quot;file_purpose&quot;):&nbsp;&nbsp;#&nbsp;file_purpose&nbsp;is&nbsp;last&nbsp;question\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.get_code_qa()\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;self.use_llm:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;self.get_response_from_llm(query,&nbsp;context)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;clean_and_get_unique_elements(str(info.get(question_id,&nbsp;&quot;&quot;)))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response&nbsp;=&nbsp;str(response).strip()\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;response&nbsp;and&nbsp;response&nbsp;!=&nbsp;&quot;None&quot;:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;f&quot;```python\\n{context}\\n```&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.instruct_list.append(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&quot;instruction&quot;:&nbsp;query,&nbsp;&quot;input&quot;:&nbsp;context,&nbsp;&quot;output&quot;:&nbsp;response}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n\n&nbsp;&nbsp;&nbsp;&nbsp;@staticmethod\n&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_info_string(info:&nbsp;Dict,&nbsp;item_type:&nbsp;str)&nbsp;-&gt;&nbsp;str:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;string&nbsp;from&nbsp;info&nbsp;dictionary.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;(Dict):&nbsp;The&nbsp;information&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;item&nbsp;to&nbsp;get&nbsp;the&nbsp;string&nbsp;from.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;string&nbsp;from&nbsp;the&nbsp;info.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;,&nbsp;&quot;.join(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[item.strip()&nbsp;for&nbsp;item&nbsp;in&nbsp;str(info.get(item_type,&nbsp;&quot;&quot;)).split(&quot;,&quot;)&nbsp;if&nbsp;item]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n\n&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;process_question_type(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self,&nbsp;question_type:&nbsp;str,&nbsp;question_id:&nbsp;str,&nbsp;question_text:&nbsp;str\n&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;-&gt;&nbsp;None:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process&nbsp;questions&nbsp;related&nbsp;to&nbsp;a&nbsp;file,&nbsp;function,&nbsp;class,&nbsp;or&nbsp;method.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type&nbsp;(str):&nbsp;The&nbsp;type&nbsp;of&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_id&nbsp;(str):&nbsp;The&nbsp;ID&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_text&nbsp;(str):&nbsp;The&nbsp;text&nbsp;of&nbsp;the&nbsp;question&nbsp;to&nbsp;be&nbsp;processed.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&quot;file&quot;:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info&nbsp;=&nbsp;self.file_details[&quot;file_info&quot;]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;self.file_details[&quot;file_info&quot;][&quot;file_code&quot;]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;question_type&nbsp;==&nbsp;&quot;method&quot;:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;class_name,&nbsp;class_info&nbsp;in&nbsp;self.file_details[&quot;classes&quot;].items():\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;key,&nbsp;method_info&nbsp;in&nbsp;class_info.items():\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;key.startswith(&quot;class_method_&quot;):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method_name&nbsp;=&nbsp;f&quot;{class_name}.{key[len(\&#x27;class_method_\&#x27;):]}&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;method_info[&quot;method_code&quot;]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{&quot;class_name&quot;:&nbsp;class_name,&nbsp;&quot;method_name&quot;:&nbsp;method_name}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;method_info\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:&nbsp;&nbsp;#&nbsp;question_type&nbsp;is&nbsp;\&#x27;function\&#x27;&nbsp;or&nbsp;\&#x27;class\&#x27;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;name,&nbsp;info&nbsp;in&nbsp;self.file_details[\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.question_mapping[question_type]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;].items():\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;info[f&quot;{question_type}_code&quot;]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping&nbsp;=&nbsp;{f&quot;{question_type}_name&quot;:&nbsp;name}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_id&nbsp;==&nbsp;f&quot;{question_type}_purpose&quot;&nbsp;and&nbsp;self.use_llm:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;variables&nbsp;=&nbsp;self.get_info_string(info,&nbsp;f&quot;{question_type}_variables&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inputs&nbsp;=&nbsp;self.get_info_string(info,&nbsp;f&quot;{question_type}_inputs&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;combined&nbsp;=&nbsp;&quot;,&nbsp;&quot;.join([s&nbsp;for&nbsp;s&nbsp;in&nbsp;[variables,&nbsp;inputs]&nbsp;if&nbsp;s])\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f&quot;{question_type}_variables&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;=&nbsp;clean_and_get_unique_elements(combined)\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;question_type&nbsp;==&nbsp;&quot;class&quot;:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;methods_string&nbsp;=&nbsp;self.get_info_string(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info,&nbsp;f&quot;{question_type}_methods&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mapping[f&quot;{question_type}_methods&quot;]&nbsp;=&nbsp;methods_string\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;=&nbsp;question_text.format(filename=self.base_name,&nbsp;**mapping)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question(question_type,&nbsp;question_id,&nbsp;query,&nbsp;context,&nbsp;info)\n\n&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;generate(self)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;responses&nbsp;for&nbsp;all&nbsp;the&nbsp;questions&nbsp;and&nbsp;returns&nbsp;the&nbsp;instruct_list.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;&nbsp;.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;question&nbsp;in&nbsp;self.questions:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.process_question_type(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;question[&quot;type&quot;],&nbsp;question[&quot;id&quot;],&nbsp;question[&quot;text&quot;]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.instruct_list.sort(key=lambda&nbsp;x:&nbsp;len(x[&quot;input&quot;]),&nbsp;reverse=True)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.instruct_list\n\n\ndef&nbsp;get_python_datasets(\n&nbsp;&nbsp;&nbsp;&nbsp;file_path:&nbsp;str,\n&nbsp;&nbsp;&nbsp;&nbsp;file_details:&nbsp;Dict,\n&nbsp;&nbsp;&nbsp;&nbsp;base_name:&nbsp;str,\n&nbsp;&nbsp;&nbsp;&nbsp;questions:&nbsp;List[Dict],\n&nbsp;&nbsp;&nbsp;&nbsp;model_config:&nbsp;Dict,\n&nbsp;&nbsp;&nbsp;&nbsp;detailed:&nbsp;bool,\n)&nbsp;-&gt;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Extract&nbsp;information&nbsp;from&nbsp;a&nbsp;Python&nbsp;file&nbsp;and&nbsp;return&nbsp;it&nbsp;in&nbsp;JSON&nbsp;format.\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(str):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(Dict):&nbsp;The&nbsp;details&nbsp;of&nbsp;the&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;Python&nbsp;code&nbsp;filename.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(List[Dict]):&nbsp;The&nbsp;list&nbsp;of&nbsp;questions.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llm&nbsp;(object):&nbsp;The&nbsp;language&nbsp;model&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str):&nbsp;The&nbsp;prompt&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;generating&nbsp;responses.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;detailed&nbsp;(bool):&nbsp;Flag&nbsp;indicating&nbsp;if&nbsp;detailed&nbsp;information&nbsp;should&nbsp;be&nbsp;extracted.\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tuple[List[Dict],&nbsp;List[Dict]]:&nbsp;Extracted&nbsp;information&nbsp;in&nbsp;JSON&nbsp;format.\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;DatasetGenerator(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path,&nbsp;file_details,&nbsp;base_name,&nbsp;questions,&nbsp;model_config,&nbsp;detailed\n&nbsp;&nbsp;&nbsp;&nbsp;).generate()\n\n```&#x27;}]</td><td>24120</td><td>py2dataset/get_python_datasets.py</td></tr><tr><td>[{&#x27;from&#x27;:&nbsp;&#x27;system&#x27;,&nbsp;&#x27;value&#x27;:&nbsp;&quot;code&nbsp;documentation:&nbsp;Overall&nbsp;Purpose&nbsp;and&nbsp;Processing&nbsp;Approach&nbsp;of&nbsp;Python&nbsp;File:&nbsp;get_python_file_details.py\nThis&nbsp;Python&nbsp;file&nbsp;offers&nbsp;a&nbsp;set&nbsp;of&nbsp;functions&nbsp;aimed&nbsp;at&nbsp;extracting&nbsp;detailed&nbsp;information&nbsp;about&nbsp;a&nbsp;given&nbsp;Python&nbsp;source&nbsp;code&nbsp;file.&nbsp;It&nbsp;involves&nbsp;several&nbsp;steps&nbsp;to&nbsp;achieve&nbsp;this&nbsp;goal,&nbsp;including&nbsp;removing&nbsp;docstrings&nbsp;from&nbsp;the&nbsp;code,&nbsp;traversing&nbsp;Abstract&nbsp;Syntax&nbsp;Tree&nbsp;(AST)&nbsp;for&nbsp;gathering&nbsp;function&nbsp;and&nbsp;class&nbsp;details,&nbsp;constructing&nbsp;a&nbsp;directed&nbsp;graph&nbsp;representing&nbsp;code&nbsp;call&nbsp;relationships&nbsp;using&nbsp;NetworkX&nbsp;library,&nbsp;and&nbsp;ultimately&nbsp;returning&nbsp;a&nbsp;comprehensive&nbsp;dictionary&nbsp;encompassing&nbsp;extracted&nbsp;file&nbsp;details.\n\n1.&nbsp;remove_docstring(code:&nbsp;str,&nbsp;tree:&nbsp;ast.AST)&nbsp;-&gt;&nbsp;str:\nPurpose:&nbsp;Remove&nbsp;docstrings&nbsp;from&nbsp;the&nbsp;provided&nbsp;Python&nbsp;code&nbsp;string&nbsp;while&nbsp;maintaining&nbsp;syntax&nbsp;integrity&nbsp;by&nbsp;removing&nbsp;top-level&nbsp;module&nbsp;docstrings&nbsp;and&nbsp;docstrings&nbsp;in&nbsp;functions,&nbsp;classes,&nbsp;and&nbsp;async&nbsp;functions&nbsp;within&nbsp;the&nbsp;AST&nbsp;tree&nbsp;&#x27;tree&#x27;.\nProcessing&nbsp;Approach:\n-&nbsp;Checks&nbsp;if&nbsp;root&nbsp;node&nbsp;has&nbsp;a&nbsp;docstring&nbsp;and&nbsp;removes&nbsp;it.\n-&nbsp;Traverses&nbsp;the&nbsp;tree&nbsp;recursively&nbsp;to&nbsp;identify&nbsp;docstrings&nbsp;inside&nbsp;function&nbsp;definitions&nbsp;(FunctionDef,&nbsp;ClassDef,&nbsp;AsyncFunctionDef)&nbsp;and&nbsp;removes&nbsp;them&nbsp;from&nbsp;respective&nbsp;nodes&nbsp;using&nbsp;ast.unparse().\nInputs:&nbsp;&#x27;code&#x27;&nbsp;(original&nbsp;Python&nbsp;code),&nbsp;&#x27;tree&#x27;&nbsp;(AST&nbsp;representation&nbsp;of&nbsp;code).\nCalled&nbsp;Functions/Methods:&nbsp;tree.body.pop(),&nbsp;ast.walk(),&nbsp;node.body.pop(),&nbsp;ast.unparse().\nVariables&nbsp;Used:&nbsp;&#x27;tree&#x27;,&nbsp;&#x27;code&#x27;,&nbsp;&#x27;first_body_node&#x27;.\nReturn&nbsp;Value:&nbsp;Sanitized&nbsp;Python&nbsp;code&nbsp;string&nbsp;without&nbsp;docstrings&nbsp;(&#x27;ast.unparse(tree)&#x27;).\n\n2.&nbsp;get_all_calls(node:&nbsp;ast.AST,&nbsp;calls=None)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;List[str]]:\nPurpose:&nbsp;Locate&nbsp;and&nbsp;aggregate&nbsp;all&nbsp;function&nbsp;calls&nbsp;found&nbsp;within&nbsp;the&nbsp;given&nbsp;&#x27;node&#x27;,&nbsp;which&nbsp;could&nbsp;include&nbsp;occurrences&nbsp;inside&nbsp;list&nbsp;comprehensions&nbsp;and&nbsp;lambda&nbsp;functions&nbsp;too.\nProcessing&nbsp;Approach:\n-&nbsp;Initializes&nbsp;accumulator&nbsp;&#x27;calls&#x27;&nbsp;as&nbsp;empty&nbsp;dictionary&nbsp;if&nbsp;none&nbsp;provided&nbsp;(&#x27;calls&nbsp;is&nbsp;None&#x27;).\n-&nbsp;Adds&nbsp;call&nbsp;details&nbsp;to&nbsp;&#x27;calls&#x27;&nbsp;after&nbsp;encountering&nbsp;an&nbsp;Ast.Call&nbsp;node&nbsp;with&nbsp;function&nbsp;arguments&nbsp;(&#x27;calls.append()&#x27;).\n-&nbsp;For&nbsp;class&nbsp;attribute&nbsp;definitions&nbsp;(ClassDef&nbsp;nodes),&nbsp;calls&nbsp;get_all_calls()&nbsp;recursively&nbsp;and&nbsp;builds&nbsp;up&nbsp;a&nbsp;calls&nbsp;dictionary&nbsp;using&nbsp;parentage&nbsp;relation&nbsp;of&nbsp;ast&nbsp;nodes.\nInputs:&nbsp;&#x27;node&#x27;,&nbsp;optional&nbsp;argument&nbsp;&#x27;calls&#x27;.\nCalled&nbsp;Functions/Methods:&nbsp;isinstance(),&nbsp;ast.unparse(),&nbsp;ast.iter_child_nodes().\nVariables&nbsp;Used:&nbsp;&#x27;calls&#x27;,&nbsp;&#x27;calls_dict&#x27;,&nbsp;&#x27;func&#x27;,&nbsp;&#x27;args&#x27;,&nbsp;&#x27;node&#x27;.\nReturn&nbsp;Value:&nbsp;Dictionary&nbsp;mapping&nbsp;function&nbsp;calls&nbsp;(as&nbsp;strings)&nbsp;to&nbsp;lists&nbsp;of&nbsp;their&nbsp;arguments&nbsp;(&#x27;calls_dict&#x27;).\n\n3.&nbsp;get_python_file_details(file_path:&nbsp;str)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;Union[Dict,&nbsp;str]]:\nPurpose:&nbsp;Acquire&nbsp;information&nbsp;from&nbsp;a&nbsp;Python&nbsp;file&nbsp;specified&nbsp;by&nbsp;&#x27;file_path&#x27;,&nbsp;structure&nbsp;it&nbsp;into&nbsp;detailed&nbsp;dictionary&nbsp;format&nbsp;for&nbsp;easy&nbsp;access&nbsp;and&nbsp;analysis.\nProcessing&nbsp;Approach:\n-&nbsp;Opens&nbsp;the&nbsp;input&nbsp;file&nbsp;in&nbsp;read&nbsp;mode&nbsp;(&#x27;open()&#x27;).\n-&nbsp;Parses&nbsp;the&nbsp;code&nbsp;using&nbsp;ast&nbsp;module&nbsp;to&nbsp;create&nbsp;an&nbsp;AST&nbsp;(&#x27;ast.parse()&#x27;).\n-&nbsp;Instantiates&nbsp;CodeVisitor&nbsp;class&nbsp;with&nbsp;source&nbsp;code&nbsp;and&nbsp;AST&nbsp;(&#x27;CodeVisitor(code,&nbsp;tree)&#x27;).\n-&nbsp;Analyzes&nbsp;the&nbsp;AST&nbsp;by&nbsp;invoking&nbsp;analyze()&nbsp;method&nbsp;on&nbsp;CodeVisitor&nbsp;instance&nbsp;(&#x27;visitor.analyze(tree)&#x27;).\n-&nbsp;Constructs&nbsp;a&nbsp;directed&nbsp;graph&nbsp;using&nbsp;get_code_graph().\n-&nbsp;Serializes&nbsp;file&nbsp;summary&nbsp;JSON&nbsp;data&nbsp;for&nbsp;easier&nbsp;representation&nbsp;(&#x27;json.dumps(file_summary).replace()&#x27;).\nInputs:&nbsp;&#x27;file_path&#x27;&nbsp;(Python&nbsp;file&nbsp;path).\nCalled&nbsp;Functions/Methods:&nbsp;open(),&nbsp;logging.warning(),&nbsp;CodeVisitor(&#x27;__init__&#x27;),&nbsp;get_code_graph(),&nbsp;json.dumps().\nVariables&nbsp;Used:&nbsp;&#x27;tree&#x27;,&nbsp;&#x27;code&#x27;,&nbsp;&#x27;file_summary&#x27;,&nbsp;&#x27;visitor&#x27;,&nbsp;&#x27;file_path&#x27;,&nbsp;&#x27;file_details&#x27;.\nReturn&nbsp;Value:&nbsp;Dictionary&nbsp;containing&nbsp;extracted&nbsp;file&nbsp;details&nbsp;(&#x27;file_details&#x27;).&nbsp;If&nbsp;error&nbsp;occurs,&nbsp;returns&nbsp;None.\n\n4.&nbsp;CodeVisitor&nbsp;Class:\nThis&nbsp;class&nbsp;traverses&nbsp;an&nbsp;AST&nbsp;and&nbsp;extracts&nbsp;various&nbsp;code&nbsp;details&nbsp;using&nbsp;NodeVisitor&nbsp;inheritance&nbsp;from&nbsp;ast&nbsp;module&nbsp;for&nbsp;analyzing&nbsp;Python&nbsp;source&nbsp;code.\n4.1.__init__(self,&nbsp;code:&nbsp;str,&nbsp;tree:&nbsp;ast.AST)&nbsp;-&gt;&nbsp;None:\nPurpose:&nbsp;Initialize&nbsp;a&nbsp;new&nbsp;CodeVisitor&nbsp;instance&nbsp;with&nbsp;&#x27;code&#x27;&nbsp;and&nbsp;its&nbsp;respective&nbsp;&#x27;tree&#x27;.\nProcessing&nbsp;Approach:&nbsp;Assigns&nbsp;attributes&nbsp;(&#x27;self&#x27;,&nbsp;&#x27;code&#x27;,&nbsp;&#x27;tree&#x27;).\nInputs:&nbsp;&#x27;self&#x27;,&nbsp;Python&nbsp;code&nbsp;string&nbsp;(&#x27;code&#x27;),&nbsp;AST&nbsp;representation&nbsp;(&#x27;tree&#x27;).\n4.2.visit_FunctionDef(node:&nbsp;ast.FunctionDef)&nbsp;-&gt;&nbsp;None:\nPurpose:&nbsp;Extract&nbsp;details&nbsp;about&nbsp;a&nbsp;function&nbsp;within&nbsp;the&nbsp;class&nbsp;context&nbsp;(&#x27;self.current_class&#x27;&nbsp;is&nbsp;None).\nProcessing&nbsp;Approach:&nbsp;Calls&nbsp;extract_details()&nbsp;with&nbsp;&#x27;function&#x27;&nbsp;as&nbsp;node&nbsp;type&nbsp;and&nbsp;stores&nbsp;results&nbsp;in&nbsp;&#x27;functions&#x27;.\nInputs:&nbsp;&#x27;self&#x27;,&nbsp;&#x27;node&#x27;&nbsp;(FunctionDef&nbsp;node).\n4.3.visit_ClassDef(self,&nbsp;node:&nbsp;ast.ClassDef)&nbsp;-&gt;&nbsp;None:\nPurpose:&nbsp;Extract&nbsp;details&nbsp;about&nbsp;a&nbsp;class&nbsp;within&nbsp;the&nbsp;class&nbsp;context&nbsp;(&#x27;self.current_class&#x27;&nbsp;is&nbsp;not&nbsp;None).\nProcessing&nbsp;Approach:&nbsp;Calls&nbsp;extract_details()&nbsp;with&nbsp;&#x27;class&#x27;&nbsp;as&nbsp;node&nbsp;type&nbsp;and&nbsp;stores&nbsp;results&nbsp;in&nbsp;&#x27;classes&#x27;.\nInputs:&nbsp;&#x27;self&#x27;,&nbsp;&#x27;node&#x27;&nbsp;(ClassDef&nbsp;node).\n4.4.generic_visit(self,&nbsp;node):\nPurpose:&nbsp;Handles&nbsp;nodes&nbsp;without&nbsp;explicit&nbsp;visitor&nbsp;functions&nbsp;by&nbsp;traversing&nbsp;the&nbsp;AST&nbsp;recursively&nbsp;(&#x27;ast.iter_child_nodes()&#x27;).\nProcessing&nbsp;Approach:&nbsp;Invokes&nbsp;self.visit()&nbsp;for&nbsp;each&nbsp;child&nbsp;node.\nInputs:&nbsp;&#x27;self&#x27;,&nbsp;&#x27;node&#x27;.\n4.5.visit_Assign(self,&nbsp;node:&nbsp;ast.Assign):\nPurpose:&nbsp;Collect&nbsp;constant&nbsp;assignments&nbsp;in&nbsp;the&nbsp;top&nbsp;level&nbsp;module&nbsp;scope&nbsp;(&#x27;self.constants&#x27;).\nProcessing&nbsp;Approach:&nbsp;Identifies&nbsp;constants&nbsp;from&nbsp;Assign&nbsp;nodes&nbsp;and&nbsp;appends&nbsp;them&nbsp;to&nbsp;&#x27;self.constants&#x27;.\nInputs:&nbsp;&#x27;self&#x27;,&nbsp;&#x27;node&#x27;.\n4.6.extract_details(self,&nbsp;node:&nbsp;ast.AST,&nbsp;node_type:&nbsp;str)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;Union[str,&nbsp;List[str]]:\nPurpose:&nbsp;Extract&nbsp;details&nbsp;about&nbsp;a&nbsp;given&nbsp;node&nbsp;(&#x27;node&#x27;)&nbsp;based&nbsp;on&nbsp;its&nbsp;type&nbsp;(&#x27;node_type&#x27;).\nProcessing&nbsp;Approach:&nbsp;Walks&nbsp;through&nbsp;the&nbsp;AST&nbsp;using&nbsp;ast.walk(),&nbsp;gathers&nbsp;call&nbsp;data&nbsp;with&nbsp;get_all_calls().\nInputs:&nbsp;&#x27;self&#x27;,&nbsp;&#x27;node&#x27;,&nbsp;&#x27;node_type&#x27;.\n-&nbsp;Builds&nbsp;a&nbsp;dictionary&nbsp;containing&nbsp;node&nbsp;details&nbsp;depending&nbsp;on&nbsp;node&nbsp;type&nbsp;(&#x27;details&#x27;).\n4.7.analyze(self,&nbsp;node:&nbsp;ast.AST)&nbsp;-&gt;&nbsp;None:\nPurpose:&nbsp;Traverse&nbsp;the&nbsp;AST&nbsp;to&nbsp;populate&nbsp;file&nbsp;information&nbsp;dictionary&nbsp;(&#x27;file_info&#x27;)&nbsp;with&nbsp;various&nbsp;code&nbsp;aspects.\nProcessing&nbsp;Approach:&nbsp;Invokes&nbsp;self&nbsp;methods&nbsp;for&nbsp;function&nbsp;and&nbsp;class&nbsp;details&nbsp;extraction,&nbsp;constructs&nbsp;&#x27;file_summary&#x27;.\nInputs:&nbsp;&#x27;self&#x27;,&nbsp;&#x27;node&#x27;.\n-&nbsp;Creates&nbsp;lists&nbsp;of&nbsp;functions,&nbsp;classes,&nbsp;constants,&nbsp;dependencies,&nbsp;etc.,&nbsp;simplifies&nbsp;code&nbsp;(&#x27;remove_docstring()&#x27;),&nbsp;and&nbsp;calls&nbsp;get_code_graph().\n\n5.&nbsp;Variables&nbsp;in&nbsp;CodeVisitor&nbsp;Class:\ntree:&nbsp;AST&nbsp;representation&nbsp;of&nbsp;Python&nbsp;source&nbsp;code&nbsp;during&nbsp;initialization.\ncurrent_class:&nbsp;Indicates&nbsp;if&nbsp;traversal&nbsp;is&nbsp;within&nbsp;a&nbsp;class&nbsp;definition&nbsp;context&nbsp;(True)&nbsp;or&nbsp;not&nbsp;(False).\nfile_info:&nbsp;Contains&nbsp;overall&nbsp;details&nbsp;about&nbsp;the&nbsp;analyzed&nbsp;file.\nfunctions:&nbsp;Dictionary&nbsp;containing&nbsp;function&nbsp;details&nbsp;extracted&nbsp;from&nbsp;the&nbsp;code.\nclasses:&nbsp;Dictionary&nbsp;storing&nbsp;class&nbsp;details&nbsp;from&nbsp;the&nbsp;source&nbsp;code.&quot;},&nbsp;{&#x27;from&#x27;:&nbsp;&#x27;human&#x27;,&nbsp;&#x27;value&#x27;:&nbsp;&#x27;Output&nbsp;the&nbsp;Python&nbsp;code&nbsp;described&nbsp;by&nbsp;the&nbsp;code&nbsp;documentation.&#x27;},&nbsp;{&#x27;from&#x27;:&nbsp;&#x27;gpt&#x27;,&nbsp;&#x27;value&#x27;:&nbsp;&#x27;```python\n&quot;&quot;&quot;\nReturn&nbsp;file_details&nbsp;dictionary&nbsp;for&nbsp;python&nbsp;source&nbsp;code.\nRequirements:\n[req00]&nbsp;The&nbsp;`remove_docstring`&nbsp;function&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;a&nbsp;Python&nbsp;code&nbsp;string&nbsp;as&nbsp;an&nbsp;argument.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Remove&nbsp;docstrings&nbsp;and&nbsp;comments&nbsp;from&nbsp;the&nbsp;provided&nbsp;code.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Return&nbsp;the&nbsp;sanitized&nbsp;code&nbsp;string.\n[req01]&nbsp;The&nbsp;get_all_calls&nbsp;function&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;a&nbsp;node&nbsp;of&nbsp;type&nbsp;ast.AST&nbsp;as&nbsp;an&nbsp;argument.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Recursively&nbsp;find&nbsp;all&nbsp;function&nbsp;calls&nbsp;in&nbsp;the&nbsp;subtree&nbsp;rooted&nbsp;at&nbsp;the&nbsp;node.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Return&nbsp;a&nbsp;dictionary&nbsp;of&nbsp;all&nbsp;function&nbsp;calls&nbsp;in&nbsp;the&nbsp;subtree&nbsp;rooted&nbsp;at&nbsp;the&nbsp;node.\n[req02]&nbsp;The&nbsp;`CodeVisitor`&nbsp;class&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;the&nbsp;source&nbsp;code&nbsp;as&nbsp;input&nbsp;when&nbsp;instantiated.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Use&nbsp;the&nbsp;AST&nbsp;to&nbsp;extract&nbsp;details&nbsp;about&nbsp;the&nbsp;code.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Inherit&nbsp;from&nbsp;`ast.NodeVisitor`.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Implement&nbsp;`visit_FunctionDef`&nbsp;method&nbsp;to&nbsp;gather&nbsp;details&nbsp;about&nbsp;functions.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.&nbsp;Implement&nbsp;`visit_ClassDef`&nbsp;method&nbsp;to&nbsp;gather&nbsp;details&nbsp;about&nbsp;classes.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f.&nbsp;Implement&nbsp;`extract_details`&nbsp;method&nbsp;to&nbsp;parse&nbsp;information&nbsp;about&nbsp;a&nbsp;given&nbsp;node.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g.&nbsp;Implement&nbsp;`analyze`&nbsp;method&nbsp;to&nbsp;traverse&nbsp;the&nbsp;AST&nbsp;and&nbsp;\&#x27;file_info\&#x27;.&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h.&nbsp;Maintain&nbsp;a&nbsp;current&nbsp;class&nbsp;context&nbsp;using&nbsp;the&nbsp;attribute&nbsp;\&#x27;current_class\&#x27;.\n[req03]&nbsp;The&nbsp;`code_graph`&nbsp;function&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;the&nbsp;file&nbsp;summary&nbsp;as&nbsp;input.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Construct&nbsp;a&nbsp;directed&nbsp;graph&nbsp;with&nbsp;nodes&nbsp;and&nbsp;edges&nbsp;using&nbsp;networkx&nbsp;library.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Define&nbsp;elements&nbsp;such&nbsp;as&nbsp;function&nbsp;nodes,&nbsp;class&nbsp;nodes,&nbsp;and&nbsp;method&nbsp;nodes.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Specify&nbsp;edges&nbsp;to&nbsp;represent&nbsp;relationships.&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.&nbsp;Return&nbsp;a&nbsp;dictionary&nbsp;representation&nbsp;of&nbsp;the&nbsp;code&nbsp;call&nbsp;graph.&nbsp;\n[req04]&nbsp;The&nbsp;`get_python_file_details`&nbsp;function&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;a&nbsp;file&nbsp;path&nbsp;as&nbsp;an&nbsp;argument.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Extract&nbsp;info&nbsp;from&nbsp;Python&nbsp;file&nbsp;using&nbsp;the&nbsp;AST&nbsp;and&nbsp;the&nbsp;`CodeVisitor`&nbsp;class.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Include&nbsp;the&nbsp;entire&nbsp;code&nbsp;graph&nbsp;in&nbsp;the&nbsp;returned&nbsp;details.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Return&nbsp;a&nbsp;dictionary&nbsp;encompassing&nbsp;the&nbsp;extracted&nbsp;file&nbsp;details.&nbsp;\n&quot;&quot;&quot;\nimport&nbsp;ast\nimport&nbsp;logging\nimport&nbsp;json\nfrom&nbsp;typing&nbsp;import&nbsp;Dict,&nbsp;List,&nbsp;Union\nfrom&nbsp;get_code_graph&nbsp;import&nbsp;get_code_graph\n\n\ndef&nbsp;remove_docstring(code:&nbsp;str,&nbsp;tree:&nbsp;ast.AST)&nbsp;-&gt;&nbsp;str:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Remove&nbsp;docstrings&nbsp;from&nbsp;the&nbsp;provided&nbsp;Python&nbsp;code.\n&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;includes&nbsp;top-level&nbsp;module&nbsp;docstrings&nbsp;and&nbsp;docstrings&nbsp;in\n&nbsp;&nbsp;&nbsp;&nbsp;functions,&nbsp;classes,&nbsp;and&nbsp;async&nbsp;functions.\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code&nbsp;(str):&nbsp;The&nbsp;source&nbsp;code&nbsp;from&nbsp;which&nbsp;to&nbsp;remove&nbsp;docstrings.\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;source&nbsp;code&nbsp;with&nbsp;docstrings&nbsp;removed.\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tree.body\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;isinstance(tree.body[0],&nbsp;ast.Expr)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;isinstance(tree.body[0].value,&nbsp;ast.Str)\n&nbsp;&nbsp;&nbsp;&nbsp;):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tree.body.pop(0)\n\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;node&nbsp;in&nbsp;ast.walk(tree):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isinstance(node,&nbsp;(ast.FunctionDef,&nbsp;ast.ClassDef,&nbsp;ast.AsyncFunctionDef))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;node.body\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;first_body_node&nbsp;=&nbsp;node.body[0]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(first_body_node,&nbsp;ast.Expr)&nbsp;and&nbsp;isinstance(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;first_body_node.value,&nbsp;ast.Str\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node.body.pop(0)\n\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;ast.unparse(tree)\n\n\ndef&nbsp;get_all_calls(node:&nbsp;ast.AST,&nbsp;calls=None)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;List[str]]:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Recursively&nbsp;find&nbsp;all&nbsp;function&nbsp;calls&nbsp;in&nbsp;the&nbsp;subtree&nbsp;rooted&nbsp;at&nbsp;`node`,\n&nbsp;&nbsp;&nbsp;&nbsp;including&nbsp;those&nbsp;in&nbsp;class&nbsp;attributes,&nbsp;list&nbsp;comprehensions,&nbsp;and&nbsp;lambda&nbsp;functions.\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node&nbsp;(ast.AST):&nbsp;The&nbsp;root&nbsp;node&nbsp;to&nbsp;start&nbsp;the&nbsp;search&nbsp;from.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calls&nbsp;(List[Tuple[str,&nbsp;List[str]]],&nbsp;optional):&nbsp;Accumulator&nbsp;for&nbsp;function&nbsp;calls&nbsp;found.\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dict[str,&nbsp;List[str]]:&nbsp;dictionary&nbsp;mapping&nbsp;function&nbsp;calls&nbsp;(as&nbsp;strings)&nbsp;to&nbsp;lists&nbsp;of&nbsp;their&nbsp;arguments.\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;calls&nbsp;is&nbsp;None:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calls&nbsp;=&nbsp;[]\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(node,&nbsp;ast.Call):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calls.append((ast.unparse(node.func),&nbsp;[ast.unparse(arg)&nbsp;for&nbsp;arg&nbsp;in&nbsp;node.args]))\n&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;isinstance(node,&nbsp;ast.ClassDef):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;body_item&nbsp;in&nbsp;node.body:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(body_item,&nbsp;ast.Assign)&nbsp;and&nbsp;isinstance(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body_item.targets[0],&nbsp;ast.Name\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_all_calls(body_item.value,&nbsp;calls)\n\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;child&nbsp;in&nbsp;ast.iter_child_nodes(node):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_all_calls(child,&nbsp;calls)\n\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Build&nbsp;the&nbsp;dictionary&nbsp;after&nbsp;traversal\n&nbsp;&nbsp;&nbsp;&nbsp;calls_dict&nbsp;=&nbsp;{}\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;func,&nbsp;args&nbsp;in&nbsp;calls:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;func&nbsp;not&nbsp;in&nbsp;calls_dict:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calls_dict[func]&nbsp;=&nbsp;[]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calls_dict[func].extend(args)\n\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;calls_dict\n\n\nclass&nbsp;CodeVisitor(ast.NodeVisitor):\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Visitor&nbsp;class&nbsp;for&nbsp;traversing&nbsp;an&nbsp;AST&nbsp;(Abstract&nbsp;Syntax&nbsp;Tree)&nbsp;and&nbsp;extracting&nbsp;details&nbsp;about&nbsp;the&nbsp;code.\n&nbsp;&nbsp;&nbsp;&nbsp;Attributes:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code&nbsp;(str):&nbsp;The&nbsp;source&nbsp;code.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;functions(Dict):&nbsp;details&nbsp;about&nbsp;functions&nbsp;in&nbsp;the&nbsp;code.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classes&nbsp;(Dict):&nbsp;details&nbsp;about&nbsp;classes&nbsp;in&nbsp;the&nbsp;code.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_info&nbsp;(Dict):&nbsp;details&nbsp;about&nbsp;the&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;Methods:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;visit_FunctionDef(node:&nbsp;ast.FunctionDef)&nbsp;-&gt;&nbsp;None:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Extract&nbsp;details&nbsp;about&nbsp;a&nbsp;function.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;visit_ClassDef(node:&nbsp;ast.ClassDef)&nbsp;-&gt;&nbsp;None:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Extract&nbsp;details&nbsp;about&nbsp;a&nbsp;class.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extract_details(node:&nbsp;ast.AST,&nbsp;node_type:&nbsp;str)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;Union[str,&nbsp;List[str]]]:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Extract&nbsp;details&nbsp;about&nbsp;a&nbsp;node.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;analyze(node:&nbsp;ast.AST)&nbsp;-&gt;&nbsp;None:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Populate&nbsp;file_info&nbsp;with&nbsp;details&nbsp;about&nbsp;the&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n\n&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self,&nbsp;code:&nbsp;str,&nbsp;tree:&nbsp;ast.AST)&nbsp;-&gt;&nbsp;None:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Initialize&nbsp;a&nbsp;new&nbsp;instance&nbsp;of&nbsp;the&nbsp;class.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code:&nbsp;str:&nbsp;The&nbsp;source&nbsp;code.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.code:&nbsp;str&nbsp;=&nbsp;code\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.functions:&nbsp;Dict[str,&nbsp;Dict[str,&nbsp;Union[str,&nbsp;List[str]]]]&nbsp;=&nbsp;{}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.classes:&nbsp;Dict[str,&nbsp;Dict[str,&nbsp;Union[str,&nbsp;List[str]]]]&nbsp;=&nbsp;{}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.file_info:&nbsp;Dict[str,&nbsp;Union[str,&nbsp;List[str]]]&nbsp;=&nbsp;{}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.current_class:&nbsp;str&nbsp;=&nbsp;None\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.constants:&nbsp;List[str]&nbsp;=&nbsp;[]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.tree&nbsp;=&nbsp;tree\n\n&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;visit_FunctionDef(self,&nbsp;node:&nbsp;ast.FunctionDef)&nbsp;-&gt;&nbsp;None:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Extract&nbsp;details&nbsp;about&nbsp;a&nbsp;function.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node:&nbsp;ast.FunctionDef:&nbsp;The&nbsp;node&nbsp;to&nbsp;visit.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;details&nbsp;=&nbsp;self.extract_details(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node,&nbsp;&quot;method&quot;&nbsp;if&nbsp;self.current_class&nbsp;else&nbsp;&quot;function&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;self.current_class:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.classes[self.current_class][f&quot;class_method_{node.name}&quot;]&nbsp;=&nbsp;details\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.functions[node.name]&nbsp;=&nbsp;details\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.generic_visit(node)\n\n&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;visit_ClassDef(self,&nbsp;node:&nbsp;ast.ClassDef)&nbsp;-&gt;&nbsp;None:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Extract&nbsp;details&nbsp;about&nbsp;a&nbsp;class.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node:&nbsp;ast.ClassDef:&nbsp;The&nbsp;node&nbsp;to&nbsp;visit.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.classes[node.name]&nbsp;=&nbsp;self.extract_details(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node,&nbsp;&quot;class&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;&nbsp;#&nbsp;populate&nbsp;class&nbsp;dictionary&nbsp;when&nbsp;class&nbsp;definition&nbsp;found&nbsp;in&nbsp;AST\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.current_class&nbsp;=&nbsp;node.name&nbsp;&nbsp;#&nbsp;set&nbsp;current_class&nbsp;to&nbsp;indicate&nbsp;inside&nbsp;a&nbsp;class\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.generic_visit(node)&nbsp;&nbsp;#&nbsp;continue&nbsp;AST&nbsp;traversal&nbsp;to&nbsp;the&nbsp;next&nbsp;node\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.current_class&nbsp;=&nbsp;None&nbsp;&nbsp;#&nbsp;reset&nbsp;current_class&nbsp;when&nbsp;finished&nbsp;with&nbsp;this&nbsp;class\n\n&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;generic_visit(self,&nbsp;node):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Called&nbsp;if&nbsp;no&nbsp;explicit&nbsp;visitor&nbsp;function&nbsp;exists&nbsp;for&nbsp;a&nbsp;node.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node:&nbsp;ast.AST:&nbsp;The&nbsp;node&nbsp;to&nbsp;visit.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;child&nbsp;in&nbsp;ast.iter_child_nodes(node):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child.parent&nbsp;=&nbsp;node\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.visit(child)\n\n&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;visit_Assign(self,&nbsp;node:&nbsp;ast.Assign):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;self.constants\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node:&nbsp;ast.Assign:&nbsp;The&nbsp;node&nbsp;to&nbsp;visit.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(node.parent,&nbsp;ast.Module):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;target&nbsp;in&nbsp;node.targets:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(target,&nbsp;ast.Name):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;=&nbsp;node.value\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(value,&nbsp;ast.Constant)&nbsp;and&nbsp;isinstance(value.value,&nbsp;str):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value_repr&nbsp;=&nbsp;f&quot;\&#x27;{value.value}\&#x27;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value_repr&nbsp;=&nbsp;ast.unparse(value)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constant_assignment&nbsp;=&nbsp;f&quot;{target.id}={value_repr}&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.constants.append(constant_assignment)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.generic_visit(node)\n\n&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;extract_details(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self,&nbsp;node:&nbsp;ast.AST,&nbsp;node_type:&nbsp;str\n&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;Union[str,&nbsp;List[str]]]:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Extract&nbsp;details&nbsp;about&nbsp;a&nbsp;node.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node:&nbsp;ast.AST:&nbsp;The&nbsp;node&nbsp;to&nbsp;extract&nbsp;details&nbsp;from.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node_type:&nbsp;str:&nbsp;The&nbsp;type&nbsp;of&nbsp;node.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dict[str,&nbsp;Union[str,&nbsp;List[str]]]:&nbsp;The&nbsp;details&nbsp;extracted&nbsp;from&nbsp;the&nbsp;node.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node_walk&nbsp;=&nbsp;list(ast.walk(node))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call_data&nbsp;=&nbsp;get_all_calls(node)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node_inputs&nbsp;=&nbsp;(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[arg.arg&nbsp;for&nbsp;arg&nbsp;in&nbsp;node.args.args]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;node_type&nbsp;in&nbsp;[&quot;function&quot;,&nbsp;&quot;method&quot;]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;None\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node_variables&nbsp;=&nbsp;list(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ast.unparse(target)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;subnode&nbsp;in&nbsp;node_walk\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(subnode,&nbsp;ast.Assign)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;target&nbsp;in&nbsp;subnode.targets\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(target,&nbsp;ast.Name)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;node_inputs:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node_variables&nbsp;=&nbsp;list(set(node_inputs&nbsp;+&nbsp;node_variables))\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;details&nbsp;=&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f&quot;{node_type}_name&quot;:&nbsp;node.name,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f&quot;{node_type}_code&quot;:&nbsp;ast.unparse(node),\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f&quot;{node_type}_docstring&quot;:&nbsp;next(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n.value.s\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;n&nbsp;in&nbsp;node_walk\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(n,&nbsp;ast.Expr)&nbsp;and&nbsp;isinstance(n.value,&nbsp;ast.Str)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;),\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;),\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f&quot;{node_type}_inputs&quot;:&nbsp;node_inputs,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f&quot;{node_type}_defaults&quot;:&nbsp;[ast.unparse(d)&nbsp;for&nbsp;d&nbsp;in&nbsp;node.args.defaults]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;node_type&nbsp;in&nbsp;[&quot;function&quot;,&nbsp;&quot;method&quot;]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;None,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f&quot;{node_type}_returns&quot;:&nbsp;[\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ast.unparse(subnode.value)&nbsp;if&nbsp;subnode.value&nbsp;is&nbsp;not&nbsp;None&nbsp;else&nbsp;&quot;None&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;subnode&nbsp;in&nbsp;node_walk\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(subnode,&nbsp;ast.Return)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f&quot;{node_type}_calls&quot;:&nbsp;list(call_data.keys()),\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f&quot;{node_type}_call_inputs&quot;:&nbsp;call_data,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f&quot;{node_type}_variables&quot;:&nbsp;node_variables,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f&quot;{node_type}_decorators&quot;:&nbsp;list(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ast.unparse(decorator)&nbsp;for&nbsp;decorator&nbsp;in&nbsp;node.decorator_list}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;node.decorator_list\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;set()\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;),\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f&quot;{node_type}_annotations&quot;:&nbsp;list(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ast.unparse(subnode.annotation)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;subnode&nbsp;in&nbsp;node_walk\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(subnode,&nbsp;ast.AnnAssign)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;subnode.annotation&nbsp;is&nbsp;not&nbsp;None\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;),\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f&quot;{node_type}_properties&quot;:&nbsp;list(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ast.unparse(subnode)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;subnode&nbsp;in&nbsp;node_walk\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(subnode,&nbsp;ast.Attribute)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;isinstance(subnode.ctx,&nbsp;ast.Store)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;),\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;node_type&nbsp;in&nbsp;[&quot;class&quot;,&nbsp;&quot;method&quot;]:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node_type&nbsp;==&nbsp;&quot;method&quot;&nbsp;and&nbsp;self.current_class\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;):&nbsp;&nbsp;#&nbsp;find&nbsp;attributes&nbsp;defined&nbsp;as&nbsp;self.attribute\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attributes&nbsp;=&nbsp;[\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target.attr\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;subnode&nbsp;in&nbsp;node_walk\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(subnode,&nbsp;ast.Assign)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;target&nbsp;in&nbsp;subnode.targets\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(target,&nbsp;ast.Attribute)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;isinstance(target.value,&nbsp;ast.Name)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;target.value.id&nbsp;==&nbsp;&quot;self&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class_attributes&nbsp;=&nbsp;self.classes[self.current_class].setdefault(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;class_attributes&quot;,&nbsp;[]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class_attributes&nbsp;+=&nbsp;attributes\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;node_type&nbsp;==&nbsp;&quot;class&quot;:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;details.update(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;class_attributes&quot;:&nbsp;[\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target.attr\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;subnode&nbsp;in&nbsp;node.body\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(subnode,&nbsp;ast.Assign)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;target&nbsp;in&nbsp;subnode.targets\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(target,&nbsp;ast.Attribute)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;class_methods&quot;:&nbsp;[\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subnode.name\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;subnode&nbsp;in&nbsp;node.body\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(subnode,&nbsp;ast.FunctionDef)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;class_inheritance&quot;:&nbsp;[ast.unparse(base)&nbsp;for&nbsp;base&nbsp;in&nbsp;node.bases]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;node.bases\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;[],\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;class_static_methods&quot;:&nbsp;[\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subnode.name\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;subnode&nbsp;in&nbsp;node.body\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(subnode,&nbsp;ast.FunctionDef)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;any(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isinstance(decorator,&nbsp;ast.Name)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;decorator.id&nbsp;==&nbsp;&quot;staticmethod&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;decorator&nbsp;in&nbsp;subnode.decorator_list\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;details\n\n&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;analyze(self,&nbsp;node:&nbsp;ast.AST)&nbsp;-&gt;&nbsp;None:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Traverse&nbsp;the&nbsp;AST,&nbsp;list&nbsp;all&nbsp;nodes,&nbsp;and&nbsp;populate&nbsp;\&#x27;file_info\&#x27;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node:&nbsp;ast.AST:&nbsp;The&nbsp;node&nbsp;to&nbsp;analyze.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Traverse&nbsp;the&nbsp;AST&nbsp;to&nbsp;capture&nbsp;various&nbsp;code&nbsp;details\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.visit(node)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node_walk&nbsp;=&nbsp;list(ast.walk(node))\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_dependencies&nbsp;=&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alias.name\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;subnode&nbsp;in&nbsp;node_walk\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(subnode,&nbsp;ast.Import)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;alias&nbsp;in&nbsp;subnode.names\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;|&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subnode.module\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;subnode&nbsp;in&nbsp;node_walk\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(subnode,&nbsp;ast.ImportFrom)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function_defs&nbsp;=&nbsp;[\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func_name:&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;inputs&quot;:&nbsp;details[&quot;function_inputs&quot;],\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;calls&quot;:&nbsp;details[&quot;function_calls&quot;],\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;call_inputs&quot;:&nbsp;details[&quot;function_call_inputs&quot;],\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;returns&quot;:&nbsp;details[&quot;function_returns&quot;],\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;func_name,&nbsp;details&nbsp;in&nbsp;self.functions.items()\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class_defs&nbsp;=&nbsp;[\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class_name:&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;method_defs&quot;:&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method_name[len(&quot;class_method_&quot;)&nbsp;:]:&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;inputs&quot;:&nbsp;details[&quot;method_inputs&quot;],\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;calls&quot;:&nbsp;details[&quot;method_calls&quot;],\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;call_inputs&quot;:&nbsp;details[&quot;method_call_inputs&quot;],\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;returns&quot;:&nbsp;details[&quot;method_returns&quot;],\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;method_name,&nbsp;details&nbsp;in&nbsp;class_details.items()\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;method_name.startswith(&quot;class_method_&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;class_name,&nbsp;class_details&nbsp;in&nbsp;self.classes.items()\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.file_info&nbsp;=&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;file_code&quot;:&nbsp;self.code,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;file_ast&quot;:&nbsp;node,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;file_dependencies&quot;:&nbsp;list(file_dependencies),\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;file_functions&quot;:&nbsp;list(self.functions.keys()),\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;file_classes&quot;:&nbsp;list(self.classes.keys()),\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;file_constants&quot;:&nbsp;self.constants,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;file_summary&quot;:&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;dependencies&quot;:&nbsp;list(file_dependencies),\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;function_defs&quot;:&nbsp;function_defs,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;class_defs&quot;:&nbsp;class_defs,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;file_code_simplified&quot;:&nbsp;remove_docstring(ast.unparse(node),&nbsp;self.tree),\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n\n\ndef&nbsp;get_python_file_details(file_path:&nbsp;str)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;Union[Dict,&nbsp;str]]:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Extract&nbsp;details&nbsp;from&nbsp;a&nbsp;Python&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path:&nbsp;str:&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dict[str,&nbsp;Union[Dict,&nbsp;str]]:&nbsp;The&nbsp;details&nbsp;extracted&nbsp;from&nbsp;the&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;try:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;open(file_path,&nbsp;&quot;r&quot;,&nbsp;encoding=&quot;utf-8&quot;,&nbsp;errors=&quot;ignore&quot;)&nbsp;as&nbsp;f:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code&nbsp;=&nbsp;f.read()\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tree&nbsp;=&nbsp;ast.parse(code)\n&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;(PermissionError,&nbsp;SyntaxError,&nbsp;IOError)&nbsp;as&nbsp;e:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.warning(f&quot;{e}&nbsp;error&nbsp;in&nbsp;file:&nbsp;{file_path}&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None\n\n&nbsp;&nbsp;&nbsp;&nbsp;visitor&nbsp;=&nbsp;CodeVisitor(code,&nbsp;tree)\n&nbsp;&nbsp;&nbsp;&nbsp;visitor.analyze(tree)\n&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;=&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;file_info&quot;:&nbsp;visitor.file_info,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;functions&quot;:&nbsp;visitor.functions,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;classes&quot;:&nbsp;visitor.classes,\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;get&nbsp;code&nbsp;graph&nbsp;items&nbsp;and&nbsp;add&nbsp;to&nbsp;file_details\n&nbsp;&nbsp;&nbsp;&nbsp;file_summary&nbsp;=&nbsp;file_details[&quot;file_info&quot;][&quot;file_summary&quot;]\n&nbsp;&nbsp;&nbsp;&nbsp;file_ast&nbsp;=&nbsp;file_details[&quot;file_info&quot;][&quot;file_ast&quot;]\n&nbsp;&nbsp;&nbsp;&nbsp;entire_code_graph,&nbsp;control_flow_structure,&nbsp;plant_uml&nbsp;=&nbsp;get_code_graph(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_summary,&nbsp;file_ast\n&nbsp;&nbsp;&nbsp;&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;file_details[&quot;file_info&quot;][&quot;entire_code_graph&quot;]&nbsp;=&nbsp;entire_code_graph\n&nbsp;&nbsp;&nbsp;&nbsp;file_details[&quot;file_info&quot;][&quot;control_flow_structure&quot;]&nbsp;=&nbsp;control_flow_structure\n&nbsp;&nbsp;&nbsp;&nbsp;file_details[&quot;file_info&quot;][&quot;plant_uml&quot;]&nbsp;=&nbsp;plant_uml\n&nbsp;&nbsp;&nbsp;&nbsp;file_details[&quot;file_info&quot;][&quot;file_summary&quot;]&nbsp;=&nbsp;json.dumps(file_summary).replace(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\&#x27;&quot;\&#x27;,&nbsp;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;del&nbsp;file_details[&quot;file_info&quot;][&quot;file_ast&quot;]\n\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;file_details\n\n```&#x27;}]</td><td>22698</td><td>py2dataset/get_python_file_details.py</td></tr><tr><td>[{&#x27;from&#x27;:&nbsp;&#x27;system&#x27;,&nbsp;&#x27;value&#x27;:&nbsp;&quot;code&nbsp;documentation:&nbsp;1.&nbsp;Overview&nbsp;&amp;&nbsp;Processing&nbsp;Approach&nbsp;of&nbsp;py2dataset.py&nbsp;Module:\nThe&nbsp;py2dataset.py&nbsp;module&nbsp;is&nbsp;designed&nbsp;for&nbsp;generating,&nbsp;saving,&nbsp;and&nbsp;returning&nbsp;datasets&nbsp;containing&nbsp;responses&nbsp;to&nbsp;questions&nbsp;about&nbsp;Python&nbsp;codes&nbsp;within&nbsp;a&nbsp;given&nbsp;directory&nbsp;using&nbsp;specified&nbsp;parameters.&nbsp;It&nbsp;consists&nbsp;of&nbsp;multiple&nbsp;functions&nbsp;that&nbsp;perform&nbsp;various&nbsp;tasks&nbsp;such&nbsp;as&nbsp;processing&nbsp;single&nbsp;Python&nbsp;files,&nbsp;handling&nbsp;GitHub&nbsp;repositories&nbsp;cloning,&nbsp;retrieving&nbsp;user&nbsp;inputs&nbsp;through&nbsp;command-line&nbsp;arguments,&nbsp;and&nbsp;managing&nbsp;logging&nbsp;levels.&nbsp;The&nbsp;primary&nbsp;function&nbsp;is&nbsp;py2dataset(),&nbsp;which&nbsp;generates&nbsp;datasets&nbsp;by&nbsp;iterating&nbsp;over&nbsp;Python&nbsp;files&nbsp;in&nbsp;a&nbsp;given&nbsp;directory&nbsp;or&nbsp;GitHub&nbsp;repository&nbsp;and&nbsp;calling&nbsp;process_single_python_file()&nbsp;for&nbsp;each&nbsp;file&nbsp;if&nbsp;required&nbsp;processing&nbsp;power&nbsp;constraints&nbsp;permit&nbsp;(default&nbsp;single&nbsp;multiprocessing&nbsp;is&nbsp;enabled&nbsp;upon&nbsp;utilizing&nbsp;language&nbsp;modeling&nbsp;capabilities).&nbsp;After&nbsp;all&nbsp;executions&nbsp;are&nbsp;done,&nbsp;the&nbsp;combined&nbsp;instruction&nbsp;data&nbsp;saved&nbsp;under&nbsp;&#x27;*.py.instruct.json&#x27;&nbsp;formats&nbsp;gets&nbsp;assembled&nbsp;via&nbsp;combine_json_files().&nbsp;Processing&nbsp;of&nbsp;each&nbsp;individual&nbsp;Python&nbsp;code&nbsp;relies&nbsp;on&nbsp;functions&nbsp;process_single_python_file(),&nbsp;fetching&nbsp;configurations,&nbsp;analyzing&nbsp;code&nbsp;features&nbsp;and&nbsp;purpose&nbsp;responses&nbsp;by&nbsp;either&nbsp;relying&nbsp;upon&nbsp;input&nbsp;Model&nbsp;(py2dataset_model_config),&nbsp;Large&nbsp;Language&nbsp;Model&nbsp;from&nbsp;the&nbsp;supplied&nbsp;py2dataset_model_config&nbsp;file,&nbsp;or&nbsp;both.\n\n2.&nbsp;API&nbsp;Signatures&nbsp;&amp;&nbsp;Functional&nbsp;Details:\na)&nbsp;process_single_python_file(python_pathname,&nbsp;relative_path,&nbsp;output_dir,&nbsp;model_config_pathname,&nbsp;questions,&nbsp;use_llm,&nbsp;model_config,&nbsp;detailed):&nbsp;This&nbsp;function&nbsp;processes&nbsp;an&nbsp;individual&nbsp;Python&nbsp;file&nbsp;to&nbsp;generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.&nbsp;It&nbsp;accepts&nbsp;arguments&nbsp;representing&nbsp;paths&nbsp;to&nbsp;the&nbsp;Python&nbsp;file,&nbsp;output&nbsp;directory,&nbsp;model&nbsp;configuration&nbsp;file&nbsp;path,&nbsp;dictionary&nbsp;of&nbsp;questions,&nbsp;LLM&nbsp;usage&nbsp;flag,&nbsp;model&nbsp;configuration&nbsp;dictionary&nbsp;(optional),&nbsp;and&nbsp;detailed&nbsp;analysis&nbsp;preference&nbsp;(default&nbsp;False).&nbsp;If&nbsp;&#x27;model_config&#x27;&nbsp;is&nbsp;unavailable&nbsp;but&nbsp;&#x27;use_llm&#x27;&nbsp;is&nbsp;True,&nbsp;it&nbsp;loads&nbsp;an&nbsp;LLM&nbsp;config&nbsp;using&nbsp;get_model().&nbsp;It&nbsp;collects&nbsp;Python&nbsp;file&nbsp;details&nbsp;via&nbsp;get_python_file_details()&nbsp;and&nbsp;generates&nbsp;datasets&nbsp;with&nbsp;get_python_datasets(),&nbsp;saving&nbsp;them&nbsp;in&nbsp;output_dir&nbsp;using&nbsp;save_python_data().&nbsp;Returns&nbsp;None.\nb)&nbsp;py2dataset(start=&#x27;&#x27;,&nbsp;output_dir=&#x27;&#x27;,&nbsp;questions_pathname=&#x27;&#x27;,&nbsp;model_config_pathname=&#x27;&#x27;,&nbsp;use_llm=False,&nbsp;quiet=False,&nbsp;single_process=False,&nbsp;detailed=False,&nbsp;html=False,&nbsp;skip_regen=False):&nbsp;Generates&nbsp;datasets&nbsp;iterating&nbsp;over&nbsp;Python&nbsp;files&nbsp;within&nbsp;specified&nbsp;directories&nbsp;(start&nbsp;GitHub&nbsp;repo&nbsp;default&nbsp;is&nbsp;current&nbsp;working&nbsp;dir&nbsp;or&nbsp;cloned&nbsp;from&nbsp;input&nbsp;URL&nbsp;if&nbsp;valid).&nbsp;It&nbsp;manages&nbsp;logging&nbsp;levels&nbsp;based&nbsp;on&nbsp;&#x27;quiet&#x27;,&nbsp;retrieves&nbsp;questions&nbsp;dictionary&nbsp;from&nbsp;questions&nbsp;file&nbsp;pathname&nbsp;(&#x27;py2dataset_questions.json&#x27;),&nbsp;searches&nbsp;for&nbsp;Python&nbsp;files&nbsp;excluding&nbsp;hidden&nbsp;ones,&nbsp;and&nbsp;spawns&nbsp;child&nbsp;processes&nbsp;to&nbsp;process&nbsp;single_python_file()&nbsp;if&nbsp;needed&nbsp;configuration&nbsp;params&nbsp;permit&nbsp;multitasking;&nbsp;combination&nbsp;occurs&nbsp;under&nbsp;combine_json_files(),&nbsp;potentially&nbsp;transforming&nbsp;outcomes&nbsp;in&nbsp;HTML&nbsp;(flagged&nbsp;via&nbsp;html=True).&nbsp;Finally&nbsp;it&nbsp;renders&nbsp;&#x27;combine_json_files()&#x27;,&nbsp;parametric&nbsp;QuestionsDict&nbsp;and&nbsp;instruct&nbsp;data&nbsp;structure&nbsp;from&nbsp;JSON&nbsp;file&nbsp;collections.\nc)&nbsp;clone_github_repo(url):&nbsp;Retrieves&nbsp;the&nbsp;cloned&nbsp;repository&nbsp;path&nbsp;or&nbsp;updates&nbsp;the&nbsp;existing&nbsp;changes&nbsp;at&nbsp;current&nbsp;directory&nbsp;with&nbsp;specified&nbsp;GitHub&nbsp;URL,&nbsp;verifying&nbsp;connectivity&nbsp;initially&nbsp;before&nbsp;attempting&nbsp;actions&nbsp;using&nbsp;&#x27;git&#x27;&nbsp;library&nbsp;calls;&nbsp;generates&nbsp;a&nbsp;unique&nbsp;repository&nbsp;folder&nbsp;under&nbsp;&#x27;githubrepos&#x27;.&nbsp;Returns&nbsp;local&nbsp;repository&nbsp;path.\nd)&nbsp;get_bool_from_input(input_str,&nbsp;current_value):&nbsp;Interacts&nbsp;with&nbsp;users&nbsp;to&nbsp;alter&nbsp;boolean&nbsp;parameters&nbsp;by&nbsp;prompting&nbsp;inputs&nbsp;against&nbsp;existing&nbsp;values&nbsp;in&nbsp;py2dataset&nbsp;CLI&nbsp;arguments&nbsp;and&nbsp;lowers&nbsp;string&nbsp;entries.&nbsp;Input&nbsp;returns&nbsp;corresponding&nbsp;Boolean&nbsp;or&nbsp;holds&nbsp;present&nbsp;setting&nbsp;as&nbsp;&#x27;current_value&#x27;.\ne)&nbsp;main():&nbsp;Enacts&nbsp;command-line&nbsp;interaction;&nbsp;interprets&nbsp;given&nbsp;parameters&nbsp;into&nbsp;defaults&nbsp;for&nbsp;each&nbsp;flag&nbsp;if&nbsp;provided&nbsp;or&nbsp;seeks&nbsp;user&nbsp;confirmation,&nbsp;adheres&nbsp;to&nbsp;user&nbsp;responses&nbsp;while&nbsp;maintaining&nbsp;initial&nbsp;conditions,&nbsp;ensures&nbsp;repository&nbsp;validation&nbsp;and&nbsp;clones&nbsp;when&nbsp;GitHub&nbsp;URL&nbsp;input&nbsp;detected.&nbsp;It&nbsp;subsequently&nbsp;executes&nbsp;py2dataset()&nbsp;after&nbsp;updating&nbsp;inputs&nbsp;(when&nbsp;necessary),&nbsp;prints&nbsp;warnings/errors&nbsp;in&nbsp;invalid&nbsp;situations,&nbsp;or&nbsp;prompts&nbsp;usage&nbsp;guide&nbsp;via&nbsp;&#x27;sys.exit&#x27;.\n\n3.&nbsp;Functional&nbsp;Requirements&nbsp;&amp;&nbsp;Behavior&nbsp;Insights:\na)&nbsp;process_single_python_file():&nbsp;Handles&nbsp;single&nbsp;Python&nbsp;file&nbsp;processing&nbsp;with&nbsp;LLM&nbsp;support&nbsp;if&nbsp;enabled&nbsp;and&nbsp;single&nbsp;multiprocessing&nbsp;mode;&nbsp;otherwise&nbsp;processes&nbsp;all&nbsp;files&nbsp;in&nbsp;one&nbsp;go.\nb)&nbsp;py2dataset():&nbsp;Iterates&nbsp;through&nbsp;Python&nbsp;files,&nbsp;excluding&nbsp;hidden&nbsp;ones&nbsp;(_pycache__&nbsp;or&nbsp;__init__.py),&nbsp;manages&nbsp;logging&nbsp;levels&nbsp;for&nbsp;quiet&nbsp;operations,&nbsp;retrieves&nbsp;questions&nbsp;dictionary&nbsp;from&nbsp;pathname,&nbsp;clones&nbsp;GitHub&nbsp;repositories&nbsp;if&nbsp;URL&nbsp;input&nbsp;detected&nbsp;and&nbsp;sets&nbsp;default&nbsp;paths.&nbsp;If&nbsp;multiple&nbsp;processes&nbsp;aren&#x27;t&nbsp;enabled&nbsp;with&nbsp;LLM&nbsp;use,&nbsp;executes&nbsp;process_single_python_file()&nbsp;per&nbsp;file&nbsp;to&nbsp;prevent&nbsp;memory&nbsp;exhaustion;&nbsp;else&nbsp;it&nbsp;does&nbsp;them&nbsp;simultaneously&nbsp;through&nbsp;single&nbsp;processing.&nbsp;Combines&nbsp;all&nbsp;&#x27;*.py.instruct.json&#x27;.\nc)&nbsp;clone_github_repo():&nbsp;Controls&nbsp;repository&nbsp;operations&nbsp;if&nbsp;input&nbsp;is&nbsp;URL&nbsp;and&nbsp;prepares&nbsp;the&nbsp;working&nbsp;directory&nbsp;if&nbsp;current&nbsp;directory&nbsp;suits&nbsp;starting&nbsp;condition&nbsp;checks;&nbsp;updates&nbsp;git&nbsp;settings&nbsp;or&nbsp;warns&nbsp;if&nbsp;unavailable&nbsp;with&nbsp;logs,&nbsp;and&nbsp;finally&nbsp;yields&nbsp;cloned&nbsp;repository&nbsp;path&nbsp;after&nbsp;performing&nbsp;fetches&nbsp;if&nbsp;any&nbsp;recent&nbsp;commits&nbsp;present.\nd)&nbsp;get_bool_from_input():&nbsp;Acts&nbsp;as&nbsp;user&nbsp;query&nbsp;receiver&nbsp;in&nbsp;case&nbsp;&#x27;Interactive&nbsp;Mode&#x27;,&nbsp;retrieving&nbsp;alternative&nbsp;settings&nbsp;through&nbsp;interactive&nbsp;console&nbsp;interactions&nbsp;lowering&nbsp;the&nbsp;inputs&nbsp;if&nbsp;not&nbsp;satisfying&nbsp;Booleans&nbsp;or&nbsp;preserves&nbsp;initial&nbsp;state.\ne)&nbsp;main():&nbsp;Receives&nbsp;command-line&nbsp;arguments,&nbsp;sets&nbsp;defaults,&nbsp;checks&nbsp;repository&nbsp;URL&nbsp;validity&nbsp;and&nbsp;initiates&nbsp;py2dataset()&nbsp;execution&nbsp;upon&nbsp;valid&nbsp;inputs&nbsp;or&nbsp;prompts&nbsp;help&nbsp;messages&nbsp;when&nbsp;required.\n\n4.&nbsp;Important&nbsp;Variables:\na)&nbsp;&#x27;use_llm&#x27;,&nbsp;&#x27;output_dir&#x27;,&nbsp;&#x27;model_config_pathname&#x27;,&nbsp;&#x27;detailed&#x27;,&nbsp;&#x27;proc&#x27;:&nbsp;Parameters&nbsp;involved&nbsp;in&nbsp;process_single_python_file(),&nbsp;controls&nbsp;LLM&nbsp;use,&nbsp;output&nbsp;directory&nbsp;path,&nbsp;model&nbsp;configuration&nbsp;file&nbsp;path,&nbsp;child&nbsp;process&nbsp;handling&nbsp;for&nbsp;Python&nbsp;files&nbsp;processing.\nb)&nbsp;&#x27;start&#x27;,&nbsp;&#x27;questions_pathname&#x27;,&nbsp;&#x27;html&#x27;,&nbsp;&#x27;skip_regen&#x27;:&nbsp;py2dataset()&nbsp;parameters;&nbsp;starting&nbsp;directory&nbsp;(default&nbsp;current&nbsp;working),&nbsp;questions&nbsp;JSON&nbsp;pathname,&nbsp;HTML&nbsp;output&nbsp;flag,&nbsp;skipping&nbsp;regeneration&nbsp;of&nbsp;existing&nbsp;instruct.json&nbsp;files&nbsp;flag.\nc)&nbsp;&#x27;params&#x27;:&nbsp;Aggregates&nbsp;all&nbsp;arguments&nbsp;for&nbsp;both&nbsp;process_single_python_file()&nbsp;and&nbsp;py2dataset(),&nbsp;dynamically&nbsp;altered&nbsp;during&nbsp;user&nbsp;inputs&nbsp;in&nbsp;main().\nd)&nbsp;&#x27;instruct_pathname&#x27;,&nbsp;&#x27;base_pathname&#x27;,&nbsp;&#x27;repo_name&#x27;,&nbsp;&#x27;command&#x27;,&nbsp;&#x27;value_segment&#x27;,&nbsp;&#x27;githubrepos_dir&#x27;:&nbsp;Temporary&nbsp;variables&nbsp;within&nbsp;py2dataset()&nbsp;and&nbsp;clone_github_repo();&nbsp;&#x27;instruct_pathname&#x27;&nbsp;stores&nbsp;Python&nbsp;file&nbsp;path&nbsp;with&nbsp;suffix,&nbsp;&#x27;base_pathname&#x27;&nbsp;forms&nbsp;local&nbsp;repository&nbsp;location&nbsp;from&nbsp;relative&nbsp;paths,&nbsp;&#x27;repo_name&#x27;&nbsp;derives&nbsp;GitHub&nbsp;repo&nbsp;name,&nbsp;&#x27;command&#x27;&nbsp;is&nbsp;a&nbsp;git&nbsp;fetch&nbsp;command,&nbsp;&#x27;value_segment&#x27;&nbsp;splits&nbsp;input&nbsp;strings&nbsp;into&nbsp;tokens.\ne)&nbsp;&#x27;python_pathname&#x27;,&nbsp;&#x27;relative_path&#x27;,&nbsp;&#x27;file_details&#x27;,&nbsp;&#x27;model_config&#x27;,&nbsp;&#x27;instruct_data&#x27;:&nbsp;Intermediate&nbsp;results&nbsp;or&nbsp;arguments&nbsp;for&nbsp;process_single_python_file().&quot;},&nbsp;{&#x27;from&#x27;:&nbsp;&#x27;human&#x27;,&nbsp;&#x27;value&#x27;:&nbsp;&#x27;Output&nbsp;the&nbsp;Python&nbsp;code&nbsp;described&nbsp;by&nbsp;the&nbsp;code&nbsp;documentation.&#x27;},&nbsp;{&#x27;from&#x27;:&nbsp;&#x27;gpt&#x27;,&nbsp;&#x27;value&#x27;:&nbsp;&#x27;```python\n&quot;&quot;&quot;\nFor&nbsp;each&nbsp;Python&nbsp;file&nbsp;within&nbsp;a&nbsp;given&nbsp;directory,&nbsp;this&nbsp;module&nbsp;is&nbsp;designed&nbsp;to&nbsp;generate,&nbsp;save,&nbsp;\nand&nbsp;return&nbsp;datasets&nbsp;that&nbsp;include&nbsp;responses&nbsp;to&nbsp;questions&nbsp;about&nbsp;the&nbsp;code.&nbsp;\nRequirements:\n[req00]&nbsp;The&nbsp;process_single_python_file&nbsp;function&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;parameters&nbsp;for&nbsp;Python&nbsp;file&nbsp;path,&nbsp;start&nbsp;directory,&nbsp;model&nbsp;config&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pathname,&nbsp;questions&nbsp;dict,&nbsp;use&nbsp;of&nbsp;LLM,&nbsp;and&nbsp;output&nbsp;dir.\n&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;If&nbsp;\&#x27;use_llm\&#x27;&nbsp;is&nbsp;True,&nbsp;use&nbsp;\&#x27;get_model\&#x27;&nbsp;to&nbsp;instantiate&nbsp;LLM&nbsp;model&nbsp;config.\n&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Use&nbsp;\&#x27;get_python_file_details\&#x27;&nbsp;to&nbsp;retrieve&nbsp;Python&nbsp;file&nbsp;info.\n&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Use&nbsp;\&#x27;get_python_datasets\&#x27;&nbsp;to&nbsp;acquire&nbsp;instruct.json&nbsp;datasets.\n&nbsp;&nbsp;&nbsp;&nbsp;e.&nbsp;Use&nbsp;\&#x27;save_python_data\&#x27;&nbsp;to&nbsp;store&nbsp;file&nbsp;details&nbsp;and&nbsp;instruct.json&nbsp;data.\n[req01]&nbsp;The&nbsp;py2dataset&nbsp;function&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;parameters&nbsp;for&nbsp;start&nbsp;directory,&nbsp;output&nbsp;dir,&nbsp;questions&nbsp;path,&nbsp;model\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;config&nbsp;path,&nbsp;use&nbsp;of&nbsp;LLM,&nbsp;and&nbsp;quiet&nbsp;mode.\n&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Adjust&nbsp;logging&nbsp;level&nbsp;based&nbsp;on&nbsp;\&#x27;quiet\&#x27;.\n&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Use&nbsp;current&nbsp;working&nbsp;dir&nbsp;if&nbsp;no&nbsp;valid&nbsp;start&nbsp;dir&nbsp;is&nbsp;provided.\n&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Get&nbsp;output&nbsp;dir&nbsp;with&nbsp;\&#x27;get_output_dir\&#x27;.\n&nbsp;&nbsp;&nbsp;&nbsp;e.&nbsp;Retrieve&nbsp;questions&nbsp;dict&nbsp;with&nbsp;\&#x27;get_questions\&#x27;.\n&nbsp;&nbsp;&nbsp;&nbsp;f.&nbsp;Search&nbsp;for&nbsp;Python&nbsp;files&nbsp;using&nbsp;\&#x27;rglob\&#x27;,&nbsp;excluding&nbsp;those&nbsp;starting&nbsp;with&nbsp;&quot;_&quot;.\n&nbsp;&nbsp;&nbsp;&nbsp;g.&nbsp;For&nbsp;each&nbsp;Python&nbsp;file,&nbsp;spawn&nbsp;a&nbsp;child&nbsp;process&nbsp;with&nbsp;\&#x27;process_single_python_file\&#x27;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;get&nbsp;file&nbsp;details&nbsp;and&nbsp;instruct.json&nbsp;data,&nbsp;if&nbsp;single_process&nbsp;is&nbsp;False.\n&nbsp;&nbsp;&nbsp;&nbsp;h.&nbsp;Combine&nbsp;instruct.json&nbsp;files&nbsp;with&nbsp;\&#x27;combine_json_files\&#x27;.\n&nbsp;&nbsp;&nbsp;&nbsp;i.&nbsp;Return&nbsp;datasets.\n[req02]&nbsp;The&nbsp;clone_github_repo&nbsp;function&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;a&nbsp;url.\n&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Clone&nbsp;repository&nbsp;or&nbsp;fetch&nbsp;the&nbsp;latest&nbsp;changes.\n&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Return&nbsp;local&nbsp;repository&nbsp;path.\n[req03]&nbsp;The&nbsp;main&nbsp;function&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;and&nbsp;process&nbsp;command-line&nbsp;args.\n&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Determine&nbsp;py2dataset&nbsp;parameters&nbsp;based&nbsp;on&nbsp;processed&nbsp;arguments.\n&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Call&nbsp;py2dataset&nbsp;with&nbsp;derived&nbsp;parameters.\n&quot;&quot;&quot;\nimport&nbsp;sys\nimport&nbsp;logging\nfrom&nbsp;pathlib&nbsp;import&nbsp;Path\nfrom&nbsp;typing&nbsp;import&nbsp;Dict,&nbsp;List\nfrom&nbsp;multiprocessing&nbsp;import&nbsp;Process\nimport&nbsp;subprocess\nimport&nbsp;os\nimport&nbsp;git\nimport&nbsp;shlex\n\nfrom&nbsp;get_python_file_details&nbsp;import&nbsp;get_python_file_details\nfrom&nbsp;get_python_datasets&nbsp;import&nbsp;get_python_datasets\nfrom&nbsp;get_params&nbsp;import&nbsp;(\n&nbsp;&nbsp;&nbsp;&nbsp;get_questions,\n&nbsp;&nbsp;&nbsp;&nbsp;get_model,\n&nbsp;&nbsp;&nbsp;&nbsp;get_output_dir,\n&nbsp;&nbsp;&nbsp;&nbsp;get_start_dir,\n)\nfrom&nbsp;save_output&nbsp;import&nbsp;combine_json_files,&nbsp;save_python_data\n\n\ndef&nbsp;process_single_python_file(\n&nbsp;&nbsp;&nbsp;&nbsp;python_pathname:&nbsp;str,\n&nbsp;&nbsp;&nbsp;&nbsp;relative_path:&nbsp;Path,\n&nbsp;&nbsp;&nbsp;&nbsp;output_dir:&nbsp;str,\n&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname:&nbsp;str,\n&nbsp;&nbsp;&nbsp;&nbsp;questions:&nbsp;Dict,\n&nbsp;&nbsp;&nbsp;&nbsp;use_llm:&nbsp;bool,\n&nbsp;&nbsp;&nbsp;&nbsp;model_config:&nbsp;Dict,\n&nbsp;&nbsp;&nbsp;&nbsp;detailed:&nbsp;bool,\n)&nbsp;-&gt;&nbsp;None:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Processes&nbsp;a&nbsp;single&nbsp;Python&nbsp;file&nbsp;to&nbsp;generate&nbsp;question-answer&nbsp;pairs&nbsp;and&nbsp;instructions.\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;python_pathname&nbsp;(str):&nbsp;Path&nbsp;to&nbsp;the&nbsp;Python&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start&nbsp;(str):&nbsp;Starting&nbsp;directory&nbsp;for&nbsp;Python&nbsp;files.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str):&nbsp;Path&nbsp;and&nbsp;filename&nbsp;of&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions&nbsp;(Dict):&nbsp;Dictionary&nbsp;of&nbsp;questions&nbsp;to&nbsp;answer&nbsp;about&nbsp;the&nbsp;Python&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool):&nbsp;Use&nbsp;llm&nbsp;to&nbsp;answer&nbsp;code&nbsp;purpose&nbsp;question.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config&nbsp;(Dict):&nbsp;Configuration&nbsp;dictionary&nbsp;for&nbsp;the&nbsp;LLM.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;detailed&nbsp;(bool):&nbsp;Perform&nbsp;detailed&nbsp;analysis&nbsp;if&nbsp;True.\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&quot;Processing&nbsp;file:&nbsp;{python_pathname}&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;model_config&nbsp;is&nbsp;None&nbsp;and&nbsp;use_llm:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config&nbsp;=&nbsp;get_model(model_config_pathname)\n\n&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;=&nbsp;get_python_file_details(python_pathname)\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;file_details:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.error(f&quot;Failed&nbsp;to&nbsp;get&nbsp;file&nbsp;details&nbsp;for&nbsp;{python_pathname}&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return\n\n&nbsp;&nbsp;&nbsp;&nbsp;instruct_data&nbsp;=&nbsp;get_python_datasets(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;python_pathname,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;relative_path,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;detailed,\n&nbsp;&nbsp;&nbsp;&nbsp;)\n\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;instruct_data:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;save_python_data(file_details,&nbsp;instruct_data,&nbsp;relative_path,&nbsp;output_dir)\n&nbsp;&nbsp;&nbsp;&nbsp;else:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.error(f&quot;Failed&nbsp;getting&nbsp;{python_pathname}&nbsp;dataset&quot;)\n\n&nbsp;&nbsp;&nbsp;&nbsp;del&nbsp;instruct_data,&nbsp;file_details,&nbsp;model_config\n\n\ndef&nbsp;py2dataset(\n&nbsp;&nbsp;&nbsp;&nbsp;start:&nbsp;str&nbsp;=&nbsp;&quot;&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;output_dir:&nbsp;str&nbsp;=&nbsp;&quot;&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname:&nbsp;str&nbsp;=&nbsp;&quot;&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname:&nbsp;str&nbsp;=&nbsp;&quot;&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;use_llm:&nbsp;bool&nbsp;=&nbsp;False,\n&nbsp;&nbsp;&nbsp;&nbsp;quiet:&nbsp;bool&nbsp;=&nbsp;False,\n&nbsp;&nbsp;&nbsp;&nbsp;single_process:&nbsp;bool&nbsp;=&nbsp;False,\n&nbsp;&nbsp;&nbsp;&nbsp;detailed:&nbsp;bool&nbsp;=&nbsp;False,\n&nbsp;&nbsp;&nbsp;&nbsp;html:&nbsp;bool&nbsp;=&nbsp;False,\n&nbsp;&nbsp;&nbsp;&nbsp;skip_regen:&nbsp;bool&nbsp;=&nbsp;False,\n)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;List[Dict]]:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Generates&nbsp;datasets&nbsp;by&nbsp;processing&nbsp;Python&nbsp;files&nbsp;within&nbsp;a&nbsp;specified&nbsp;directory.\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start&nbsp;(str,&nbsp;optional):&nbsp;Starting&nbsp;directory&nbsp;for&nbsp;Python&nbsp;files&nbsp;or&nbsp;GitHub&nbsp;repository&nbsp;Python&nbsp;files.&nbsp;Default:&nbsp;current&nbsp;working&nbsp;directory.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str,&nbsp;optional):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.&nbsp;Default:&nbsp;./dataset/.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;and&nbsp;filename&nbsp;of&nbsp;the&nbsp;questions&nbsp;file.&nbsp;Default:&nbsp;./py2dataset_questions.json.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;and&nbsp;filename&nbsp;of&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.&nbsp;Default:&nbsp;./py2dataset_model_config.yaml.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use_llm&nbsp;(bool,&nbsp;optional):&nbsp;Use&nbsp;llm&nbsp;to&nbsp;answer&nbsp;code&nbsp;purpose&nbsp;question.&nbsp;Default:&nbsp;False.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quiet&nbsp;(bool,&nbsp;optional):&nbsp;Limit&nbsp;logging&nbsp;output.&nbsp;Default:&nbsp;False.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;single_process&nbsp;(bool,&nbsp;optional):&nbsp;Use&nbsp;a&nbsp;single&nbsp;process&nbsp;to&nbsp;process&nbsp;Python&nbsp;files&nbsp;if&nbsp;--use_llm.&nbsp;Default:&nbsp;False.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;detailed&nbsp;(bool,&nbsp;optional):&nbsp;Include&nbsp;detailed&nbsp;analysis.&nbsp;Default:&nbsp;False.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;(bool,&nbsp;optional):&nbsp;Generate&nbsp;HTML&nbsp;output.&nbsp;Default:&nbsp;False.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;skip_regen&nbsp;(bool,&nbsp;optional):&nbsp;Skip&nbsp;regeneration&nbsp;of&nbsp;existing&nbsp;instruct.json&nbsp;files.&nbsp;Default:&nbsp;False.\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dict[str,&nbsp;List[Dict]]:&nbsp;Generated&nbsp;datasets.\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;quiet:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.getLogger().setLevel(logging.WARNING)\n&nbsp;&nbsp;&nbsp;&nbsp;else:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.getLogger().setLevel(logging.INFO)\n\n&nbsp;&nbsp;&nbsp;&nbsp;sys.setrecursionlimit(3000)&nbsp;&nbsp;#&nbsp;Set&nbsp;recursion&nbsp;limit&nbsp;higher&nbsp;for&nbsp;AST&nbsp;parsing\n\n&nbsp;&nbsp;&nbsp;&nbsp;model_config&nbsp;=&nbsp;None\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;use_llm&nbsp;and&nbsp;single_process:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_config&nbsp;=&nbsp;get_model(model_config_pathname)\n\n&nbsp;&nbsp;&nbsp;&nbsp;params&nbsp;=&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;python_pathname&quot;:&nbsp;&quot;&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;relative_path&quot;:&nbsp;&quot;&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;output_dir&quot;:&nbsp;get_output_dir(output_dir),\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;model_config_pathname&quot;:&nbsp;model_config_pathname,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;questions&quot;:&nbsp;get_questions(questions_pathname),\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;use_llm&quot;:&nbsp;use_llm,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;model_config&quot;:&nbsp;model_config,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;detailed&quot;:&nbsp;detailed,\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;python_pathname&nbsp;in&nbsp;Path(start).rglob(&quot;*.py&quot;):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&quot;__pycache__&quot;&nbsp;in&nbsp;python_pathname.parts:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;python_pathname.name&nbsp;==&nbsp;&quot;__init__.py&quot;:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params[&quot;python_pathname&quot;]&nbsp;=&nbsp;str(python_pathname)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params[&quot;relative_path&quot;]&nbsp;=&nbsp;Path(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;os.path.relpath(python_pathname,&nbsp;os.path.dirname(get_start_dir(start)))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;determine&nbsp;if&nbsp;corresponding&nbsp;instruct.json&nbsp;exists&nbsp;and&nbsp;skip&nbsp;if&nbsp;skip_regen\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_pathname&nbsp;=&nbsp;Path(params[&quot;output_dir&quot;])&nbsp;/&nbsp;params[&quot;relative_path&quot;]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instruct_pathname&nbsp;=&nbsp;base_pathname.with_suffix(&quot;.py.instruct.json&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;instruct_pathname.exists()&nbsp;and&nbsp;skip_regen:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;process&nbsp;each&nbsp;python&nbsp;file&nbsp;in&nbsp;a&nbsp;separate&nbsp;process&nbsp;to&nbsp;manage&nbsp;memory\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;params[&quot;model_config&quot;]&nbsp;is&nbsp;None&nbsp;and&nbsp;params[&quot;use_llm&quot;]:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc&nbsp;=&nbsp;Process(target=process_single_python_file,&nbsp;kwargs=params)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc.start()\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc.join()\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:&nbsp;&nbsp;#&nbsp;or&nbsp;process&nbsp;all&nbsp;files&nbsp;using&nbsp;use&nbsp;a&nbsp;single&nbsp;process\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process_single_python_file(**params)\n\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;combine_json_files(output_dir,&nbsp;html,&nbsp;params[&quot;questions&quot;])\n\n\ndef&nbsp;clone_github_repo(url:&nbsp;str)&nbsp;-&gt;&nbsp;str:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Clone&nbsp;repository&nbsp;or&nbsp;fetch&nbsp;the&nbsp;latest&nbsp;changes&nbsp;and&nbsp;return&nbsp;local&nbsp;repository&nbsp;path.\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url&nbsp;(str):&nbsp;The&nbsp;url&nbsp;of&nbsp;the&nbsp;github&nbsp;repository.\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;cloned&nbsp;repository.\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;try:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;command&nbsp;=&nbsp;f&quot;git&nbsp;ls-remote&nbsp;{shlex.quote(url)}&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subprocess.run(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;command,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shell=True,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check=True,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stdout=subprocess.DEVNULL,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stderr=subprocess.DEVNULL,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;repo_name&nbsp;=&nbsp;url.split(&quot;/&quot;)[-1]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;githubrepos_dir&nbsp;=&nbsp;os.path.join(os.getcwd(),&nbsp;&quot;githubrepos&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;os.makedirs(githubrepos_dir,&nbsp;exist_ok=True)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;=&nbsp;os.path.join(githubrepos_dir,&nbsp;repo_name)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;os.path.exists(path):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;git.Repo.clone_from(url,&nbsp;path)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;repo&nbsp;=&nbsp;git.Repo(path)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;repo.git.custom_environment(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GIT_SSH_COMMAND=&quot;ssh&nbsp;-o&nbsp;UserKnownHostsFile=/dev/null&nbsp;-o&nbsp;StrictHostKeyChecking=no&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;repo.git.fetch()\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default_branch&nbsp;=&nbsp;repo.head.reference.tracking_branch().remote_head\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;repo.git.reset(&quot;--hard&quot;,&nbsp;default_branch)\n&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;subprocess.CalledProcessError:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&quot;Invalid&nbsp;or&nbsp;inaccessible&nbsp;repository:&nbsp;{url}&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;=&nbsp;&quot;&quot;\n\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;path\n\n\ndef&nbsp;main():\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Command-line&nbsp;entry&nbsp;point&nbsp;for&nbsp;processing&nbsp;Python&nbsp;files&nbsp;and&nbsp;generating&nbsp;datasets.\n&nbsp;&nbsp;&nbsp;&nbsp;Optional&nbsp;command-line&nbsp;arguments:\n&nbsp;&nbsp;&nbsp;&nbsp;--start&nbsp;(str,&nbsp;optional):&nbsp;Starting&nbsp;directory&nbsp;for&nbsp;Python&nbsp;files&nbsp;or&nbsp;GitHub&nbsp;repository&nbsp;Python&nbsp;files.&nbsp;Default:&nbsp;cwd.\n&nbsp;&nbsp;&nbsp;&nbsp;--output_dir&nbsp;(str,&nbsp;optional):&nbsp;Directory&nbsp;to&nbsp;write&nbsp;the&nbsp;output&nbsp;files.&nbsp;Default:&nbsp;./dataset/.\n&nbsp;&nbsp;&nbsp;&nbsp;--questions_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;and&nbsp;filename&nbsp;of&nbsp;the&nbsp;questions&nbsp;file.&nbsp;Default:&nbsp;./py2dataset_questions.json.\n&nbsp;&nbsp;&nbsp;&nbsp;--model_config_pathname&nbsp;(str,&nbsp;optional):&nbsp;Path&nbsp;and&nbsp;filename&nbsp;of&nbsp;the&nbsp;model&nbsp;configuration&nbsp;file.&nbsp;Default:&nbsp;./py2dataset_model_config.yaml.\n&nbsp;&nbsp;&nbsp;&nbsp;--use_llm&nbsp;(bool,&nbsp;optional):&nbsp;Use&nbsp;llm&nbsp;to&nbsp;answer&nbsp;code&nbsp;purpose&nbsp;question.&nbsp;Default:&nbsp;False.\n&nbsp;&nbsp;&nbsp;&nbsp;--quiet&nbsp;(bool,&nbsp;optional):&nbsp;Limit&nbsp;logging&nbsp;output.&nbsp;Default:&nbsp;False.\n&nbsp;&nbsp;&nbsp;&nbsp;--single_process&nbsp;(bool,&nbsp;optional):&nbsp;Use&nbsp;a&nbsp;single&nbsp;process&nbsp;to&nbsp;process&nbsp;Python&nbsp;files&nbsp;if&nbsp;--use_llm.&nbsp;Default:&nbsp;False.\n&nbsp;&nbsp;&nbsp;&nbsp;--detailed&nbsp;(bool,&nbsp;optional):&nbsp;Include&nbsp;detailed&nbsp;analysis.&nbsp;Default:&nbsp;False.\n&nbsp;&nbsp;&nbsp;&nbsp;--html&nbsp;(bool,&nbsp;optional):&nbsp;Generate&nbsp;HTML&nbsp;output.&nbsp;Default:&nbsp;False.\n&nbsp;&nbsp;&nbsp;&nbsp;--I&nbsp;(str,&nbsp;optional):&nbsp;Enable&nbsp;interactive&nbsp;mode.&nbsp;Default:&nbsp;False.\n&nbsp;&nbsp;&nbsp;&nbsp;--skip_regen&nbsp;(str,&nbsp;optional):&nbsp;Skip&nbsp;regeneration&nbsp;of&nbsp;existing&nbsp;instruct.json&nbsp;files.&nbsp;Default:&nbsp;False.\n&nbsp;&nbsp;&nbsp;&nbsp;--help:&nbsp;Display&nbsp;help&nbsp;message.\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&quot;--help&quot;&nbsp;in&nbsp;sys.argv:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(__doc__)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.exit()\n\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;return&nbsp;boolean&nbsp;value&nbsp;based&nbsp;on&nbsp;the&nbsp;user&nbsp;input\n&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_bool_from_input(input_str:&nbsp;str,&nbsp;current_value:&nbsp;bool)&nbsp;-&gt;&nbsp;bool:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;input_str.lower()&nbsp;in&nbsp;[&quot;t&quot;,&nbsp;&quot;true&quot;,&nbsp;&quot;y&quot;,&nbsp;&quot;yes&quot;]:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;True\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;input_str.lower()&nbsp;in&nbsp;[&quot;f&quot;,&nbsp;&quot;false&quot;,&nbsp;&quot;n&quot;,&nbsp;&quot;no&quot;]:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;False\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;current_value\n\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Defaults\n&nbsp;&nbsp;&nbsp;&nbsp;params&nbsp;=&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;start&quot;:&nbsp;&quot;.&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;output_dir&quot;:&nbsp;&quot;./dataset/&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;questions_pathname&quot;:&nbsp;&quot;./py2dataset_questions.json&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;model_config_pathname&quot;:&nbsp;&quot;./py2dataset_model_config.yaml&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;use_llm&quot;:&nbsp;False,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;quiet&quot;:&nbsp;False,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;single_process&quot;:&nbsp;False,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;detailed&quot;:&nbsp;False,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;html&quot;:&nbsp;False,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;skip_regen&quot;:&nbsp;False,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;I&quot;:&nbsp;False,\n&nbsp;&nbsp;&nbsp;&nbsp;}\n\n&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;&quot;&nbsp;&quot;.join(sys.argv[1:])\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;arg&nbsp;in&nbsp;params:&nbsp;&nbsp;#&nbsp;parse&nbsp;command-line&nbsp;arguments\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&quot;--&quot;&nbsp;+&nbsp;arg&nbsp;in&nbsp;arg_string:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(params[arg],&nbsp;bool):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params[arg]&nbsp;=&nbsp;True\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(&quot;--&quot;&nbsp;+&nbsp;arg,&nbsp;&quot;&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value_segment&nbsp;=&nbsp;arg_string.split(&quot;--&quot;&nbsp;+&nbsp;arg&nbsp;+&nbsp;&quot;&nbsp;&quot;)[1]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params[arg]&nbsp;=&nbsp;value_segment.split(&quot;&nbsp;--&quot;)[0].strip(\&#x27;&quot;\&#x27;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg_string&nbsp;=&nbsp;arg_string.replace(&quot;--&quot;&nbsp;+&nbsp;arg&nbsp;+&nbsp;&quot;&nbsp;&quot;&nbsp;+&nbsp;params[arg],&nbsp;&quot;&quot;)\n\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;params[&quot;I&quot;]:&nbsp;&nbsp;#&nbsp;query&nbsp;user&nbsp;for&nbsp;parameters&nbsp;to&nbsp;change\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(&quot;Interactive&nbsp;mode,&nbsp;enter&nbsp;new&nbsp;values&nbsp;or&nbsp;press&nbsp;enter&nbsp;to&nbsp;keep.&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;arg&nbsp;in&nbsp;params:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;arg&nbsp;!=&nbsp;&quot;I&quot;:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user_input&nbsp;=&nbsp;input(f&quot;{arg}&nbsp;[{params[arg]}]:&nbsp;&quot;).strip()\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isinstance(params[arg],&nbsp;bool):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params[arg]&nbsp;=&nbsp;get_bool_from_input(user_input,&nbsp;params[arg])\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;user_input:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params[arg]&nbsp;=&nbsp;user_input\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;{arg}:&nbsp;{params[arg]}&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;params.pop(&quot;I&quot;)\n\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;params[&quot;start&quot;].startswith(&quot;https://github.com/&quot;):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params[&quot;start&quot;]&nbsp;=&nbsp;clone_github_repo(params[&quot;start&quot;])\n&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;not&nbsp;os.path.isdir(params[&quot;start&quot;]):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(f&quot;\&#x27;{params[\&#x27;start\&#x27;]}\&#x27;&nbsp;Invalid.&nbsp;Using&nbsp;current&nbsp;working&nbsp;directory.&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params[&quot;start&quot;]&nbsp;=&nbsp;os.getcwd()\n\n&nbsp;&nbsp;&nbsp;&nbsp;py2dataset(**params)\n\n\nif&nbsp;__name__&nbsp;==&nbsp;&quot;__main__&quot;:\n&nbsp;&nbsp;&nbsp;&nbsp;main()\n\n```&#x27;}]</td><td>18637</td><td>py2dataset/py2dataset.py</td></tr><tr><td>[{&#x27;from&#x27;:&nbsp;&#x27;system&#x27;,&nbsp;&#x27;value&#x27;:&nbsp;&quot;code&nbsp;documentation:&nbsp;Overview:&nbsp;The&nbsp;given&nbsp;`py2dataset\\save_output.py`&nbsp;script&nbsp;involves&nbsp;several&nbsp;utility&nbsp;functions&nbsp;focused&nbsp;on&nbsp;processing&nbsp;data&nbsp;files,&nbsp;transforming&nbsp;formats,&nbsp;and&nbsp;generating&nbsp;graphical&nbsp;outputs.&nbsp;These&nbsp;utilities&nbsp;primarily&nbsp;function&nbsp;as&nbsp;data&nbsp;readers,&nbsp;writers,&nbsp;and&nbsp;converters&nbsp;while&nbsp;interacting&nbsp;with&nbsp;Python&nbsp;file&nbsp;details.&nbsp;Main&nbsp;operations&nbsp;include&nbsp;handling&nbsp;JSON/YAML&nbsp;content&nbsp;management&nbsp;through&nbsp;`read_file()`&nbsp;and&nbsp;`write_file()`,&nbsp;translating&nbsp;JSON&nbsp;files&nbsp;to&nbsp;HTML&nbsp;format&nbsp;using&nbsp;`convert_json_to_html()`,&nbsp;consolidating&nbsp;multiple&nbsp;JSON&nbsp;files&nbsp;into&nbsp;&#x27;instruct.json&#x27;&nbsp;with&nbsp;duplicate&nbsp;removal&nbsp;via&nbsp;`combine_json_files()`,&nbsp;creating&nbsp;code&nbsp;graphs&nbsp;as&nbsp;PNG&nbsp;images&nbsp;utilizing&nbsp;`create_code_graph()`,&nbsp;and&nbsp;saving&nbsp;Python&nbsp;file&nbsp;data&nbsp;in&nbsp;YAML/JSON&nbsp;formats&nbsp;along&nbsp;with&nbsp;generating&nbsp;graphs&nbsp;through&nbsp;`save_python_data()`.\n\n1)&nbsp;read_file(file_path:&nbsp;This&nbsp;function&nbsp;reads&nbsp;contents&nbsp;from&nbsp;a&nbsp;given&nbsp;JSON&nbsp;or&nbsp;YAML&nbsp;file&nbsp;path,&nbsp;identified&nbsp;by&nbsp;&#x27;file_type&#x27;&nbsp;extracted&nbsp;from&nbsp;file&nbsp;suffix&nbsp;(&#x27;json&#x27;,&nbsp;&#x27;yaml&#x27;),&nbsp;accepting&nbsp;an&nbsp;instance&nbsp;of&nbsp;&#x27;Path&#x27;&nbsp;class&nbsp;(for&nbsp;accessibility&nbsp;with&nbsp;standard&nbsp;libraries),&nbsp;returns&nbsp;respective&nbsp;format&nbsp;contents&nbsp;as&nbsp;Python&nbsp;dictionary&nbsp;(&#x27;json.load()&#x27;&nbsp;for&nbsp;JSON;&nbsp;&#x27;yaml.load(f)&#x27;&nbsp;for&nbsp;YAML).\n2)&nbsp;write_file(data,&nbsp;file_path):&nbsp;Accepting&nbsp;a&nbsp;dictionary&nbsp;and&nbsp;a&nbsp;file&nbsp;path&nbsp;as&nbsp;arguments,&nbsp;it&nbsp;writes&nbsp;data&nbsp;into&nbsp;either&nbsp;JSON&nbsp;or&nbsp;YAML&nbsp;format&nbsp;depending&nbsp;on&nbsp;the&nbsp;suffix&nbsp;of&nbsp;&#x27;file_path&#x27;.&nbsp;If&nbsp;JSON&nbsp;(&#x27;json.dump(data)&#x27;,&nbsp;if&nbsp;YAML&nbsp;SafeDumper&nbsp;manages&nbsp;potential&nbsp;aliases&nbsp;disregard&nbsp;(&#x27;yaml.SafeDumper&#x27;),&nbsp;returning&nbsp;&#x27;None&#x27;.\n3)&nbsp;convert_json_to_html(directory):&nbsp;Looping&nbsp;over&nbsp;&#x27;.json&#x27;&nbsp;files&nbsp;within&nbsp;directory&nbsp;specified&nbsp;(&#x27;Path(directory).rglob()&#x27;),&nbsp;reads&nbsp;JSON&nbsp;data&nbsp;into&nbsp;&#x27;dataset&#x27;,&nbsp;generates&nbsp;HTML&nbsp;content&nbsp;preserving&nbsp;spaces&nbsp;and&nbsp;tabs&nbsp;(&#x27;preserve_spacing()&#x27;)&nbsp;in&nbsp;a&nbsp;table&nbsp;format,&nbsp;writes&nbsp;the&nbsp;result&nbsp;as&nbsp;&#x27;.html&#x27;.&nbsp;Handles&nbsp;exceptions&nbsp;during&nbsp;file&nbsp;saving&nbsp;(&#x27;logging.info&#x27;).\n4)&nbsp;preserve_spacing(text,&nbsp;tab_width):&nbsp;Accepts&nbsp;text&nbsp;input&nbsp;and&nbsp;tab&nbsp;width&nbsp;to&nbsp;replace&nbsp;&#x27;\\n&#x27;,&nbsp;&#x27;\\t&#x27;&nbsp;with&nbsp;&#x27;&amp;nbsp;&#x27;,&nbsp;maintaining&nbsp;spacing&nbsp;in&nbsp;text&nbsp;for&nbsp;HTML&nbsp;representation&nbsp;(returning&nbsp;transformed&nbsp;string).\n5)&nbsp;combine_json_files(directory,&nbsp;html=bool,&nbsp;questions):&nbsp;Processes&nbsp;all&nbsp;JSON&nbsp;files&nbsp;from&nbsp;the&nbsp;provided&nbsp;directory&nbsp;excluding&nbsp;a&nbsp;few&nbsp;skip-names&nbsp;(&#x27;instruct.json&#x27;,&nbsp;&#x27;chat_ml.json&#x27;),&nbsp;composites&nbsp;merged&nbsp;data&nbsp;as&nbsp;&#x27;combined_data&#x27;.&nbsp;Afterwards,&nbsp;generates&nbsp;&#x27;document_code.json&#x27;&nbsp;with&nbsp;filtered&nbsp;purposeful&nbsp;entries&nbsp;(&#x27;purpose_question&#x27;)&nbsp;and&nbsp;updates&nbsp;&#x27;nbytes&#x27;&nbsp;field&nbsp;in&nbsp;each&nbsp;entry&nbsp;by&nbsp;encoding&nbsp;conversation&nbsp;values&nbsp;(&#x27;len&#x27;).&nbsp;It&nbsp;further&nbsp;converts&nbsp;JSON&nbsp;files&nbsp;to&nbsp;HTML&nbsp;format&nbsp;if&nbsp;&#x27;html=True&#x27;.&nbsp;Returns&nbsp;a&nbsp;dictionary&nbsp;containing&nbsp;&#x27;instruct_list&#x27;&nbsp;datasets.\n6)&nbsp;create_code_graph(file_details,&nbsp;base_name,&nbsp;output_subdir):&nbsp;Constructs&nbsp;a&nbsp;graph&nbsp;from&nbsp;file&nbsp;details&nbsp;using&nbsp;NetworkX&nbsp;library&nbsp;(&#x27;nx.DiGraph&#x27;),&nbsp;adds&nbsp;nodes&nbsp;and&nbsp;edges&nbsp;according&nbsp;to&nbsp;input&nbsp;data&nbsp;structure&nbsp;(&#x27;G.add_nodes_from&#x27;,&nbsp;&#x27;G.add_edge&#x27;).&nbsp;Creates&nbsp;graphical&nbsp;layout&nbsp;with&nbsp;Matplotlib&nbsp;(&#x27;plt.figure&#x27;,&nbsp;&#x27;nx.spring_layout&#x27;)&nbsp;then&nbsp;saves&nbsp;it&nbsp;as&nbsp;&#x27;.png&#x27;&nbsp;in&nbsp;specified&nbsp;output&nbsp;directory&nbsp;(&#x27;output_subdir&#x27;,&nbsp;&#x27;plt.savefig&#x27;),&nbsp;managing&nbsp;exceptions&nbsp;along&nbsp;the&nbsp;way&nbsp;(&#x27;logging.error&#x27;).\n7)&nbsp;save_python_data(file_details,&nbsp;instruct_list,&nbsp;relative_path,&nbsp;output_dir):&nbsp;Takes&nbsp;details&nbsp;from&nbsp;Python&nbsp;files&nbsp;(&#x27;file_details&#x27;)&nbsp;as&nbsp;input&nbsp;and&nbsp;extracted&nbsp;instruction&nbsp;list&nbsp;(&#x27;instruct_list&#x27;).&nbsp;Handles&nbsp;saving&nbsp;as&nbsp;YAML&nbsp;and&nbsp;JSON&nbsp;in&nbsp;a&nbsp;specific&nbsp;subdirectory&nbsp;created&nbsp;from&nbsp;&#x27;output_dir&#x27;&nbsp;using&nbsp;write_file()&nbsp;functions.&nbsp;Lastly&nbsp;invokes&nbsp;code&nbsp;graph&nbsp;generation&nbsp;through&nbsp;`create_code_graph()`&nbsp;while&nbsp;logging&nbsp;errors&nbsp;if&nbsp;any&nbsp;occurrence.\n\nFunctional&nbsp;Requirements:\n1)&nbsp;read_file():&nbsp;Reads&nbsp;JSON&nbsp;or&nbsp;YAML&nbsp;files&nbsp;into&nbsp;Python&nbsp;dictionary&nbsp;format&nbsp;based&nbsp;on&nbsp;file&nbsp;extension.\n2)&nbsp;write_file():&nbsp;Writes&nbsp;a&nbsp;given&nbsp;dictionary&nbsp;data&nbsp;to&nbsp;JSON&nbsp;or&nbsp;YAML&nbsp;file&nbsp;formats&nbsp;according&nbsp;to&nbsp;suffix.\n3)&nbsp;convert_json_to_html():&nbsp;Converts&nbsp;JSON&nbsp;files&nbsp;within&nbsp;a&nbsp;directory&nbsp;to&nbsp;HTML&nbsp;format,&nbsp;preserving&nbsp;spaces&nbsp;and&nbsp;tabs&nbsp;in&nbsp;text&nbsp;content.\n4)&nbsp;combine_json_files():&nbsp;Combines&nbsp;all&nbsp;JSON&nbsp;files&nbsp;into&nbsp;&#x27;instruct.json&#x27;,&nbsp;eliminates&nbsp;duplicates,&nbsp;generates&nbsp;training&nbsp;data&nbsp;(&#x27;document_code&#x27;),&nbsp;updates&nbsp;nbytes&nbsp;fields&nbsp;in&nbsp;each&nbsp;conversation&nbsp;entry&nbsp;and&nbsp;optionally&nbsp;converts&nbsp;to&nbsp;HTML&nbsp;format&nbsp;on&nbsp;&#x27;html&#x27;&nbsp;input&nbsp;specification&nbsp;returning&nbsp;an&nbsp;object&nbsp;of&nbsp;combined&nbsp;data&nbsp;set&nbsp;((&#x27;instruct_list&#x27;)&nbsp;extracted&nbsp;JSON&nbsp;entries.\n5)&nbsp;create_code_graph():&nbsp;Visualizes&nbsp;the&nbsp;file&nbsp;graph&nbsp;representation&nbsp;with&nbsp;given&nbsp;details&nbsp;creating&nbsp;.png&nbsp;outputs&nbsp;for&nbsp;graph&nbsp;visualizations&nbsp;with&nbsp;user-specified&nbsp;base&nbsp;name&nbsp;and&nbsp;subdirectory.\n6)&nbsp;save_python_data():&nbsp;Handles&nbsp;saving&nbsp;Python&nbsp;file&nbsp;data&nbsp;as&nbsp;YAML,&nbsp;generates&nbsp;instruction&nbsp;datasets&nbsp;as&nbsp;JSON&nbsp;files&nbsp;alongside&nbsp;graphical&nbsp;outputs&nbsp;(utilizing&nbsp;`create_code_graph()`)&nbsp;considering&nbsp;exceptions&nbsp;during&nbsp;execution.\n\nVariables:\nread_file():&nbsp;file_path&nbsp;(Path),&nbsp;file_type,&nbsp;f&nbsp;-&nbsp;temporary&nbsp;file&nbsp;handler,&nbsp;dataset&nbsp;(dict),&nbsp;json_file&nbsp;(Path)\nwrite_file():&nbsp;data&nbsp;(Dict),&nbsp;file_path&nbsp;(Path),&nbsp;file_type\nconvert_json_to_html():&nbsp;html_content&nbsp;(str),&nbsp;tab_width&nbsp;(int=4),&nbsp;column_count&nbsp;(float),&nbsp;row_parts&nbsp;(list),&nbsp;column_width&nbsp;(float),&nbsp;html_rows&nbsp;(list),&nbsp;json_file&nbsp;(Path),&nbsp;cleaned_name&nbsp;(str),&nbsp;purpose_question&nbsp;(str),&nbsp;edge_labels&nbsp;(dict)\npreserve_spacing():&nbsp;text&nbsp;(str),&nbsp;tab_width&nbsp;(int)\ncombine_json_files():&nbsp;directory&nbsp;(str),&nbsp;combined_data&nbsp;(List[Dict]),&nbsp;code_filename&nbsp;(List[str]),&nbsp;skip_files&nbsp;(Set[str]),&nbsp;purpose_question&nbsp;(str),&nbsp;file_data&nbsp;(List),&nbsp;graph_type&nbsp;(str),&nbsp;chat_ml&nbsp;(List[dict])\ncreate_code_graph():&nbsp;output_subdir&nbsp;(Path),&nbsp;edge_labels&nbsp;(dict),&nbsp;pos&nbsp;(dict),&nbsp;label&nbsp;(list),&nbsp;G&nbsp;(networkx.DiGraph)\nsave_python_data():&nbsp;file_details&nbsp;(dict),&nbsp;instruct_list&nbsp;(List[Dict]),&nbsp;relative_path&nbsp;(Path),&nbsp;output_dir&nbsp;(str),&nbsp;output_file&nbsp;(Path),&nbsp;base_name&nbsp;(str),&nbsp;graph_type&nbsp;(str),&nbsp;edge&nbsp;(tuple),&nbsp;plt._current_fig_manager()&quot;},&nbsp;{&#x27;from&#x27;:&nbsp;&#x27;human&#x27;,&nbsp;&#x27;value&#x27;:&nbsp;&#x27;Output&nbsp;the&nbsp;Python&nbsp;code&nbsp;described&nbsp;by&nbsp;the&nbsp;code&nbsp;documentation.&#x27;},&nbsp;{&#x27;from&#x27;:&nbsp;&#x27;gpt&#x27;,&nbsp;&#x27;value&#x27;:&nbsp;&#x27;```python\n&quot;&quot;&quot;\nUtility&nbsp;functions&nbsp;for&nbsp;reading&nbsp;the&nbsp;input&nbsp;and&nbsp;saving&nbsp;the&nbsp;output&nbsp;of&nbsp;the&nbsp;py2dataset&nbsp;script.\nRequirements:\n[req01]&nbsp;The&nbsp;`read_file`&nbsp;function&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;a&nbsp;file&nbsp;path&nbsp;as&nbsp;an&nbsp;argument.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Read&nbsp;and&nbsp;return&nbsp;the&nbsp;contents&nbsp;of&nbsp;a&nbsp;JSON&nbsp;or&nbsp;YAML&nbsp;file&nbsp;as&nbsp;a&nbsp;dictionary.\n[req02]&nbsp;The&nbsp;`write_file`&nbsp;function&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;a&nbsp;dictionary&nbsp;and&nbsp;a&nbsp;file&nbsp;path&nbsp;as&nbsp;arguments.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Write&nbsp;the&nbsp;dictionary&nbsp;to&nbsp;a&nbsp;file&nbsp;in&nbsp;either&nbsp;JSON&nbsp;or&nbsp;YAML&nbsp;format.\n[req03]&nbsp;The&nbsp;`convert_json_to_html`&nbsp;function&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Convert&nbsp;JSON&nbsp;files&nbsp;within&nbsp;a&nbsp;given&nbsp;directory&nbsp;to&nbsp;HTML&nbsp;format.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Save&nbsp;each&nbsp;converted&nbsp;file&nbsp;with&nbsp;a&nbsp;.html&nbsp;extension.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Preserve&nbsp;spacing&nbsp;and&nbsp;tabs&nbsp;for&nbsp;the&nbsp;\&#x27;input\&#x27;&nbsp;field.\n[req04]&nbsp;The&nbsp;`combine_json_files`&nbsp;function&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;a&nbsp;directory&nbsp;path&nbsp;as&nbsp;an&nbsp;argument.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Merge&nbsp;all&nbsp;JSON&nbsp;files&nbsp;in&nbsp;the&nbsp;directory.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Remove&nbsp;duplicates&nbsp;from&nbsp;the&nbsp;combined&nbsp;JSON&nbsp;files.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Write&nbsp;the&nbsp;combined&nbsp;data&nbsp;to&nbsp;\&#x27;instruct.json\&#x27;&nbsp;files.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.&nbsp;Convert&nbsp;the&nbsp;merged&nbsp;JSON&nbsp;files&nbsp;to&nbsp;HTML&nbsp;format.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f.&nbsp;Return&nbsp;the&nbsp;\&#x27;instruct_list\&#x27;&nbsp;datasets.\n[req05]&nbsp;The&nbsp;`create_code_graph`&nbsp;function&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;details&nbsp;of&nbsp;a&nbsp;Python&nbsp;file,&nbsp;a&nbsp;base&nbsp;name,&nbsp;and&nbsp;an&nbsp;output&nbsp;directory&nbsp;as&nbsp;arguments.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Generate&nbsp;code&nbsp;graphs&nbsp;based&nbsp;on&nbsp;the&nbsp;provided&nbsp;file&nbsp;details.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Save&nbsp;the&nbsp;graphs&nbsp;as&nbsp;PNG&nbsp;images&nbsp;in&nbsp;the&nbsp;specified&nbsp;output&nbsp;directory.\n[req06]&nbsp;The&nbsp;`save_python_data`&nbsp;function&nbsp;shall:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.&nbsp;Accept&nbsp;details&nbsp;of&nbsp;a&nbsp;Python&nbsp;file,&nbsp;a&nbsp;base&nbsp;name,&nbsp;and&nbsp;an&nbsp;output&nbsp;directory&nbsp;as&nbsp;arguments.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.&nbsp;Save&nbsp;the&nbsp;details&nbsp;of&nbsp;the&nbsp;Python&nbsp;file&nbsp;as&nbsp;a&nbsp;YAML&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.&nbsp;Save&nbsp;the&nbsp;instruction&nbsp;data&nbsp;as&nbsp;JSON&nbsp;files.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.&nbsp;Generate&nbsp;and&nbsp;save&nbsp;code&nbsp;graphs.\n&quot;&quot;&quot;\nimport&nbsp;json\nimport&nbsp;logging\nfrom&nbsp;html&nbsp;import&nbsp;escape\nfrom&nbsp;pathlib&nbsp;import&nbsp;Path\nfrom&nbsp;typing&nbsp;import&nbsp;Dict,&nbsp;List\nimport&nbsp;matplotlib.pyplot&nbsp;as&nbsp;plt\nimport&nbsp;networkx&nbsp;as&nbsp;nx\nimport&nbsp;yaml\n\n\ndef&nbsp;read_file(file_path:&nbsp;Path)&nbsp;-&gt;&nbsp;Dict:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Reads&nbsp;a&nbsp;JSON&nbsp;or&nbsp;YAML&nbsp;file&nbsp;and&nbsp;returns&nbsp;its&nbsp;contents&nbsp;as&nbsp;a&nbsp;dictionary.\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(Path):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;contents&nbsp;of&nbsp;the&nbsp;file&nbsp;as&nbsp;a&nbsp;dictionary.\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;file_type&nbsp;=&nbsp;file_path.suffix[1:]\n&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;file_path.open()&nbsp;as&nbsp;f:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;file_type&nbsp;==&nbsp;&quot;json&quot;:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;json.load(f)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;file_type&nbsp;==&nbsp;&quot;yaml&quot;:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;yaml.load(f,&nbsp;Loader=yaml.SafeLoader)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{}\n\n\ndef&nbsp;write_file(data:&nbsp;Dict,&nbsp;file_path:&nbsp;Path)&nbsp;-&gt;&nbsp;None:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Writes&nbsp;a&nbsp;dictionary&nbsp;to&nbsp;a&nbsp;JSON&nbsp;or&nbsp;YAML&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;(Dict):&nbsp;The&nbsp;data&nbsp;to&nbsp;write&nbsp;to&nbsp;the&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_path&nbsp;(Path):&nbsp;The&nbsp;path&nbsp;to&nbsp;the&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;file_type&nbsp;=&nbsp;file_path.suffix[1:]\n&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;file_path.open(&quot;w&quot;)&nbsp;as&nbsp;f:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;file_type&nbsp;==&nbsp;&quot;json&quot;:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;json.dump(data,&nbsp;f,&nbsp;indent=4)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;file_type&nbsp;==&nbsp;&quot;yaml&quot;:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yaml.SafeDumper.ignore_aliases&nbsp;=&nbsp;lambda&nbsp;*args:&nbsp;True\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yaml.dump(data,&nbsp;f,&nbsp;Dumper=yaml.SafeDumper,&nbsp;sort_keys=False)\n\n\ndef&nbsp;convert_json_to_html(directory:&nbsp;str)&nbsp;-&gt;&nbsp;None:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Convert&nbsp;JSON&nbsp;files&nbsp;within&nbsp;a&nbsp;given&nbsp;directory&nbsp;to&nbsp;HTML&nbsp;format&nbsp;and&nbsp;save&nbsp;.html&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;directory&nbsp;(str):&nbsp;The&nbsp;directory&nbsp;where&nbsp;the&nbsp;JSON&nbsp;files&nbsp;are&nbsp;located.\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n\n&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;preserve_spacing(text:&nbsp;str,&nbsp;tab_width:&nbsp;int&nbsp;=&nbsp;4)&nbsp;-&gt;&nbsp;str:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Preserve&nbsp;spaces&nbsp;and&nbsp;tabs&nbsp;in&nbsp;the&nbsp;provided&nbsp;text.&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;text.replace(&quot;&nbsp;&quot;,&nbsp;&quot;&amp;nbsp;&quot;).replace(&quot;\\t&quot;,&nbsp;&quot;&amp;nbsp;&quot;&nbsp;*&nbsp;tab_width)\n\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;json_file&nbsp;in&nbsp;Path(directory).rglob(&quot;*.json&quot;):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataset&nbsp;=&nbsp;read_file(json_file)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;dataset:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html_content&nbsp;=&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;html&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;head&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;style&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;{border-collapse:&nbsp;collapse;&nbsp;width:&nbsp;100%;&nbsp;table-layout:&nbsp;fixed;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;th,&nbsp;td&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;border:&nbsp;1px&nbsp;solid&nbsp;black;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;padding:&nbsp;8px;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text-align:&nbsp;left;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;white-space:&nbsp;pre-line;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vertical-align:&nbsp;top;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;word-wrap:&nbsp;break-word;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/style&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/head&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;body&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;table&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;thead&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;column_count&nbsp;=&nbsp;len(dataset[0].keys())\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;column_width&nbsp;=&nbsp;round(100&nbsp;/&nbsp;column_count,&nbsp;2)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;key&nbsp;in&nbsp;dataset[0].keys():\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html_content&nbsp;+=&nbsp;f&quot;&lt;th&nbsp;style=\&#x27;width:&nbsp;{column_width}%;\&#x27;&gt;{key}&lt;/th&gt;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html_content&nbsp;+=&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/thead&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;tbody&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html_rows&nbsp;=&nbsp;[]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;entry&nbsp;in&nbsp;dataset:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;row_parts&nbsp;=&nbsp;[&quot;&lt;tr&gt;&quot;]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;key&nbsp;in&nbsp;entry:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;=&nbsp;escape(str(entry[key]))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;=&nbsp;preserve_spacing(value)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;=&nbsp;value.replace(&quot;\\n&quot;,&nbsp;&quot;&lt;br/&gt;&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;row_parts.append(f&quot;&lt;td&gt;{value}&lt;/td&gt;&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;row_parts.append(&quot;&lt;/tr&gt;&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html_rows.append(&quot;&quot;.join(row_parts))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html_content&nbsp;+=&nbsp;&quot;&quot;.join(html_rows)\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html_content&nbsp;+=&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tbody&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/table&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/body&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/html&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html_file_path&nbsp;=&nbsp;json_file.with_suffix(&quot;.html&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;open(html_file_path,&nbsp;&quot;w&quot;,&nbsp;encoding=&quot;utf-8&quot;)&nbsp;as&nbsp;file:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file.write(html_content)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&quot;Failed&nbsp;saving:&nbsp;{html_file_path}&quot;)\n\n\ndef&nbsp;combine_json_files(\n&nbsp;&nbsp;&nbsp;&nbsp;directory:&nbsp;str,&nbsp;html:&nbsp;bool,&nbsp;questions:&nbsp;Dict\n)&nbsp;-&gt;&nbsp;Dict[str,&nbsp;List[Dict]]:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Combine&nbsp;all&nbsp;JSON&nbsp;files&nbsp;in&nbsp;the&nbsp;output&nbsp;directory&nbsp;into&nbsp;\&#x27;instruct.json\&#x27;,&nbsp;and\n&nbsp;&nbsp;&nbsp;&nbsp;then&nbsp;remove&nbsp;duplicates.&nbsp;Also&nbsp;generate&nbsp;a&nbsp;\&#x27;training.json\&#x27;&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;directory&nbsp;(str):&nbsp;The&nbsp;directory&nbsp;where&nbsp;the&nbsp;output&nbsp;files&nbsp;are&nbsp;located.\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;dictionary&nbsp;containing&nbsp;the&nbsp;\&#x27;instruct_list\&#x27;&nbsp;datasets.\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&quot;Combining&nbsp;JSON&nbsp;files&nbsp;in&nbsp;{directory}&quot;)\n\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Save&nbsp;instruct.json&nbsp;file\n&nbsp;&nbsp;&nbsp;&nbsp;combined_data,&nbsp;code_filename&nbsp;=&nbsp;[],&nbsp;[]\n&nbsp;&nbsp;&nbsp;&nbsp;skip_files&nbsp;=&nbsp;{&quot;instruct.json&quot;,&nbsp;&quot;chat_ml.json&quot;,&nbsp;&quot;document_code.json&quot;}\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;json_file&nbsp;in&nbsp;Path(directory).rglob(&quot;*.json&quot;):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;json_file.name&nbsp;in&nbsp;skip_files:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_data&nbsp;=&nbsp;read_file(json_file)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;file_data:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;combined_data.extend(file_data)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cleaned_name&nbsp;=&nbsp;(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;json_file.relative_to(directory)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.with_suffix(&quot;&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.as_posix()\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.replace(&quot;.instruct&quot;,&nbsp;&quot;&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code_filename.append(cleaned_name)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(f&quot;Failed&nbsp;reading:&nbsp;{json_file}.&nbsp;Error:&nbsp;{e}&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;write_file(combined_data,&nbsp;Path(directory)&nbsp;/&nbsp;&quot;instruct.json&quot;)\n\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Generate&nbsp;document_code.json&nbsp;file\n&nbsp;&nbsp;&nbsp;&nbsp;purpose_question&nbsp;=&nbsp;[\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item[&quot;text&quot;]&nbsp;for&nbsp;item&nbsp;in&nbsp;questions&nbsp;if&nbsp;item[&quot;id&quot;]&nbsp;==&nbsp;&quot;file_purpose&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;][0]\n&nbsp;&nbsp;&nbsp;&nbsp;purpose_question&nbsp;=&nbsp;purpose_question.split(&quot;{filename}&quot;)[0]\n&nbsp;&nbsp;&nbsp;&nbsp;purpose_data&nbsp;=&nbsp;[\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;item&nbsp;in&nbsp;combined_data\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;item[&quot;instruction&quot;].startswith(purpose_question)\n&nbsp;&nbsp;&nbsp;&nbsp;]\n\n&nbsp;&nbsp;&nbsp;&nbsp;document_code&nbsp;=&nbsp;[\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;document&quot;:&nbsp;item[&quot;output&quot;],\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;code&quot;:&nbsp;item[&quot;input&quot;],\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;item&nbsp;in&nbsp;purpose_data\n&nbsp;&nbsp;&nbsp;&nbsp;]\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i,&nbsp;item&nbsp;in&nbsp;enumerate(document_code):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item[&quot;code&nbsp;filename&quot;]&nbsp;=&nbsp;code_filename[i]\n\n&nbsp;&nbsp;&nbsp;&nbsp;write_file(document_code,&nbsp;Path(directory)&nbsp;/&nbsp;&quot;document_code.json&quot;)\n\n&nbsp;&nbsp;&nbsp;&nbsp;chat_ml&nbsp;=&nbsp;[\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;conversation&quot;:&nbsp;[\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&quot;from&quot;:&nbsp;&quot;system&quot;,&nbsp;&quot;value&quot;:&nbsp;f&quot;code&nbsp;documentation:&nbsp;{item[\&#x27;document\&#x27;]}&quot;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;from&quot;:&nbsp;&quot;human&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;value&quot;:&nbsp;&quot;Output&nbsp;the&nbsp;Python&nbsp;code&nbsp;described&nbsp;by&nbsp;the&nbsp;code&nbsp;documentation.&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&quot;from&quot;:&nbsp;&quot;gpt&quot;,&nbsp;&quot;value&quot;:&nbsp;item[&quot;code&quot;]},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;nbytes&quot;:&nbsp;&quot;0&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;source&quot;:&nbsp;item[&quot;code&nbsp;filename&quot;],\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;item&nbsp;in&nbsp;document_code\n&nbsp;&nbsp;&nbsp;&nbsp;]\n\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Compute&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;for&nbsp;each&nbsp;conversation&nbsp;and&nbsp;update&nbsp;the&nbsp;nbytes&nbsp;field\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;item&nbsp;in&nbsp;chat_ml:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nbytes&nbsp;=&nbsp;0\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;conv&nbsp;in&nbsp;item[&quot;conversation&quot;]:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nbytes&nbsp;+=&nbsp;len(conv[&quot;value&quot;].encode(&quot;utf-8&quot;))\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item[&quot;nbytes&quot;]&nbsp;=&nbsp;nbytes\n\n&nbsp;&nbsp;&nbsp;&nbsp;write_file(chat_ml,&nbsp;Path(directory)&nbsp;/&nbsp;&quot;chat_ml.json&quot;)\n\n&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;html:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.info(&quot;Converting&nbsp;JSON&nbsp;files&nbsp;to&nbsp;HTML&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;convert_json_to_html(directory)\n\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{&quot;instruct_list&quot;:&nbsp;combined_data}\n\n\ndef&nbsp;create_code_graph(file_details:&nbsp;Dict,&nbsp;base_name:&nbsp;str,&nbsp;output_subdir:&nbsp;Path)&nbsp;-&gt;&nbsp;None:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Generate&nbsp;graphs&nbsp;from&nbsp;the&nbsp;file_details&nbsp;and&nbsp;save&nbsp;them&nbsp;as&nbsp;PNG&nbsp;images.\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(dict):&nbsp;The&nbsp;details&nbsp;extracted&nbsp;from&nbsp;the&nbsp;Python&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;(str):&nbsp;The&nbsp;base&nbsp;name&nbsp;of&nbsp;the&nbsp;output&nbsp;files.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_subdir&nbsp;(Path):&nbsp;The&nbsp;subdirectory&nbsp;where&nbsp;the&nbsp;output&nbsp;files&nbsp;will&nbsp;be&nbsp;saved.\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;create&nbsp;graph\n&nbsp;&nbsp;&nbsp;&nbsp;graph_type&nbsp;=&nbsp;&quot;entire_code_graph&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;G&nbsp;=&nbsp;nx.DiGraph()\n&nbsp;&nbsp;&nbsp;&nbsp;G.add_nodes_from(file_details[&quot;file_info&quot;][graph_type][&quot;nodes&quot;])\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;edge&nbsp;in&nbsp;file_details[&quot;file_info&quot;][graph_type][&quot;edges&quot;]:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source,&nbsp;target&nbsp;=&nbsp;edge[&quot;source&quot;],&nbsp;edge[&quot;target&quot;]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;source&nbsp;in&nbsp;G.nodes&nbsp;and&nbsp;target&nbsp;in&nbsp;G.nodes:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;G.add_edge(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;k:&nbsp;v\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;k,&nbsp;v&nbsp;in&nbsp;edge.items()\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;k&nbsp;in&nbsp;[&quot;target_inputs&quot;,&nbsp;&quot;target_returns&quot;]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;draw&nbsp;graph\n&nbsp;&nbsp;&nbsp;&nbsp;plt.figure(figsize=(20,&nbsp;20))\n&nbsp;&nbsp;&nbsp;&nbsp;pos&nbsp;=&nbsp;nx.spring_layout(G)\n&nbsp;&nbsp;&nbsp;&nbsp;nx.draw(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;G,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with_labels=True,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font_weight=&quot;bold&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font_size=8,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node_shape=&quot;s&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node_size=500,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width=1,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arrowsize=12,\n&nbsp;&nbsp;&nbsp;&nbsp;)\n&nbsp;&nbsp;&nbsp;&nbsp;edge_labels&nbsp;=&nbsp;{}\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;edge&nbsp;in&nbsp;G.edges(data=True):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label&nbsp;=&nbsp;[]\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&quot;target_inputs&quot;&nbsp;in&nbsp;edge[2]&nbsp;and&nbsp;edge[2][&quot;target_inputs&quot;]:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label.append(f&quot;Inputs:&nbsp;{\&#x27;,&nbsp;\&#x27;.join(edge[2][\&#x27;target_inputs\&#x27;])}&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&quot;target_returns&quot;&nbsp;in&nbsp;edge[2]&nbsp;and&nbsp;edge[2][&quot;target_returns&quot;]:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label.append(f&quot;\\nReturns:&nbsp;{\&#x27;,&nbsp;\&#x27;.join(edge[2][\&#x27;target_returns\&#x27;])}&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;edge_labels[(edge[0],&nbsp;edge[1])]&nbsp;=&nbsp;&quot;\\n&quot;.join(label)\n&nbsp;&nbsp;&nbsp;&nbsp;nx.draw_networkx_edge_labels(G,&nbsp;pos,&nbsp;edge_labels=edge_labels,&nbsp;font_size=6)\n\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;save&nbsp;graph\n&nbsp;&nbsp;&nbsp;&nbsp;output_file&nbsp;=&nbsp;output_subdir&nbsp;/&nbsp;f&quot;{base_name}.{graph_type}.png&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;plt.savefig(output_file)\n&nbsp;&nbsp;&nbsp;&nbsp;plt.close()\n\n\ndef&nbsp;save_python_data(\n&nbsp;&nbsp;&nbsp;&nbsp;file_details:&nbsp;dict,&nbsp;instruct_list:&nbsp;list,&nbsp;relative_path:&nbsp;Path,&nbsp;output_dir:&nbsp;str\n)&nbsp;-&gt;&nbsp;None:\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;Save&nbsp;the&nbsp;details&nbsp;of&nbsp;the&nbsp;Python&nbsp;file&nbsp;as&nbsp;a&nbsp;YAML&nbsp;file,&nbsp;the&nbsp;instruction&nbsp;data&nbsp;as&nbsp;JSON&nbsp;files,\n&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;generate&nbsp;and&nbsp;save&nbsp;code&nbsp;graphs.\n&nbsp;&nbsp;&nbsp;&nbsp;Args:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file_details&nbsp;(dict):&nbsp;The&nbsp;details&nbsp;extracted&nbsp;from&nbsp;the&nbsp;Python&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instruct_list&nbsp;(list):&nbsp;The&nbsp;instruction&nbsp;data&nbsp;extracted&nbsp;from&nbsp;the&nbsp;Python&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;relative_path&nbsp;(Path):&nbsp;The&nbsp;relative&nbsp;path&nbsp;of&nbsp;the&nbsp;Python&nbsp;file.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_dir&nbsp;(str):&nbsp;The&nbsp;directory&nbsp;where&nbsp;the&nbsp;output&nbsp;files&nbsp;will&nbsp;be&nbsp;saved.\n&nbsp;&nbsp;&nbsp;&nbsp;Returns:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;None\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;output_subdir&nbsp;=&nbsp;Path(output_dir)&nbsp;/&nbsp;relative_path.parent\n&nbsp;&nbsp;&nbsp;&nbsp;output_subdir.mkdir(parents=True,&nbsp;exist_ok=True)\n&nbsp;&nbsp;&nbsp;&nbsp;base_name&nbsp;=&nbsp;relative_path.name\n&nbsp;&nbsp;&nbsp;&nbsp;write_file(instruct_list,&nbsp;output_subdir&nbsp;/&nbsp;f&quot;{base_name}.instruct.json&quot;)\n&nbsp;&nbsp;&nbsp;&nbsp;write_file(file_details,&nbsp;output_subdir&nbsp;/&nbsp;f&quot;{base_name}.details.yaml&quot;)\n\n&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Generating&nbsp;and&nbsp;saving&nbsp;the&nbsp;code&nbsp;graph\n&nbsp;&nbsp;&nbsp;&nbsp;try:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;create_code_graph(file_details,&nbsp;base_name,&nbsp;output_subdir)\n&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logging.error(f&quot;Error&nbsp;creating&nbsp;graph&nbsp;for&nbsp;{base_name}:&nbsp;{e}&quot;,&nbsp;exc_info=True)\n\n```&#x27;}]</td><td>16730</td><td>py2dataset/save_output.py</td></tr><tr><td>[{&#x27;from&#x27;:&nbsp;&#x27;system&#x27;,&nbsp;&#x27;value&#x27;:&nbsp;&quot;code&nbsp;documentation:&nbsp;1.&nbsp;Purpose&nbsp;and&nbsp;Processing&nbsp;Approach&nbsp;of&nbsp;Python&nbsp;File&nbsp;`setup.py`:\nThe&nbsp;given&nbsp;`setup.py`&nbsp;file&nbsp;serves&nbsp;as&nbsp;a&nbsp;configuration&nbsp;script&nbsp;primarily&nbsp;utilized&nbsp;by&nbsp;the&nbsp;Setuptools&nbsp;package&nbsp;during&nbsp;software&nbsp;distribution&nbsp;creation&nbsp;for&nbsp;Python&nbsp;projects.&nbsp;It&nbsp;provides&nbsp;essential&nbsp;metadata&nbsp;about&nbsp;the&nbsp;project,&nbsp;including&nbsp;its&nbsp;name,&nbsp;version,&nbsp;author&nbsp;details,&nbsp;description,&nbsp;license&nbsp;type,&nbsp;dependencies,&nbsp;and&nbsp;entry&nbsp;points&nbsp;while&nbsp;defining&nbsp;packages&nbsp;and&nbsp;modules&nbsp;required&nbsp;for&nbsp;installation.&nbsp;This&nbsp;facilitates&nbsp;seamless&nbsp;packaging&nbsp;and&nbsp;deployment&nbsp;of&nbsp;`py2dataset`&nbsp;into&nbsp;an&nbsp;executable&nbsp;format&nbsp;for&nbsp;end-users&nbsp;or&nbsp;other&nbsp;systems.\n\n2.&nbsp;API&nbsp;Signatures&nbsp;(Functional&nbsp;Components):\na)&nbsp;`get_code_graph`:&nbsp;Details&nbsp;unavailable&nbsp;as&nbsp;this&nbsp;is&nbsp;a&nbsp;module&nbsp;name&nbsp;within&nbsp;the&nbsp;package&nbsp;but&nbsp;not&nbsp;explicitly&nbsp;mentioned&nbsp;as&nbsp;a&nbsp;function&nbsp;or&nbsp;class&nbsp;method&nbsp;in&nbsp;the&nbsp;given&nbsp;code&nbsp;snippet.&nbsp;However,&nbsp;it&nbsp;might&nbsp;be&nbsp;part&nbsp;of&nbsp;an&nbsp;internal&nbsp;implementation&nbsp;for&nbsp;generating&nbsp;graph&nbsp;representations&nbsp;of&nbsp;Python&nbsp;source&nbsp;code&nbsp;structures.\n\nb)&nbsp;`get_params`:&nbsp;Similar&nbsp;to&nbsp;&#x27;a&#x27;,&nbsp;this&nbsp;module&nbsp;name&nbsp;lacks&nbsp;explicit&nbsp;API&nbsp;signature&nbsp;information&nbsp;but&nbsp;could&nbsp;involve&nbsp;retrieving&nbsp;parameters&nbsp;related&nbsp;to&nbsp;Python&nbsp;code&nbsp;analysis&nbsp;or&nbsp;dataset&nbsp;generation&nbsp;processes&nbsp;within&nbsp;the&nbsp;`py2dataset`&nbsp;toolkit.\n\nc)&nbsp;`get_python_datasets`:&nbsp;Not&nbsp;explicitly&nbsp;defined&nbsp;as&nbsp;a&nbsp;function&nbsp;or&nbsp;class&nbsp;method&nbsp;either,&nbsp;but&nbsp;likely&nbsp;responsible&nbsp;for&nbsp;generating&nbsp;structured&nbsp;datasets&nbsp;from&nbsp;Python&nbsp;source&nbsp;codes&nbsp;by&nbsp;extracting&nbsp;relevant&nbsp;data&nbsp;points.\n\nd)&nbsp;`get_python_file_details`:&nbsp;Again,&nbsp;a&nbsp;module&nbsp;name&nbsp;without&nbsp;an&nbsp;API&nbsp;signature&nbsp;provided&nbsp;in&nbsp;the&nbsp;code&nbsp;snippet;&nbsp;possibly&nbsp;handling&nbsp;detailed&nbsp;information&nbsp;extraction&nbsp;about&nbsp;individual&nbsp;Python&nbsp;files&nbsp;during&nbsp;dataset&nbsp;generation.\n\ne)&nbsp;`py2dataset`&nbsp;(Main&nbsp;Module):\ni)&nbsp;`main()`&nbsp;-&nbsp;Entry&nbsp;point&nbsp;function&nbsp;for&nbsp;console&nbsp;script&nbsp;execution&nbsp;when&nbsp;running&nbsp;`py2dataset`&nbsp;as&nbsp;a&nbsp;command-line&nbsp;tool&nbsp;via&nbsp;`python&nbsp;-m&nbsp;py2dataset`.\n\n3.&nbsp;Functional&nbsp;Requirements:\na)&nbsp;The&nbsp;core&nbsp;objective&nbsp;of&nbsp;py2dataset&nbsp;is&nbsp;transforming&nbsp;Python&nbsp;source&nbsp;codes&nbsp;into&nbsp;structured&nbsp;datasets&nbsp;that&nbsp;users&nbsp;can&nbsp;further&nbsp;analyze,&nbsp;interpret,&nbsp;or&nbsp;use&nbsp;in&nbsp;their&nbsp;analyses/workflows.&nbsp;It&nbsp;combines&nbsp;features&nbsp;like&nbsp;generating&nbsp;graph&nbsp;representations&nbsp;(&#x27;get_code_graph&#x27;),&nbsp;collecting&nbsp;parameters&nbsp;(&#x27;get_params&#x27;),&nbsp;extracting&nbsp;file&nbsp;details&nbsp;(&#x27;get_python_file_details&#x27;),&nbsp;and&nbsp;producing&nbsp;output&nbsp;files&nbsp;(&#x27;save_output&#x27;).\n\nb)&nbsp;The&nbsp;software&nbsp;operates&nbsp;under&nbsp;Python&nbsp;3.8&nbsp;or&nbsp;higher&nbsp;versions,&nbsp;ensuring&nbsp;compatibility&nbsp;with&nbsp;modern&nbsp;programming&nbsp;standards&nbsp;and&nbsp;libraries&#x27;&nbsp;functionalities.\n\nc)&nbsp;Dependencies&nbsp;include&nbsp;`matplotlib`&nbsp;for&nbsp;advanced&nbsp;plotting&nbsp;support&nbsp;if&nbsp;visualizing&nbsp;the&nbsp;extracted&nbsp;graphs;&nbsp;`networkx`,&nbsp;an&nbsp;excellent&nbsp;choice&nbsp;for&nbsp;representing&nbsp;dataset&nbsp;relations&nbsp;through&nbsp;graph&nbsp;objects;&nbsp;`ctransformers`,&nbsp;a&nbsp;useful&nbsp;Natural&nbsp;Language&nbsp;Processing&nbsp;toolkit&nbsp;in&nbsp;contemporary&nbsp;machine&nbsp;learning&nbsp;practices;&nbsp;`PyYaml`,&nbsp;responsible&nbsp;for&nbsp;loading&nbsp;or&nbsp;manipulating&nbsp;data&nbsp;structured&nbsp;with&nbsp;YAML&nbsp;files,&nbsp;potentially&nbsp;supporting&nbsp;customization;&nbsp;lastly&nbsp;`GitPython`&nbsp;enables&nbsp;interacting&nbsp;with&nbsp;Git&nbsp;repositories,&nbsp;enabling&nbsp;source&nbsp;code&nbsp;version&nbsp;tracking&nbsp;or&nbsp;project&nbsp;analysis&nbsp;from&nbsp;repository&nbsp;history.\n\nd)&nbsp;Users&nbsp;can&nbsp;execute&nbsp;`py2dataset`&nbsp;as&nbsp;a&nbsp;console&nbsp;script&nbsp;using&nbsp;the&nbsp;command&nbsp;`python&nbsp;-m&nbsp;py2dataset`,&nbsp;launching&nbsp;the&nbsp;main&nbsp;function&nbsp;(&#x27;main()&#x27;)&nbsp;to&nbsp;trigger&nbsp;the&nbsp;tool&#x27;s&nbsp;functionality&nbsp;from&nbsp;any&nbsp;location&nbsp;after&nbsp;installation.\n\n4.&nbsp;Variables&nbsp;Description:\na)&nbsp;`long_description`&nbsp;-&nbsp;Holds&nbsp;contents&nbsp;of&nbsp;&#x27;README.md&#x27;,&nbsp;providing&nbsp;detailed&nbsp;documentation&nbsp;about&nbsp;the&nbsp;project&nbsp;in&nbsp;Markdown&nbsp;format&nbsp;for&nbsp;users&nbsp;to&nbsp;understand&nbsp;its&nbsp;purpose,&nbsp;usage&nbsp;instructions,&nbsp;and&nbsp;other&nbsp;relevant&nbsp;information.\n\nb)&nbsp;`name`&nbsp;-&nbsp;Identifies&nbsp;the&nbsp;package&nbsp;as&nbsp;&#x27;py2dataset&#x27;&nbsp;during&nbsp;installation&nbsp;or&nbsp;distribution&nbsp;processes.\n\nc)&nbsp;`version`&nbsp;-&nbsp;Denotes&nbsp;current&nbsp;software&nbsp;version&nbsp;(0.4).\n\nd)&nbsp;`author`&nbsp;-&nbsp;Specifies&nbsp;Jeff&nbsp;Meloy&nbsp;as&nbsp;the&nbsp;creator&nbsp;of&nbsp;this&nbsp;tool&nbsp;with&nbsp;contact&nbsp;email&nbsp;&#x27;jeffmeloy@gmail.com&#x27;.\n\ne)&nbsp;`description`&nbsp;-&nbsp;Briefly&nbsp;explains&nbsp;py2dataset&#x27;s&nbsp;functionality&nbsp;(&#x27;A&nbsp;tool&nbsp;to&nbsp;generate&nbsp;structured&nbsp;datasets&nbsp;from&nbsp;Python&nbsp;source&nbsp;code&#x27;).\n\nf)&nbsp;`long_description_content_type`&nbsp;-&nbsp;Marks&nbsp;file&nbsp;contents&nbsp;as&nbsp;text&nbsp;in&nbsp;Markdown&nbsp;format&nbsp;for&nbsp;easier&nbsp;documentation&nbsp;consumption&nbsp;and&nbsp;understanding.\n\ng)&nbsp;`url`&nbsp;-&nbsp;Directs&nbsp;users&nbsp;to&nbsp;the&nbsp;project&nbsp;GitHub&nbsp;repository&nbsp;(https://github.com/jeffmeloy/py2dataset),&nbsp;serving&nbsp;as&nbsp;additional&nbsp;learning&nbsp;material&nbsp;and&nbsp;supporting&nbsp;contribution&nbsp;discussions&nbsp;or&nbsp;issues&nbsp;reporting.\n\nh)&nbsp;`python_requires`&nbsp;-&nbsp;Lists&nbsp;required&nbsp;Python&nbsp;versions&nbsp;of&nbsp;&#x27;3&#x27;&nbsp;and&nbsp;higher,&nbsp;enabling&nbsp;seamless&nbsp;usage&nbsp;across&nbsp;newer&nbsp;development&nbsp;platforms&nbsp;with&nbsp;optimized&nbsp;functionality.\n\ni)&nbsp;`install_requires`&nbsp;-&nbsp;Specifies&nbsp;dependencies&nbsp;needed&nbsp;for&nbsp;py2dataset&nbsp;to&nbsp;function&nbsp;correctly:&nbsp;`matplotlib`,&nbsp;`networkx`,&nbsp;`ctransformers`,&nbsp;`PyYaml`,&nbsp;and&nbsp;`GitPython`.\n\nj)&nbsp;`entry_points`&nbsp;-&nbsp;Defines&nbsp;&#x27;console_scripts&#x27;&nbsp;section&nbsp;mapping&nbsp;`py2dataset`&nbsp;command&nbsp;execution&nbsp;to&nbsp;the&nbsp;main()&nbsp;function&nbsp;within&nbsp;the&nbsp;package.\n\nk)&nbsp;`packages`&nbsp;-&nbsp;Informs&nbsp;Setuptools&nbsp;about&nbsp;the&nbsp;root&nbsp;directory&nbsp;(&#x27;py2dataset&#x27;)&nbsp;containing&nbsp;Python&nbsp;modules/packages&nbsp;for&nbsp;installation&nbsp;purposes.\n\nl)&nbsp;`package_dir`&nbsp;-&nbsp;Relates&nbsp;module&nbsp;paths&nbsp;to&nbsp;their&nbsp;respective&nbsp;locations&nbsp;on&nbsp;disk&nbsp;(&#x27;.\\\\&#x27;&nbsp;denotes&nbsp;relative&nbsp;pathing&nbsp;from&nbsp;`setup.py`).&quot;},&nbsp;{&#x27;from&#x27;:&nbsp;&#x27;human&#x27;,&nbsp;&#x27;value&#x27;:&nbsp;&#x27;Output&nbsp;the&nbsp;Python&nbsp;code&nbsp;described&nbsp;by&nbsp;the&nbsp;code&nbsp;documentation.&#x27;},&nbsp;{&#x27;from&#x27;:&nbsp;&#x27;gpt&#x27;,&nbsp;&#x27;value&#x27;:&nbsp;&#x27;```python\nfrom&nbsp;setuptools&nbsp;import&nbsp;setup\n\nwith&nbsp;open(&quot;README.md&quot;,&nbsp;&quot;r&quot;)&nbsp;as&nbsp;fh:\n&nbsp;&nbsp;&nbsp;&nbsp;long_description&nbsp;=&nbsp;fh.read()\n\nsetup(\n&nbsp;&nbsp;&nbsp;&nbsp;name=&quot;py2dataset&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;version=&quot;0.4&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;author=&quot;Jeff&nbsp;Meloy&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;author_email=&quot;jeffmeloy@gmail.com&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;description=&quot;A&nbsp;tool&nbsp;to&nbsp;generate&nbsp;structured&nbsp;datasets&nbsp;from&nbsp;Python&nbsp;source&nbsp;code&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;long_description=long_description,\n&nbsp;&nbsp;&nbsp;&nbsp;long_description_content_type=&quot;text/markdown&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;url=&quot;https://github.com/jeffmeloy/py2dataset&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;py_modules=[&quot;get_code_graph&quot;,&nbsp;&quot;get_params&quot;,&nbsp;&quot;get_python_datasets&quot;,&nbsp;&quot;get_python_file_details&quot;,&nbsp;&quot;py2dataset&quot;,&nbsp;&quot;save_output&quot;],\n&nbsp;&nbsp;&nbsp;&nbsp;classifiers=[\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Programming&nbsp;Language&nbsp;::&nbsp;Python&nbsp;::&nbsp;3&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;License&nbsp;::&nbsp;OSI&nbsp;Approved&nbsp;::&nbsp;MIT&nbsp;License&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Operating&nbsp;System&nbsp;::&nbsp;OS&nbsp;Independent&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;],\n&nbsp;&nbsp;&nbsp;&nbsp;python_requires=&quot;&gt;=3.8&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;install_requires=[&quot;matplotlib&quot;,&nbsp;&quot;networkx&quot;,&nbsp;&quot;ctransformers&quot;,&nbsp;&quot;PyYaml&quot;,&nbsp;&quot;GitPython&quot;,&nbsp;],\n&nbsp;&nbsp;&nbsp;&nbsp;entry_points={&quot;console_scripts&quot;:&nbsp;[&quot;py2dataset&nbsp;=&nbsp;py2dataset:main&quot;]},\n&nbsp;&nbsp;&nbsp;&nbsp;packages=[&quot;py2dataset&quot;],\n&nbsp;&nbsp;&nbsp;&nbsp;package_dir={&quot;py2dataset&quot;:&nbsp;&quot;.\\\\&quot;},\n)\n\n```&#x27;}]</td><td>5873</td><td>py2dataset/setup.py</td></tr>
                </tbody>
            </table>
        </body>
        </html>
        